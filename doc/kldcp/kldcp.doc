KLDCP.DOC









		IDENTIFICATION
		------V[---
ХODUCT CODEBf"A- 10 %̉CP

	PRODUCT fu1"çYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM

	D5"ELEASED:	SEPTEMQi so5

	VERSION:	̓INTAIb Y:	DIAGNOSaNGINEERING񢆊5jHN' %ɥCHOFF񢆊COPYRIGHTԠc973, 1974, 1975
DIG5 AjɡMENT CORPOPjIEMRLBORO, MAt a-ڲ
THIS SOFTWARE IS iNSHED E A LICENSEAUSE O,ON A SINGL!ϛPUTERөPA& BE COPIEDLԑ
THE INCLUSION OF TPAOVE COPYRIGHT N$ËT4SFTWARE,
OR ANY OTHER COP1iiEF, MAY NOT BE PROVIDO OTHERWISE
MADE AVAILABLE TO ANY OTHER PERSON EXECPT FOR USE ON SUCH SYSTEM
AND TO ONE WHO AGREES TO THESE LICENSE TERMS.  TITLE TO AND
OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN DEC.

THE INFORMATION IN THIS DOCUMENT IS SUBJECT TO CHANGE WITHOUT
NOTICE AND SHOULD NOT BE CONSTRUED AS A COMMITMENT BY DIGITAL
EQUIPMENT CORPORATION.

DEC ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY OF ITS
SOFTWARE ON EQUIbΩI$ANOT S(LB DEC.

"
WE HAVE GONE TO CONSIDERABLE DIFFICULTY AND EXPENSE TO ASSEMBLE A
STAFF OF SORCERERS, SHAMANS, CONJURERS AND LAWYERS TO VISIT NETTLESOME
AND MYSTIFING DISCOMFORTS ON ANY NINNY WHO ENDEAVORS TO REPRODUCE
OR USE THIS PROGRAM IN ANY FORM OR BY ANY MEANS, ELECTRONIC OR
OTHERWISE, INCLUDING COMPUTERS AND INFORMATION SYSTEMS, WITHOUT
PERMISSION FROM THE DEVELOPER.  WATCH YOURSELF! "
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

			TABLE OF CONTENTS
			-----------------
1.0	ABSTRACT

2.0	CONTROL SWITCHES

3.0	DIAGNOSTIC CONSOLE OPERATIONS

4.0	PDP-11 SUBROUTINE CALLS

5.0	CONTROL SWITCH ROUTINE

6.0	END OF PROGRAM PASS OPERATIONS

7.0	COMMUNICATIONS ROUTINES

8raACROS񢆊s.0	KL10 BASIC SUBROUTINES

10.0	KL10 EfɝEOSIT & RAM SUBROUTINƊ11.0	SPECIAL PS҃M OPERATORS

12.0	DEVIC)OTINES

13.0	KL10 T(D-11 DTE20 COMMAOԓONS

14.0	KL1"T20 COMMAND CODES

15.0	fEAFORMATS

16.0	PDP-11 FILE FORMATS

1	DP-10 FILE FORMATS

18.ec0 MICRO CODE FIPFRMATS

19.0	PDP-8 fEAFORMATS

20.0	OCTAL FILE FORMATS

21.0	SPƓFLE EXTENSIONS
2]fɇRO-CODE SPECIAL̋ETION

23.0	SUTթ3ACKAGE INSTRUCTIONSCE2i.0	MISCELLANEOUcEMW0SOURCE FILE LISTINGS
	DECSYSTEM10 KL10$ԓC CONSOLE PROGRAM
	V[---------------V[V[-------------


1STRACT

		THE"çYSTEM10 KL10 DIAGNOSTIC CONSOLE PROVIDES THE
	BAS0SBROUTINES REQUIRED FOR THE OPERATION OF sa"P[11
	PROGRAMS AND TH!AIC ROUTINES REQiE'NTERFACE TO THE
	PDXABASED PDP-10 KLX OTINE, CONSOLE AND LO)ЋED I/O
	DRIVER ×AGE.

		THE DIAGNOSTIC sSLE CONSISTS OF A SEP4ԋ PROGRAM
	WHIC+ə!EALINKED TO/FROM THE DIAGNOSTIC PROGRAM SEbΩcE	IA EMT'S AND ASSIGNE(RGRAM LOCATIONS."OTINE PACKAGE
	QiɉES IN PDP-,PMMORY ԧA-O 28K, THE UPPEH Ή 
	INCLUDES THE SUBROUTINE PACKAGE AND "ECCESSARY LOADERS, ETC.
ԑE SUBROUTINE PArǋ CONTAINS THE FOLLOWING B4ASUBRO$΋S:
BD]!ϝSOLE COMMAND
		2.  `ǝOSTIC FUNCTIONS
		3.  PDP-10 SUPPORT
	- APDP-11 OPERATION SUPPORTBD]  KL10 MONITOR  é,CMMAND
		6.  CONSOLE TELETYPE FUNCTIONSBD]  BASIC INITIALIZATION
		8.  PROGRAM CONTROL񢄉s.  ERROR & PROGRAM HALTSBDa. TELETYPE OUTP	11. LINE PRINTER
		12. iӃGE FOS`ԩING &)ITING
		13*EETYPE INPUE	14. ME INPPӧING
		15. CONTROL SjCES
		16. MISCE ΋i		17. REGISTER SAVE 3 ESTORE
		18. EH&E
		19. POWER FAIL
"Y0] PDP-10 OPERATI"Y1] CONTROL RAM
		22. iЃTCH RAM
		23. aԃF	24. RP04
		25. ACT,	26. COMMUNICAT3SBDo. REMOTE TELETYPE
	,.APDP-11 CORE DUME	NW TE20 INITIALIZATIONBDa. BASIC KL10 SUTթINES
		31. MASTER RESETBDe. CONTROL RAM FԓONS
		33.$ӡATCH RAM FUNCTIONS
		34. LITEPfSA!UFERS
	DECSYSTEM10 KL10 DIAGNOSTIC CONS"S҃M
	----------------V[---------------V[F1.1	PDP-11 CONSOLE MEMORY ASSIGNMENTS
񢆊 A  0	----------------V[------
			I
	"dAaԟRS
	"d	    1000	--------------------V[--
			I
			I  BCPT LOWECE		I
	    3000	-V[V[----------------
			I
			I  PDP-11 BASK,		I  DIAGNOSTIC AREA񢄉I     A&
		2P HEN PDP-10 RUNNING
			I  FREE FOR (-c1
		2P Ë SUPPORT
			I
	   70000	--------------V[--------
			IBD  OVES A& INDIRECT
			(FPAEA & REMOT*T
			#E A  16K - 100000	V[---------------V[F		I
			I  DIAGNOSTIh!ϝSOLE
			I     KDCP"BD
	  152000	---------------------------BD񢄉I  BCPT UPPER
			I
	  154000	--------------V[--------
			IBD  BUFFERSBD
	  15720V[---------------V[----
			I
			I  STACK
			I
    28K - 1600[V[--------------------
	DECSYSTEM10 KL10$NOSTIC CONSOLE PROGRAM
	V[---------------V[------------------

1.1	PDP-11 DIAGNOSTIC PS҃)ŏMENTS

		THE DIAGNOSTIC SEGMENTS WILL QPAqfED FRPTE 
	LgGAFILES AND IN THE ORDER SHOWN:

	1. PROGRAM TITLE FILE - CO ɝS PROAIDENTIFICAgAjA	   gDADIAGNOSTIC AND "҃gAPARAMETERS.

	2. SUBROUTINE PARAMETER FILE (R11.P11 - CONTAISTթINE
	    CALL 4ɏbΩS, SUTթINE LINKAG ӧIGNMENTS, s͟E	ASǋbDESS AtǝMENTS AND $E COMMON PARAMETERS.CE	gMIN PROGRAM̋PCNTAINS DIAө0CDING.

	4.  SUBROUgEASTORAPFLE - STOR1+1c - CO ɝS THE PROGPf	    jE3CATS, VARIABPSǋ LOCATIONS AND PROGR3F    ASSEMBLY CO&E3 5 
2.0	CONTROL SWITCHES
.c4)ORAM CONTROL SWITCHES񢆊	THE SWITCHES OF THE PDP-11 CONSOLE ARE USED FOR
	REAL-TIME CONTROL OF PROGRAM OPERATIONS.

	THESE SWITCHES ARE:

	SW15 - ABORT	;ABORT AT COMPLETION OF PROGRAM PASS
	SW14 - RSTART	;RESTART TEST, PRINT TOTALS
	SW13 - TOTALS	;PRINT TOTALS, CONTINUE
	SW12 - NOPNT	;INHIBIT TYPEOUT
	SW11 - PNTLPT	;PRINT ON PDP-10 LINE PRINTER
	SW10 - DING	;RING TTY BELL ON ERROR
	SW9  - LOOPER	;LOOP ON ERROR
	SW8  - ERSTOP	;HALT ON ERROR
	S [ ̋TĻRINT 3& Tҧ
	SW6  - RELIAB	;RELIABILITY RUN MODE
	SW5  - TXTINH	;INHIBIT ERROR TEXT
	SW4  - INHPAG	;INHIBIT PAGING (PDP-10)
	SW3  - MODDVC	;MODIFY DEVICE CODE (PDP-10)
	SW2  - INHCSH	;INHIBIT CACHE (PDP-10)
	SW1  - OPRSEL	;OPERATOR SELECTION
	SW0  - CHAIN	;SPECIAL CHAIN MODE CONTROL SWITCH

	THESE SWITCHES HAVE THE SAME MEANING FOR BOTH PDP-11 BASED AND 
	PDP-10 BASED PROGRAMS.
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

2.0	CONTROL SWITCHES (CON'T)

   A.	PDP-10 LOWER ORDER 20 SWITCHES

		THE LOWER ORDER 18 SWITCHES ARE SUPPLIED FROM THE SCRIPT
	IF RUNNING IN DIAGNOSTIC MONITOR MODE.  IF RUNNING STANDALONE
	THESE LOW ORDER 20 SWITCHES ARE SUPPLIED BY TYPEIN.

   B.	LOW ORDER SjCiE

"jH LOW ORDER PDP-10 20 SWITCHES ARE USED FiAETERIZING A PROGRAM   COMPLETE PROGR3PRN.
	THEIR USAGE IS AT TH"ICRETION OF THE PROGR3fť.

2.2	DIAGNOu$AIOR CONTROL SWITr"
	SWITCH 0 OF THE PDP-1(!ϝSOLE IS RESERVED TO CONTROL
	THE DIAGNOu$AMONITOR WHEN RUNNING IN D0cΟSTIC
	MONITOR r ɝ SCRIPT OPERATION MOW	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM񢄭[V[---------------V[V[-----------

񢙮a1$NOSTIC CONSOLE "҃gΧ

	THE FOLLOWING T4"AIN COMMANDS PRObEA`ǝOSTIC CONSOLE
	OPERATIONS TO PERFORM TH"IөIC FUNCTIONS, EXAMINEOSIT,
	START, u'YjC]  THE COMMANDS END W5$  CARRIAGE RETURˆTO CONTINUOUSLY REPEAT A REPEATABLE FUNCTION TYPE 3RAAS THE
	FIRST ITEM IN THE COMMAND STRIN iILL CONTINUOUSLY
	R" THE FUNCTION AWBPASS THE PRINTOUT OF$E	INFORMATION Rb $AWAS A READ TYPE FUNCg]
	A COMMAND STRgGAMAY CONSIST OF SEVERAL CO`ΉS EACH OF
	WHICH TESd΃TE WITH A COMMAlCFR THE LAST ONE
	WHICH TERMINATES WITH A.CEA.	DIAGNOSTIC FUNCTIQREPEATABLE)

,W AFNCT		;DIAGNOSTIh#UCTION EXEC"	2.  F:ATA	;DIAGNOSTIC·gAWRITE
	3.  FR FUNCT		;DIAGNOSTIC FUNCTIRAD
				;TYPES OUT THE DAPRAD
	4.  FR FUNuUNCTX	;DIAGNOSTIC FUNCTIO)ED OF gC1
		"]ԑUPFNCTX.
	5.  FS			;DI1OTIC FUNCTION SYNC
	6.  DA DATA		;DIAGNOu$ADEPOSIT INTO AR

B.	PDPXUNCTIONS

	1.)A1)	;START 11 AT ADR
	    SED			;START 11 D0cΟSTIC (ADDRESS = 3000)
	2.  EE ADR		;EXAMINE ,PA ADR AND PRINT
	3.  DE ADTA		;DEPOSIT DAPI 11 ADDRESS
	4.  EB ADR	.؃MINE ,PBTE ATbRAAND PRINTBZA DB ADR:DADwDEPOS51c BYTEj c( ĉRESS
	6.  ZE ADR,ADBDERO 11 MEMORY FS栃T ADR

C.  	PDP-10  ͓NE/DEPOSIT FUNCgΧ
)EEATABLE)

	1.  EM 1)	;EXAMINE PDP-10j AD PRINT
	2.  DM ADRQ ԃ		;DEPOSIT DATAg a ADDRESS
	3.  EN			qlAINE AND PRINT N* a ADDRESS
	4.  DN DADwDEPOSIT DATA INNPP-10 ADDRESS
	5.  MH ĥ,COUNT	;MEMORY QiOAPDP-10
	DECSYSTEM10 KL1"IGNOSTIC CONSOLE)ORAM
	----V[------------------------------VCE3]0	DIAGNOSTIC CONSOLE OPERATIONS (CON'T)CED]4AT/STOP FUNCTIONS

,W ASP			;STOP 10, s"AFLOP
	2.  RN			;START 10, SET RUN FLOPBYA	;SINGLE INSTRUCT, P ONTINUE BUTTONBP A䠝UM		;NM SINGLE INSTRUCTS
	4.  SIP		.ɝGLE INSTRUCT & TRACE PRIN5.  PL			;PULSEOcE	m.  PL NUM		;DO NUM CLOCKS
	7.  BU			;DOEAUiS CLOCK
	8.  BU NUM	.OANUM Bԧ
	9.)A   		;START MICRO-CODE, SUPPORT
		"]űAMINE"Пrj	10. ST ADR		;START 10 AT ADDRESS
	    u;START 10 AT PRϫSLY S(LED ADDRESS
	  )ԉ"DTART 10 DI1OTIC, hTAADR = 440)
	  )ԙ			;START 10 LO1"Y
"Щ ADR = 442)
	    DDDwSTART 10 DDT, (* DR = 	    STM			;START 10 MONITOR, (EPT ADR 4g#E	c1. MC			;PDP-10 MONITOR MODE CONTINUE
	12. S"AA		;SET 10'S SW5!AREGISTER
,YASW			;PRIN(RSENT 10'S SWITC)EISTER
	14. AC BLK		;REPORT & SELECT CURRENT 0B	15. AC BLK NUM		;SELECT CURRENT AC BLOCh*OABE USED
				;BY PDP-10 F&OING "STD,STM,ST"D"
				;START COMMANDS & SELECTS CURRENT AC
"DwS'× FOR EM/DM AC REF COMMANDS.
	16. EP COUwqj EEOP" 3EVAL CgTCEE]	RAM FUNCTIONS (REPEATABLE)

	1.  EC ADR		;EXAMINE C-RAM A ĉRESS 3 RINT
	2. !DTA		;hOIT DATA INTO C-Pf)ES
	3.  RC ADR		;READ C-RAM BY DIAGNOSTIC FUNu$ϝS
	4.  ED ADR	.؃gEAD-RAM AT ADDRESh Ή)IT
	5D ADR:DATA	.EOSIT DATA 3OAiAbD- AMM ADBDYNC MARK M0O[CODE, SET BIT 43
	7MbR	;SYNC UNM40O[CODE, CLEAH!I	8.  MT ADR:DATA		;CgG MICRaωE TIME FIE ATA=0ƊF.	PDP-10gSUCTIO"؋ujEAЋATABLE)
BXAl NST		;EXECUTE 36 BITgSRUCTION
	2.  EIuw"ëTE & PRINT INSTRUCTION
	k IST		;EXECUTE & SETUPA"TRACE" INST

G.	MASTER RESET (REPEATABLE)

	1.  MR			;MASTER RESET
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

3.0	DIAGNOSTIC CONSOLE OPERATIONS (CON'T)

H.	CLOCK OPERATIONS

	1.  CS			;REPORT CLOCK SOURCE CODE

	2.  CS NUM		;SELECT CLOCK SOURCE USING NUM CODE
				;	0=NORMAL CLOCK
				;	1=SPEED MARGIN CLOCK
				;	2=EXTERNAL CLOCK

	3.  CR			;REPORT CLOCK RATE CODECE	iC	;SEL ARATE USING NUM CODE
				;	0=NORMAL
				;	1=DIVIDE BY 2
				;	2=DIVIDE BY 4
				;	3=DIVIDE BY 8


I.	INTERNAL EBOX REGISTER READ FUNCTIONS

	1.  AR			;READ & PRINT AR REGISTER
	2.  BR			;READ & PRINT BR REGISTER
	3.  MQ			;READ & PRINT MQ REGISTER
	4.  FM			;READ & PRINT FM REGISTER
	5.  AD			;READ & PRINT ADDER
	6.  ARX			;READ & PRINT EXTENDED AR REGISTER
	7.  BRX			;READ & PRINT EXTENDED BR REGISTER
	8.  ADX			;READ & PRINT EXTENDED ADDER
	9.  PC			;READ & PRINT PC
	10. VMA			;READ & PRINT VMA
	11. VMH			;READ & PRINT VMA HELD
	12. SC			;READ & PRINT SC REGISTER
	13. FE			;READ & PRINT FE REGISTER
	14. ADB			;READ & PRINT ADDRESS BREAK
	15. ERG			;READ & PRINT E-BUS REGISTER
	16. PI			;READ & PRINT PI SYSTEM
,[A3&		;PRIAL, C-RAM & REGISTERS
	DECSYSTEM10 KL10$ԓC CONSOLE PROGRAM
	V[---------------V[------------------

3.01$NOSTIC CONSOLE OPERAgΧ (CON'T)

I.	ËtAPARITY FUNCTIONcE	1.  PE			;REPORT PROCESSPRITY ENABLE CODE

	2.  PE NUM		;SELECT)OESSOR PARITY OPTION USING񢄉	;NUM CODE.
		"]ϡTIONS ARE SELECTED B(*ӓNG A FIVE
				;BIT OCTAL NUMBER WITH THE BIN45)				;ASSIGNED TPF'דNG OPTIONS
			.ĲaPA/ARX PAGE FAILBDbXA= FM PARITY
				;	 RAM PARITY
			.ĠePDAM PARITY
				;	 1 = FS PROBE
				;THE"ƃ* ETTING IS 36 WHICH In			;	AR/ARX PAR5,"Dw	FM PARITY
				;	CR3PPRITY
				;	DRA(AITY

			;THE MASTER RESET OPERATION CLEARS THE P4Գ
			;CHECKING OPTIONS AND THE PDP-10 ST4 H)U
			;COMMANDS ENABL*H PARITY CHECK O$ϝh$A
			;THEY HAVE BEEN̋CTED.

	3.  PDwiLE PROCESSOR PARITY sDTIONS
				;SETh*H PARITY OPTIONS TO CODE 0	DECSYSTEM10 KL10 DI1OTIC CONSOLE PROBV[----------------------------------------񢆊gēAGNOSTIC CONSOLE OPEPjINS (CON'T)

KaPOERATIONS

	1.!		;REPORT paȋ ENABPCF	2.  CE NUM		;qfE!HE OPTION USING NUM CODE.
				;OPTION Ih)řECTED BY USING A FOUR
		"]T OCTAL NUMBER jHATHE BINARY BITS
				;ASS1E THE LWING *I				;	10 = ENABLE CAr"a
				;	 4 = ENABLE CACHE 1
				;	 2 = E CACHE 2
				;	 1 = ENAS"ACHE 3
				;TH"E5fTASETTING IS 17 WHICH ENABLES
				;ALL FOCCHES.
				;THIS ENABLE CODE IS PASSED TO THE񢄉	;PDP-10 AS PART OF THE CADEFAULT
				;P4͋TER WORD.  THE TEN THEN UqiHE
	"DODE T)řECT AND EN0EATHE PROPER񢄉	;CACi
	3C"DACHE INVALIDATE
			.؋CUTES THE CACHEgVbAE
				;INSTRUCTIONCE	i.  CF			;CACHE *ӑ񢄉	;EXECUTES THE CACHEUH INSTRUCTION
bEviԋM10 KL10 DIAGNOSTIC sSLE PROGRAM
	--V[V[--------------------V[------

3.0	D0cΟu$ACONSOLE OPERATIONS (s')

L.	CONSOLE
*T(!ϝTROL FUNCTIONS

	1T NUM		;SET TTY cALENGTH
	2.  TW NUM		;SET*YAPAGE WIDTH
	3.*FANUM		;SET ,ILL CLASS

	4.  TT			;SWITCH'gԋ TTY OPERATION

	5.  KLINIK		;REMOTE Fh*TgALE/DISABLE

	6.  LDwLINE PRINTER SEaԓM.	PROGRAM LOADING CONTROL FUNCTIONS
BXA* UM		;SELECT DECTAPE EY
				;NUM IS DA*ΓT
	2R NUM		;SELECT RP04 MODE,
				sAIS RP04 UNIT
	3.  RX NUM"]ӋLECT RX01 FLOPP(&ω			;NUM IS FLOPPY UNIT
	4.  AT			;SWITC*OA01a LOAD MODE

N.	PDPXREAKPgTAOPERAgΧ

	1.  BP ADR		;SET A BREAKPOINT 5ADRESS񢄲])G		;PRINT REGISTERS SAVED AT BREAKPOINT,BD;ERROR HALT, PR$AT OR jA HALT.
	3.  BC"DIUE FROM BReПINT
񢧮CONSOLE REINITI3$ڃTION

	1.  RI"DgIIALIZE CONSOLE

P.1iRR HALT CONTINUE񢆊1.  HbDwCONTINUE FROM ERROR OR PROGRAM HALT

QiEj PERATORS

	1.  R			;IF THIS IS THE FIRST CO`Ή IN A
				;COMgDALINE, REPE5TE COMMAND u)IG
				;CONTINUi̳.  CONTROL C (^C) RETURNS
				;TO CONSOLE CO`Ήgċ.

	2.  RP			;AS "R" COMMAND EXCEPT PR3SATHE DATA
				;READ FOR Rb YPE COMMANDS.
񢄳]  TD COUNT		;PERFORM SPECIFIED TIME DELAY
	aӳu"c0 KL10 DIAGNOSTIC CONSOLE PROGRAM
	----V[V[-----V[-----V[V[----

3.0	DIAGNOSTIC CONSOLE OPERATIONS (CON'T)

R.	KL10gΓTOR CfDS

	1. pϩ SYSTF2.  LI			;LOGIN񢄳]$		;HELP, ACT10 PRINT "HELP.ACT"
	4.  H FILE.EwHELP, PRINT REQiԋ#IE
	5.  P FILE.*	s' REQUE PROGRAM
"DwEXTENSIONSiEu񢄉. ]Pf{1a C-RA -RAM
				h.IN = PDP-11 BINARY
"DwAc1 = PDP-11iÓ6ABINARY
		"]AXA= PDP-10 ASCIIZED SAPFLE
	"DA .SAV = PDXASAVE fEY ACT10 ONL#E			;  cAEgSON IS ".A1ː T FILE.EXT		;LOAD PDXA".A10" FILE
	7L̋lT	;LOAD PDP-11 ".A11" FILE񢄸]&RAFILE.EXT		;LOAD C & )A ".RAM" FILE
	9.  LB FILE.EXT		;LOAD PDP-11 ".BIN" FILE
	10. V FILE.EXT		;VERIFY REQUESTED PROGRAM, AS "P" EXCEPT
				;CURRENT FILE IS VERIFIED AGAINST
				;FILE BEING READ.
	11. S FILE.EXT		;RUN REQUESTED SCRIPT
	12. M FILE.EXT		;RUN REQUESTED MASTER SCRIPT
	13. C MESSAGE		;COMMENT/CORRECTIVE ACTION
	14. GO			;GO START PROGRAM JUST LOADED
	15. LO			;LOGOUT
	16. GS FILE.EXT		;GENERATE GIVEN SCRIPT
	17. CD FILE.EXT SRTADRgD"DDP-11ҋ*͡ TO ACT10
				;  DECTAPE OR RP04
				;  DEFAULT EXTENSION IS ".A11"
	18. T			;REQUEST TIME
	19. BT			;BOOT TEN, ACT10 "BOOT10.ACT"
	20. ;			;LOCAL COMMENT
	21. I FILE.EXT		;INDIRECT COMMAND FILE PROCESS
				;  DEFAULT EXTENSION IS ".CCL"
	22. J FILE.EXT		;DOUBLE INDIRECT COMMAND FILE PROCESS
				;  DEFAULT EXTENSION IS ".CMD"
	23. JC			;CONTINUE INTERRUPTED J FILE PROCESS
	24. TA FILE.EXT		;TRANSFER FILE FROM ACT10 TO RP04
	25. WF FILE.EXT		;WRITE FILE FROM DECTAPE/FLOPPY TO RP04
	26. RENM:FILE.EXT FILE1.EXT
				;RENAME RP04 FILE FROM FILE.EXT
				;  TO FILE1.EXT
	27. DTCOPY		;COPY & VERIFY DECTAPES
	28. RXCOPY		;COPY & VERIFY FLOPPY DISKETTES
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	---------------------------V[V[-----E3.0	DIAGNOSTIC CONSOLE OPERATIONS (CON'T#E5$EAPDP-10 IS LOGICALLY uhPRTED BY THE CONsEAIN THREE
	OPERATIONAL MOiA THESE THREE MODES AQ]
	1.	DIAGNOSTIh!ϝsE
		ALL OPERATCMMANDS ARE VALID.

	2.	(-c0 RUNNING DIAGNOSTIC SUPPORT

		THE FO'דNG OPERATOR COMMANDS REQU4HAT THE PDP-10BD STOPPED BEFORE EXEC$ϝ:

		A. DIAGNOSTIC FUNCTIONS
		B. INTERNALV)EISTER READS
		kP⠩HE CLOCK
		D. s'×ԋ/SOURCE CHANGES񢄉&ɇRO TIME/MARK/UNMARK gCIONS
		F. C-RA Ή҃M EXAMINES AND DEPOSITS
		G. CACHE INVAbA Ή FLUSH
		H. PDP-10 fϥY ZEROING
		I.aASELECTION

		THE Pa PROGRAM COUNTEHP) IS THE ONLY INTERNAL
		REGISTER THAT MAY BE EXAgE WHILE THE PDP-10 IS
		RUNNING AND THISE5$ϝ IS PERFORMED BY THEΧOLE
		BY STOPP3PPP-10, STOPPING THE KX LOCK,
		PERFORgGA"IAGNOSTIC FUNCTION RbSAREQUIRED TO
		Q`ATHE PROGRAM COUNTER AND Tg ESTARTING THE PDP-10E		********** CA$ϝ
*U******

		THE PC EXAMINE OPERATION MAYէ"EICE OVERRUNS
		TO H4(E.

	3.	PDP-10$͋r ғNG SUPPORT

	5E THE CONSOPI SUPPI*IESHARING THE CŐ񢄉TY BELONGS TO THE PDP-10 TIMESHARING SYSfND ALL
		TTY INPUT GOES TE PDP-10 AND AL*T OUTPUT
		ORIGINATES IN "DP-10EDECSYu"c%c0 DIAGNOSTIC CONSOLE)ORAM
	----------------------------------V[----

3.0	DIAGNOSTIC CŐ OPERATIONS (CO)CE	HE DIAGNOSTIC CONSOLE IS A TWO PART PROGPfITH THE MAJOR
	PORTION RESIDENT IN THE UPPERYKAOF THE PDP-11.  THE UPPERПRTION SUPPORTS 3& IAGNOSTIC OPERATIONS AND "OWERBhOTION ֓DES UTILIT()աPORT.

	qiTIN OF$EACONSOPC`ΉS REQUIRE THAT THE UfIY PORTION
	OF "ϙE BE RESIDENT.  SINC*H UTILITY PORTIO)E1"	IN THE LOWER PART TE PDP-11 STARTIAbDESS 3000, ONCE
	LOAb T WILL REMAIN RċUTIL OVERWRITTEN BY O"	LOWER CORE DI1OaROGRAMS.

	THE CONsEAWILL PERFORM A fI5,HECK OF THE UTILITY TON
	AND WILL RjŧT THAT THE OPERATOR LOAD RDPU.A11" IF IT IcE	OT RESIDEN+ȋN ANY UTILITY COMMAND IS PERFOSb]񢆊THE FOLLOWING COMMANDS ARE UTILITY COMMA)AE PERFORMED
	VIA THDAGNOSTIC CONSOL*ԓjYE:

	1.	DTCOPY

		DECTAPE COPY

	2.4CF		RX01/RX11 FLOPPY iˋTTE COPY

	3.5񢄉RITE fEAFROM DECTAPE/FLOPPY TO RP04
BZ.TA

		TRANSFER FILE FRO Щ10 TO RP04

	ēI RP04 SELECTED"

		RP04 DISK DIRECTORY񢆊˄ԩ

		REMOTE TELETYP'ЋRATIOEDECSYu"c0 KL10 DIAGNOSTIC CONSOLE PROGRAM
+V[-----V[V[------------------------


3.1	GENERA$΍ORMATION

		TPDAGNOSaONSOLE PROGRAM "AċD AND STARb	WILL"ҍORM ALL INTERNA$ΓTIALIZATION REQiEHE 
	SOFTWARE AND Pc HARDWARE INCLUgGASETTITE STACK,
	CLEARING COMMON STORAGE AREAS)ũgGAUP THE INTERRUPT AND
	TRAP VECTORS.  THIS ACgAIS NOT VISIBLE TE OPERATORgD	WHEN THEgTRNAL INITIALIZAgAIS COMPLETED THE SOFTWARE
	WILL TYPE:

	DEtөXADIAGNOSTIC CONSOLE
	VERSION ##.##

	CfD:
	.

	AT THIS POINT "OFTWARE IS READ( ׃ITING COMMANDS FROM
	THE OPERATOR.

	PDP-1(ARj UMBERS, PDP-10 36 BIT NUMBERS,
	DIAGNOSaԓONS M6PB TYPE$A3TE FOLLOWING FORMATS:

	16 BIT NUMBERS:

		123456			;EQV,Y3i56
	,D;EQV, 0000F*؉	;EQV0a001
		-1			;EQ1o۷
	36 BIT NUMBERS:

		123456123456		;EQV, ,k6123456
		12341em	;EQV, 12345612mBD		;EQ0a0000000001񢄉c 1			;EQV,0aX0a"UAD;EQV,0a01777777
"VA1			;EQV, 7777770000F+XW1			;EQV, ۷o0a01

	DIAө0FNCTIONS ARE 16 BIT NaES.
B`AEXAMPLE MU$ЙE COMgDASTRING WIT*H REPE5OԟCE	OULD BE AS̙
	R FX 14,MR,FR 10+#WA140:123456 1234M	٧TEM10 KL10 DIAGNOSTIC CONsEAǥAM
	---------------V[-----------------------


3.1	GENERAL INFORMATION (CON'T)


	PDP-11 OPERATIONS
	-----------------

	START 11 AT ADDRESS ######

	EX:	SE 3000

	THIS COMMAND WILL CAUSE THE PDP-11 TO BEGIN EXECUTING CODE
	AT PDP-11 CORE MEMORY ADDRESS 3000.  CHECKING IS PERFORMED
	TO INSURE THAT AN ODD ADDRESS START IS NOT ATTEMPTED
	AND THAT ADDRESS 0 IS NOT USED.  THE BASE ADDRESS OF THE STACK
	IS PASSED IN R0.

	EXAMINE 11 AT ADӧѣGhƊ	EX:1bc
	THIS COMMAND WILL EXAMINE AND PRINT THE CONTENTS OF THE SELECTED
	PDP-11 LOCATION.  EXAMINES ARE WORD BASED AND AN EXAMINE ATTEMPT
	OF AN ODD LOCATION WILL PRINT OUT AN ERROR.

	EXAMINE MULTIPLE 11 ADDRESSES

	EX:	EE 1000,1050

	THIS COMMAND EXAMINES AND PRINTS A BLOCK OF PDP-11 LOCATIONS.

	EXAMINE NEXT 11 ADDRESS

	EX:	EE:			;COLON OR SLASH

	THIS COMMAND EXAMINES AND PRINTS THE NEXT 11 LOCATION

	EXAMINE PREVIOUS 11 ADDRESS

	EX:	EE^			;^ IS UPARROW

	THIS COMMAND EXAMINES AND PRINTS THE PREVIOUS 11 LOCATION

	EXAMINE PRESENT 11 ADDRESS

	EX:	EE

	THIS COMMAND EXAMINES THE PREVIOUSLY SELECTED 11 ADDRESS,
	SELECTED EITHER BY A PREVIOUS EXAMINE OR BY A PREVIOUS
	DEPOSIT.
	DECSYSTEM10 KL10 DIAGNOSTIC CŐ)ORAM
+V[---------------------------------------CE3]"cŝERAL INFORMATION (CO)

	DEPOSIT I'c1 MEMORY AT ADDRESS #####cE	EX:	DE 1000:240

5$I COMMAND WILL D'ӓ*H DATA SUPPLIED 3OATHE
	ADDRESS GIVEN.

	hOIT INTO PREVIOUSLY SELECTED 11 ADDRESS
ű:	DE:240

	THIS COMMAND̙ DEPOSIT THE DAPSPPLIED INTO A PREVIOY	SELECTED 11 ADDRESS.

	EX:	EE 1000		;EXAM3c		001000/123456.R"ACONTENTS
		DE:M	q"ПSIT 240 INTO 101b;REEXAMINE 1000
		0X0a/000240	;PRINTE!ϝgT

	PDP-11 BYTE EXAMINES
	------------V[V
	EX:	EB 1000		;EXAgEA11 BYTE
	EX:	ENw ͓NE NEXT 11 BYTE
	EXBb½		;EXAMINE PREV3A11 BYTE
	EX:	EB 1000,1011	;EXAMINE BLOCK OF 11 BYi	EX:	EB		;EXAMINE PREVIOUSLY SELECTED BYFBhD-11 BYTE DEPOSITS
	V[---------------񢆊	B 1000:10	;DEPOSIT B5"NTO 11 ADDRESSBbu1!:c0		;DEPOSIT BYTE INT(RVIOUSLY
				;S"éED ADDRESS
	DECSYSTEM101a DIAGNOSTIC CONSOLE ǥAM
	----------V[V[-----------------------

3.1	GENERAL Iѧқ5$ϝ (CON'T)

	KL10 RA"؃MINES AND DEPOS5)+V[---------------V[------

1lAINE DCE	X:	ED 776
		ADNAAH( 		;HEADER PRINTOUT
		776/ 1 3 1 1234		;AADDRESS PRINTOUT
		777/ c 1234		;ODD ADDQiAPRINTOUT

	EXAMINE CURR -RAM 1"RSS PA4Bbu	ED	OR	ED:

	DEPOS5DTA INTO D-RAM PAIR

	EX:	DD 776:7 6 1 ,;DATA FOR EVEN ADDRESS
	1" o77:			;PROMPT FO ĉRESS DATA

	DECSYSTEM10 KL10 DIAGNOST0CNSOLE PROGRAM
	-----------------------------V[---------

3.1	GENERAL 3OMATION (CON'T)CE	XAMINE CONTROL RAM

	EXBbA1234CE	HIS CfD EXAMINESgDAPRINT THE kiA DATAj DDREScE1lAPLE:

	EC 1234
	1L/c23456 123456 12mA,k6 123456 12
	 ADR/ HTAAR  AD BR MQ FM᠍E SH  # VMA MEM CONDE M
	1234/1356 2AA0 1  6  000  0  0  01A 0  00   70   1HԑE DATA PRINTED IS C-PfATA BITS 00-79 35A-BT
	WORD FORMAT AND "PEC FIELD FOLLOb (*H FIELDS
	PRINTED BY$ER LOGICAL BREAK]

	EXAMINE THE PRESENT kiA REGISTER CONTE)
	EX:	ECCE	XAMINE CURRENTLY SELECTED C-RA ĉQi
	EX:	EC:

	DEPOSIT DATA INTO C-RAM 5Aӧ

	EX:	DC 1234:123[ c23456 123456 12mA,k6 12

	THIS COMMAND WILL DEPOSIT THE D5 5AINTO THE C-RAM ADDREtƊSELECTED.  THE jAA4SPPLIE A5 16 BIT WORDS GIVING C-RAM
	jAABITS 00 THRU 79 PLUS THE !I SPEC FIELD.
1"ç4E10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	---V[V[--------------------V[-----񢆊C-RAMlAINE AND PRINTOUT
	----------------V[-----񢆊aDR
	ADR/00--15 16--31 32--47 48--63 64-ܠa--4
	 ADR/  J A  AD TM FM SCAD SC FE r GAMEM COND Sa
	37׳o77 3 77 3777 3 P o  377  1  1  3 ۠Ah1o   77   37 1

	ADRg777	;C-RAM ADDR
	J =A3777	;J FIELD J00-J10

	T    = 3	;TIME0[
	AR   = 77	;ARXM SEL 4-2-1 & ARM SEL 4-2-1CE	D   = 3777	;ADBA2-1 & ADA iW ADA SEL 2F		; & AD CRY + 1BOLE + AD S0-3

	BR   = 3	;BRX LOAD + BR LOAE3hA = 1	;MQ SEL

	FM   = 7	;FM ADR SEL 4-KX
	SCAD = 377	;SCADB SEL KXM SCADA DIS + SC1 EL 2-1
			; & SCAD 4-2-1

	SC   = 1	;SCM S2CE	E   = 1	;FE LOAD

	SH   = 3	;SH/ARMM S2[#E	#   P7o7	;#0Qq񢆊VMA  = 3	;VMA SEL 2-1

	MEM  = 17	;MEM 00-03

	COND = 77.ϝD 00-F	SPEC = 3]ӡēSP 00
	M    = 1	;FI" IE MARK BIT
	DECSYSTEM10 KL10 DIAGNOSTIC CONsEAPROGRAM
	-----V[V[---------------V[V[---
[RAM OCTAL ΩOUT FORMAT񢄭[V[V[V[V[-----񢆊ADR/00--15[-[31 32--47 48--63 64-ܠaZ
	C-RAM Ou ADABIT BREAKD+V[--------------------V[-

(0a    01     A 03  4A   05    0 A07
	V[V[V[----------V[V[--------------
	*SC1 A-----SCAD------
  [e IELD----- *
	* DIS *  4 
 e A1  * LOAD*  0  *  1 
 e  *
	*************************************************

	  08    09    10    11    12    13    14    15
	-------------------------------------------------
	* ------------------J FIELD-------------------- *
	*  3  *  4  *  5  *  6  *  7  *  8  *  9  * 10  *
WD 1	*************************************************

	  16    17    18    19    20    21    22    23
	-------------------------------------------------
	*  MQ * ---aϝV[P*A-----`Aqf-[------ *
	* SEL *  0  *  1  *  2  *  8  *  4  *  2  *  1  *
	*************************************************

	  24    25    26    27    28    29    30    31
	-------------------------------------------------
	*  AD * ADA * -ADA SEL- * ADB * ----CRAM #----- *
	*BOOLE* DIS *  2  *  1  * SEL2*  0  *  1  *  2  *
WD 2	*************************************************
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

	C-RAM OCTAL PRINTOUT FORMAT (CON'T)
	---------------------------

	ADR/00--15 16--31 32--47 48--63 64--79 0--4

	C-RAM OCTAL WORD BIT BREAKDOWN
	------------------------------

	  32    33    34    35    36    37    38    39
	-------------------------------------V[V[--
	H ą * ----CRAM #----- * ARXM* ----CRAM #---P*BU EL1*  3  *  4  *  5 
SL4*  6  *  7  * A*
	*********************J*U********************J
	  40    41  2A4g    44    45    A  47
	------------------V[--------------------------
	*-SCADA SELÃDB* MARK* VMA * ARM * -SHiM- *
	*  2  *  (*ASEL2*     * SEL2* SE EL2* SEL1*
WD 3	****************************J*UJ*U***********

(4q i9    50    51  A5g    54    55
	V[V[--------------------V[--------------BU [V[---MEM--------- *  BR * COND* BRX * CONDCE	U A*  1  *  2  *  3  * U  3  * LOAD*  4**U********************J*U***************J*U

	  56    57    58    59    60          62
	--V[----------------------------------------FH[-FM ADR----- * COND*pą*     * SCM *  *BU A4  *  2  *  1  *  5 
SL1*     * SEL2* ACEW 4	*****************J*U***************J*U*******

	  64          A        68          ---------------V[V[------------------------
	* ARM *     *iMAH A * ARXM*     * ARXM* A*
	* SEL2*    
SU A   * SEL2*     H)ř1*     *
**U*****J*UJ*U***************J*UJ*U*****

 	  72          74          76  A    78
	----------------V[---------------V[--------
	* VMA *     * 1 U     H*0a *    P*A    *
	* SEL1*     H!ҳ *     *     *     *     *     *
WD 5	*J*U*************************J*U*************
񢄉 A0     1     2     3     4
	             A -------------------------------
	           A   * -----------DISP/SPECV[-- *
	         A     *  0  *  1  *  2  *  U  4  CEW 6	   A          
*U**********J*U*****J*U**
1"ç4E10 KL10 DIAGNOSTIC CϙE PROGRAM
	---V[V[--------------------V[-----

3.2	ADjIf XPLANATIONS ON OPERAgΧ
	------------V[V[---------------

	sF--

	STARTS M0O[sEAPROCESSOR AND CONDIT3SATHE -10
	TO SU'ҩlAINE/DEPOSIT.

	PERM:	"STOP 10"
		(i ESET"

	EXECUTES TPFLLOWING 10 INSTUaԓONS:

		1. IO SYSTEM CLi		2. PI SYSTEM s"


	ST 1)	------

	START -10 RUNNING 3A`APDP-10 PROGRAM AT THE ADDRESS
	SUPPLIEDAufŧ THAT THE MICRO-CODEiOADED AND
	RUNgGA3 HAT THE MACRO PROCESSOR IS RUNNING
	IN "0O[CODE HALT LOOP.  THEaԫAL PROGRAM IS
4Ab Y INSIG THE ADDRESS SUPPLIED INTO ABQJST" INSTRUCTION MAKING ITP"RST ADR".  THATɝu)UTION IS THEN EXECUTED, THE RUN FLOP SET 35$EACONTINUE BUTTON SET.񢆊STD SPDT
	-P-[- ---

	PERFORMS FULL SYSTEM RESE'AAPR, V 1TEN DOES AS
	"ST ADR" USING DEFINED STARgGAADDRESSES.
	D٧TEM101a DIAGNOSTIC CONsEAǥAM
	-----V[-----V[---------------V[---

3.2	ADDIg΃"ءLANATIONS ON OPERATI	--------------V[-----V[--------

	EX INST
	-------

	PERFOSi"؋CUTE OF THE SUPPLIED 36 BIT PDP-10
	INSTRUCT3.A ASSUMES THAT TPRN FLOP IS s"
	AND THA*H MICRO-CODE PROqiӟR IS RUNNING AND
	WAITING FOR THE RUN FLOP T#A]

	PERFORMS:

		1. STOP THE CLOCK
	, ETUP TO LOAD "AR"/"IR"
	, RITE E-BUS & SIEASTEP CLOCK
		4. RELINQUISH BUS CONTROL
		5.A*H CLOCK
		6. PRESS CONTINUE BUTTON

	EIu-----V
	PEQқh AEXECUTE AND PRINT OF THE SUPPLIED INSTRUCTION.
	SAME OPERAT3 S "EXH!U SINGLE ST)PCOCK APINTS
	THE C-RA ΉfLAREGISTERS FOR EACH CLOCK STEP.  PERFORMS
	CLATO GET THE MICRaω)ԃRTED AND THEN C˧gDAPRINTcE	NTIL THE M0O[CODE RETURT$EAR ̩'ϡK	EXTgS
	-------E	PERFORMS AN EXECUTEԫ#O THE "TRACPA BY LOADIN*HɝSTRUCTION INTO THE AH Ή SETT3ONTINUE WITE CLOrƊSTOPPED.
ӓ
	--񢆊rgG$ΧTRUCT THE X 0OAPROCESSOR BY PRESSINE	HE "CONTINUE" B*OAufŧ THAT THE MICRO-CODE
	PRӧI RUNNING AND WAITINGATHE RUN FLOP TO
	GO TRUE.

	SI NUM
	-- ---

	PERFORM NUM SINGLE INSTRUCT OPERATIONS

	SIP
	---

	PERFORMS A SINGLE INSTRUCT AND PRINT.
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

3.3	DIAGNOSTIC CONSOLE TELETYPE OPERATIONS

A.	TELETYPE FUNCTION CONTROL COMMANDS

	1.  TP NUM		;SET TTY PAGE SIZE
	2.  TW NUM		;SET TTY PAGE WIDTH
	3.  TF NUM		;SET TTY FILL CONTROL

	NE	[V[

	$As̓ND SETS THE TTY FOR THE NUMBER OF LINES ON A PAGE.
	IF THE NUMBER SET FOR LINES ON A PAGE IS NON-ZERO, THE
	DIAGNOSTIC TERMINAL HANDLER WILL SUSPEND OUTPUT
	(WITH THE PRINT HEAD AT THE END OF THE LAST LINE OUTPUT)
	AFTER EXACTLY N LINES OF CONSECUTIVE OUTPUT WITH NO
	INTERVENING INPUT.  WHEN A PROGRAM ASKS FOR INPUT THE
	TERMINAL HANDLER RESETS THE DOWN COUNTER TO N.
	THE OPERATOR MAY CONTINUE OUTPUT BY TYPING (XON).

	TP 0
	----

	THIS COMMAND TURNS OFF THE AUTOMATIC PAGE FEATURE AND IS THE
	DEFAULT INITIAL SETTING.

	TW NUM
	------

	THIS COMMAND SETS THE TTY PAGE WIDTH.  DEFAULT INITIAL SETTING
	IS 80. MININUM ALLOWED SETTING IS 10 AND MAXIMUM IS 132.
	A FREE CR/LF IS INSERTED INTO THE TTY OUTPUT IF THE LINE
	LEHA!ŋDS TH4CUNT.

	TF NUM
	------

	THIS COMMAN)ũh*H TTY FILL COUNT.  ALŉ FILL COUNTS AR	0 = 110 BAUD	;NO FILLERcE	c = 150 BAUD	;NO FILL	2 = 300 BAUD	;t=A"fFA= 0
	3 = 600 B5b	wCR = 1	LF = 1
	4 = 1200 Pj;CR = 2	LF = 2
	5 = 2400 BAUD	;CR = 4	Li

	DEFAULT INITIAL FILL՝T SETTING IS 2 0ABAUD).
	BELL HAS 2 fLRS REGARDLESS OF BAUD RATE.
	DECSYSTEM10 KL,D1OTIC CONSOLE PROBV[---------------V[V[---------------񢆊gēAGNOSTIC CONSOLE TEL,Ћ OPERATIONS (CO)CEB]	TELETYPE SPECIAL CHARACTER FEATURES

6'ƍ
/SS
	----

	THE OPER5'AMAY STOP OUTPUT PTY AT ANY TIME BY TYP3	IN XOFF (CONTRSS.  THE XOFF DOES NOT ECHO AND IS DISCARDED
	BY TH*EMINAL HANDLER SO THE DIAGNOSTIC PROGRAMS֋H)ŋ
	IT.  THE OUTPUT Ih)ԟPPED IMMEDIATEL(+ɩ*H CURSOR LEFT
	AFTER$EALAST CHARACTER jP Y LEAVING THE CURSOR THE END OF THE ҩIAL LINE, IT SERVES AS A iNNG TO
	THE OPERATOR$A HE HAS STOPPEDԡAD THE DIAGNOSTIC
	IS WAITING FOR HIM TO,Ћ'ATO CONTINUE OUTPUT.CE	ON (^Q)
	---
ԑ'ЋRATOR MAY CONTIbUTPUT WHIC$A BEENOb Y 
	TYPING XON
!ϝAQ).  THE XON DOES NOT ECHO AND
	THE TERgA HANDLER DOES NOT PASS IT O THE THE DIAGNI
	PROGRAM.

	CONTROL O
/OS
	--V[--
B`RL O (^O) TYPED DURIN ELETYPE PRINTOUT FUNCTION
	PREVENTS THE̓INDER OF THE CURRENT LINEO BEING PRINTED.ԋjYE PRINTOUT IS TURNED BACK ON FOR THE NEX/OY FOR
	FORCED PRINTOUT AND WHEN TTY INPUT IS QhՋSTED.

	CONTROL L (^L)BV[------

	A CO)O L (^L) TYPED DURING INPU'AOUTPU!ϛPLEME)	THE LINE ΩER SELECTIFAG TO$ҋCT AL'Of YPEOUT
	TO THE TELEhEAOR TO THE LINE Ω A(ONLY IF LP SELECTEDF	CONTROL X (^X#E	[V[---

	A CONTROL X )ATYPED DURING PDXAfEYPE OPERATIONS WILLBhEFORM A CONSOLE s̓WTH THE FOLLOWING DAT+ HE PDP-10
	OPEPjI$ATHEN CONTINUED FROM "OINT OF INTERRU$ϝE	URING MONITOR TTY SU'ҩ A CONTROL X (^
PWLL CAUSE THE 
	CONSOLE T)EERT TO CONSOLE s̓ND MODE.
	ECSYSTEM10 KL10 DIAGNOSTIC CONsEAǥAM
	-----------------------------------V[V
3.3	DIAGNOSTIC CONsEATELETYPE OPERAT3SAOT)

C.	"KLINIK" REMOTE TERMINAL OPERAT3SCE	HE FIELD SERVICE REM"IAGNOSTIC TERMIf Qs$ΓK) ISŝABLED, IF OFF, BY TYPING "KLIN2 N THE CONSOLE TTY.
	IT Ih"IABLED BY THE SEsDAhI OF "KLINIK".  THE CONSOLE
	TTY IS THE YA󢠩HAT CAN ENABLE THE UqPO "KLIe]
	TH)EOTE TTY MUST HAVE DAILED IN AND EST0IHED CAE	EFORE THE "KLINIK" COMMAND IS TYPED ON TPCNSOLE TTY.
	IFj NY TIPTE DL11E LOOSES PEH*OASEND" THE RIIK"
5"қINAL WILL BE DIpΝECTED.  THE REM"qi AY DISCONTINUE
	USE HE "KLINIK" FAC3$Գ BY T4$Ώ "KLINIK" AND SHOULD DO
	SO BEFORE HANG3IF THE CONSOLE IS POWERED OFF AND THEN POWERE!AK UP THE
	"KLIeAFACILITY Ih թOMATICALLYERED.  THE LOCALßNSOLE USER MUST THEN TYPE "KLINIK" TO REESTABiA"EKLINIK"
	FACILITY.

D.	LINE PRINTER OiAIONS

	LP
	--

	THIS͛AND ASK THE FOLɝG QUESTION FOR LINE PRINTER
	SELECTION.

	gEAΩER, Y OR N ? -

	THE LINE PRINTER IS Tg qb CCORD3̳.  IF$EAgE	PRINTER GOES OFF LINE OR HAS AN ERROR WHILE RUNNING THE
	gEAPRINTSLECTION FL1IERED ATE PRESENT
	MESpcAgEAAND SUBSEQUENT LINES ARE THEN PRINTED ON THEBfIE PRINTER UNTIL$EA* S AGAIN SELECTE1"çYSTEM,K10 DIAGNOSaONSOLE PROBV[V[V[V[-----V[----------V[

4.0	PDP-11 SUBRO$΋̙S

		THE̙Ώ COMMANDS ЋKiũ INSTRUCTIONS) ARE Uqb	TO C3& HE VARIOUS¥OUTIN ATHE MAJORIPO THESE	OgE ARE EMT C3&SA3 ITHER AN ARGUMENT IS ӧED
	TO THE SUBSԓPIǓSTER R0 OR AN ARGUMENT ISҋiND IN REGISTER R0.
BgЋRATOR DEFINITION - SUBROUTINE CALLS

	FATAL		;FATAL PROGRAMMING ERROR.
	ERRHLT		;PROGRAM HALT, ONLY IF "ERSTOP" SWITCH SET
	PRGHLT		;PROGRAM HALT, DON'T CHECK SWITCH

	DFLEGAL		;DIAGNOSTIC FUNCTION LEGALITY CHECK

	RUNLP		;CONSOLE IDLE RUN LOOP

	TTILIN		;READ TTY LINE INPUT INTO BUFFER
	TTILNW		;READ TTY LINE INPUT, WAIT FOREVER
	TTICCL		;PROCESS TTY INPUT FROM INDIRECT CCL BUFFER
	TTICHR		;INPUT A CHARACTER FROM BUFF!AbDACKUPgP!UFER POINTER 1 CHAR
	TTLOOK		;LOOK FOR A TTY INPUT
	TTIOCT		;INPUT AN OCTAL NUMBER FROM BUFFER
	TTCOCT		;INPUT & CHECK OCTAL, RTN IF OK
	TTOCTE		;INPUT EVEN OCTAL NUMBER
	TTIDEC		;INPUT A DECIMAL NUMBER FROM BUFFER
	TTIYES		;ASK YES-NO, N-BIT ON NO, C-BIT ON ERROR
	TTALTM		;ALT-MODE CHECK, C-BIT SET ON NON-ALT-MODE
	TTI36		;READ 36 DIGIT NUMBER FROM BUFFER
	TTIBRK		;GET NUMBER INPUT BREAK CHARACTER
	TTISDL		;SPACE DELETE, C-BIT SET ON NON-NUMBER
	TTISDO		;SPACE DELETE & OCTAL INPUT, RTN IF OK
	TTIS36		;SPACE DELETE & 36BIT INPUT, RTN IF OK
	TTICRA		;INPUT C-RAM ADDRESS
	TTITRM		;CHECK INPUT TERMINATOR, RTN IF OK
	TTBTRM		;BACKUP, THEN "
	TTERM		;NUMBER TERMINATION CHECK
	TTPINI		;INITIALIZE INPUT & OUTPUT BUFFER POINTERcEaӳSTEM1%c0 DIAGNOSTIC CONSOLE PROGRAM
	---------V[V[--------------------V
4.0	PDP-11 SOTINE CALLS (CON'T)

	OPԟR DEFINITION - SUBRO$΋ CALLS

	PNTADRgTAASCII LINE, ADDQiAIN R0
	$PMSG		;PRINT MESpcY TRAILING PARAMETER
	$PMSGR		;PRINT MESpcY UNLESS IN REPEAT MODE
	CR		;PRINT ASCIIAACTER IN R0
	PNTCI	.RNT CHAR IMMEDIATE, 1 OR 2 CHARS TRAILING
	PNR.RNT NUMBER
	PCRwΩ CR-LF
	PSPACE"]Х3  SPACE
	PSLASH"]Х3  SLASH
	PCOMMA		;PR3  COMMA
	PTAB		t)I AB
	PNTOCT		;PRINT OCTAL NUMBER IN R0
4'TtĉwPRINT OCTAL IN R0, S(RSS LEADING ZEROcE	"E		;PRINT DECIMAL NUMQi N R0
	PNT18		;Ω LOWER 18 OF 36 BIT NUMBER
	PNT23		;PRINT LOWER 2h'A36 BIT NUMBER
	PNT36		;PRINT 36 BIT NUMQi4'Tg6B		;PRINT 36 BIT NUAIN BINARY
	PNT1)	t)IT PDP-10 ADDRESS
	PC		;SET FORCED PRgTFAG
	PNORML		;CLEAR CD PRINTOUT FLAGЅELL		;DING THE TTY BELL
4'TDC		;PRINT SPECIFIEDԃL DIGITS
	PNTOwΩ SPECIFIED DIGITS, TRAILING PARAMETER
	ΩDRINT, TTY OUTPUT
	P,;PRINT, TTY DRIi4&P		;PRINT, LPT DRkE
	PLDBUF	.RNT LO1BѢ	PNTBAK		;PRINBrAOUTPUT INSERTION POINTER
	PNTRST		;PRINRSET OUTPUT POINTERS

	R		;SAVE R0 THRU	REGRST		;RESTORE R0 THRU
	SH1R	;SHIRaǑT, TRAILING PARAMETECE	HIFTL		;SHIFT R0 LEFT, TRAILING PARAMETECE	ROL36		;ROTATE LEFT 36 BIƊSETFLG		;SET -1'cORD, TRAILING PARAMETER
	MULTPY		;MULTI,
	TDELAY		;SMALL TIME DELAY

	SWITCH		;REA*H SWITCH REGISTER, RETURNE$AR0
	SWTSAM		;R*ҝ PRESENT STORED SWITCHES 3Ra
	D٧TEM101a DIAGNOSTIh!ϝSOLE PROGR3F-----V[-----V[V[------------------
.a	PDP-11 SUBROUT33&SA(CON'T)

	OPERATOR"ƓNITION - SUBROUgEApfL

	EOP		;END OF PAtRUTINE, RETURNS 1N!ϛPLETED
	ERREOP		;ERS ND OF PASS, RETSA1SANDALONE

	EOPSET	.ũ END OF PASS PR3O$ΩERVAL

	COMCMD		;Cf՝ICATIONS COMMANE	iTY		;COMMUNICATIONS CfD RETRY
	COMEN"DOMMUNICATIONS ENQUIRY
	Cbϩ		;COMMUNICATIOED OF TRANSiӓON
	COMLIN		;COMMUNICATIONS L3*	COMSND		;COMMUNICATIONS LINE OUTPUT
	sbDOMMUNICATIONS ACKNOWbG
	COMNAK		;COMgI5$ϝS NEGATIVE ACKNOWLEDGE
	COMCLR		;COMMUN0ԓ󩠇LEAR
	COMCTL		;COMMÃTIONS CONTROL SjŝqF	NAM*	;FILE NAME.EXT PROCESS
	DTAFIDwDECTAPE FILE LOOKUP
	RPF3";RP04 FILE LOOKMXUK		;RAD50 TO ASCII UNPACK
	ASCR50		;ASC2PTk0 CONVERSION
	DTINIDECTAP$ΓTIALIPjIN
	RPINIT		;RP04 INITIALIZATION
	T&OD		;R b ACK
	DVDATA		;DEVICE DATA BLOCK READ
	)DL		;DECTAPE REA#IE DAT(!LCK
	DTWRFL		;DA+ғTE FILE DAPBOCK
1*BSE		;RETURN DEChEAPARAMETER BASE 1"RtƊDTREAD		;DECTAPE REAE	TWRT		;DECTAPE ԋ
	RPgD	;RP04 FIND FILE
	RPLKUP		;RP04 FILE DIQaԟVPLOKUP
	RPRDFL		;RP04 READ FILE DATA BLOCK
	RF		;RP04 WRITE F3"ATA BLOCKBiPEAD		;RP04
	RPWRIT		;RP0+ғTE
	RPADDR		;RP04 ADDRESS CALCULATION
	RPBAqDwQjUN RP04 PARAMETER BLOCK BASE ADDRESS
	RPO		;RP04 ERROR REPORTER
BbVRAM		;DEVICE BYPFAME READ
	DVWRD		;DEVICE DATA WORD READ
	D٧fa KL10 DIAGNOSTIC CONSOLE PROGRAM
	-----V[V[-----V[-----V[V[---

4.0	PDP-11 SUBROUTINE CALLS (CON'T)

	OPERATOR DEFIjIN - SOTINE CALLS񢆊V#IE		;RXX01 FLOPPY FILE̋u$ϝ
	RXINIT		; FLOPPY INITIALIZATION
	RXRDFL		h#LPPY READ FILE
4Ww FLOPPY WRITE F3"4BSE		;OPY PARAMETBOCK BASE A)EcE	"]P READұWRT		; FLO,RITE

	WCRAM		;WRIPI'-RAM
	RCR3DwQ`ATHE C-RAMBk׃wWRITE C-RAM ADDRESSBfɇNUL		sdåO CODE C-R3PZRO
	aƓL		;MICRO sEAC-RAM̙ԑE

	MRESED4E RESET

	TENSW		;TSITCHES

	TENSD 	TENCHR		;TEN LAST TYPEDA񢆊SM		;START UCODE IN fTALOOP
			;TO SUPPORT EXAM DPOS AND EXCT

	EXCT		;EXECUTE PDP-10 INSTR, REQUIRES SM

	LODAR		;SPECIAL AR LOAD FOR XCT AND MBOX TEST,
			;ASSUMES UCODE IS FUNCTIONING

	SETMPH		;SET M-BOX PHASE

	ECLOK		;E-BOX CLOCK
	ESYNC		;E-BOX SYNC

	CLKPRM		;RETURN ADDRESS OF CLOCK DEFAULT WORD
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

4.0	PDP-11 SUBROUTINE CALLS (CON'T)

	OPERA ΓgA- SUBSԓPCLLS

	EXAM		;EXAMINE 10 MEMORY
	EXAMT		; " , TRAILING PARAMETERS
	DPOS		;DEPOSIT INTO 10 MEMORY
	DPOST		; " , TRAILING PARAMETERS
	DPOSVR		;DEPOSIT AND VERIFY 10 MEMORY
	DPOSVT		; " , TRAILING PARAMETERS

	D10MON		;DEPOSIT -1 INTO 10 FLAG WORD
	D10ZRO		;MEMORY ZERO PDP-10

	CMPR36		;COMPARE 5 BYTE 36-BIT WORD

	DTEBAS		;RETURN BASE ADDRESS OF DTE20

	DFXCT		;DIAGNOSTIC FUNCTION EXECUTE
	DFXCTT		;DF EXECUTE, TRAILING PARAMETER
	DFRD		;DIAGNOSTIC FUNCTION READ
	DFRDT		;DF READ, TRAILING PARAMETER
	DFRDMV		;DIAGNOSTIC FUNCTION READ & MOVE
	DFWRT		;DIAGNOSTIC FUNCTION WRITE
	DFWRTT		;DF WRITE, TRAILING PARAMETERS
	DFWIR		;DIAGNOSTIC FUNCTION WRITE IR
	DFSCLK		;DIAGNOSTIC FUNCTION, SINGLE STEP CLOCK
	DFPC		;DIAGNOST0FIN, RE1P
	DFVMA		;DIAGNOSTIC FUNCTION, READ VMAč1!	;DIAGNOSTIC FUNCTION)ED ADR BREAK
	Dզ		;DIAGNOSTIC FUNCTION, Rb MA HELD

	RDRAM		;Q`AD-RAM
	WDRAM		uI"-AM
	DRAMAD		;S"é D-RAM ADDRESS

	BURST	.UST THE M-BOX CLOCK

	PNTCPU		;PRINT CPC[RAM & REGISTERS

	PNTCRDRINT C-RAM, LOG0AFIELD FORMAT

	PNT;PRINT D-RAM, LOGICAL FIELD FORMAT

	PRGCMD"]ХA COMMAND
	PRGNwǥAM COMMAND, NO Ω3	DECSYSTEM10 KX 0cΟSTIC CONSOLE PROGRAM񢄭[---------------V[V[----------------

4.1	BASIC INITIALIZAgA3 ROGRAM ERRORS

	A.ԃL

		FATAL PRAiRR, USED TO REPORT ERSSATHAT CAN
		NEVOCUR UNLESS THERE IS A CODING ERROR OR TO END A 
	0ΉITION SKIPPING CHAIN THAT SHOULDN'T EVERATE
		END.  NO ARGUME)
	B. ERRHLT
BDťS ALT, TAKES CARE OF TPCNDITIONS OF STA ̟F	OR DIAGNOSTIC MONITOERATION AND PERM THE PROPER
		HALTING SE5b·E.  THE "ERSTOP" SWI UST BE SET
		T$A	C.  PRGHLT

		PROGRAM HALT, SAME AS QiR XCEPT DOES NOT CHECK$E		"ERSTOP" SWI.CE	.  DFLEGAL

	1$NOSTIC FUNu$ϝ LEGAjYAr"×, THIS TESTS THE	(-c0 LOGICALLY RUNNING FLOP AND ALLOWS THE gCION
		IF THE PDP-10 IS NRNNING.  IF IT Ih)UNING, THE
		OPERATOR COMgDAIS ABE AND "&OING MESSAGE
		PRINTO THE CONSOLE:

		"?KL10 RUNNING, TYPE T"AFIRST"

	E.  RUNLP

	0ΧOLE IDLE RUN LO iETTILIN" TO INPUT CONSOLE
		COMMANDS IF  UPPORTING PDP-10 OPERATION.  IF
		SUPPORTING"P[10 OPERATIONS, MONITORS Pa STATUS
		AND iFRMS PDP-10 COMMAND OPERAT3S]  IF 3)		SU'ҩING PDP-10gΓTOR OPERAT3SY CAUSƊ	THE sSPT PERFORM AS A TIME-SiIG USERS TERMINA1"çYSTEM10 KL10 DIAGNOSaONSOLE PROGRAMBV[V[--------------------V[----------

4̄ԋjYE INPUT

	A. TTILIE		USAGE:	ADR:	TfI"]ÃLL
			ADR+2	BCS    "]Ο RESPONSE RETURE	0bRW4	NEXT INST	;LINE INgPT BUFFER

	PEQқh!L TO TELETYPE INPUT uaRUTINE WHICH INP)ND
	STORES TYPED CHARS I*H INPUT BUFFER U$AEITHER A
0ҥIAGE RETURN OR ALTMODE IS TYPE1N RESPONSE AT THE TTY IN APPROX 3 MINUTES"Ar ҃CTER WAIT
	THE SUBRjIE RETURNS WITH "ASET.

	SPECIFICATIONS:
	1. CLEARS INPBѢAUPON ENTRY
	2. INPUTLL CR OR ALTMODE	g!UFER S6F 140 CHARACTERS
	4. TTY INPU!UFER STARTS AT "$INBUF"
	I CR IS TYPED, I(Lh&IE FEED IS ECHOED AND PUT IN BUFFER
	6. 1C)O C (^C) IS TYPED, JU)O "CN!	7. fL ARE IGNORED
	8. INPUT & CHAR PICKPINTERg EgPR"
	9. DEPRESSING THE "RUBOUT" KEY "N" fŧ CAUSES THE LASNE 
	 !ȃRACTERS TO BE D"ԋ HE DELETEDAACTERh ҋ ECHOED
	   ON$EATTY ENCLOSED IN×s ӑES (\).
	   DEPRESS3ONTROL U(^U) CAADELET3 F THE CURRENT LINE.
	   THE PROGRAM WIL)EDABY ECHOING ^U FOLLOWED BY CARRIAGE
	   RETURfIE FEED AND WAITAAN INPUT CiATER.

	APTILNW

	PERFORA GIVEN UNDER "TTILIN" EXCEPT WAITS FOREVER FOCE	"ԳPE INPUT.

	A.2 TTICCL

	PROCESSES CiATERS FROM THE INDIRECT FIPBFFER INTO THE
5"̋TYPE INPUT BUFFER FOR SUBSEQUENT PROGRAM PROCɝ놊RETURNS WITH C-BIT CLEAR WITH A LINE IN "*ABUFFECE	F ANY ԃAAVAILABLE IN THE INDIRECT BUFFER.  RETURNS
	WITH THE C-BIT qj HEN AO THE INDIR 3"S PROqiӋD.
	DECSYSTEM,K,DAGNOSTIC CONSOLE PROGRAM
	------------------V[---------------V[񢆊i.2	TELETYPE INP(S.

0 ATTICHR

0ӓC INPUT BUѢAËtΏթ3A RETUSHARACTERSBcRM INPUT BUFFER IN R0E"jӃGE:	ADR:	Taȥ"]ÃLL
			ADRlh A A	;NO CHARS IN BUFF		ADRm΋XT INST	;Ci N R0CE	.1  TTBACK񢆊PERFOSi'ɝi ACKUP OF TPIj UFFER POINTER.
	USE*OAREPROCESS A CHAPaԋH#R*H INPUT BUFFER.
	RETURNS jHA"-BIT CLEAR IF THE PO3E IS NOT AT
	THE BEGINNING OF THE BUFFER, OTHERWISE RETURNS WITH THE
	C-BIT SET.

		USAGE:	ADR:	TTBACK		;CALL
			ADR+2	BCS A
			ADR+4	NEXT INST
	C.  TTLOOK

	TELETYPE KEYBOARD CHECK ROUTINE
	CHECKS FOR ANY KEY STRUCK, RETURNS IMMEDIATELY.
	RETURNS WITH C-BIT SET IF NO TYPEIN, R0 CLEAR
	RETURNS WITH C-BIT CLEAR IF TYPEIN, R0 CONTAINS CHARACTER
	ALSO SETS "INHIBIT TYPEOUT ABORT TYPEIN CHECKS" TO ALLOW
	A FOLLOWING "TTLOOhTgP*H CHAR0EE		USAGE:	ADR:	TTLOOK		;CALL
			ADR+2	BCS	A	;NO TELETYPE INPUT
			ADR+4	NEXT INST	;DATA IN INPUT BUFFER
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

4.2	TELETYPE INPUT (CON'T).

	D.  TTIOCT

		USAGE:	ADR:	TTIOCT		;CALL
			ADR+2	BCS     A	;NO DATA OR NON OCTAL
			ADR+4	NEXT INST	;16 BITS IN R0

	PERFORMS CALL TO CONVERT CHARS IN INPUT BUFFER TO OCTAL DATA.
	ALLOWS UP TO 6 OCTAL CHARS TO BE CONVERTED IN ONE INPUT NUMBER
	STRING.  THIS ALLOWS FOR UP TO 16 BITS OF DATA TO BE RETURNED
	IN R0.

	E.  TTCOCT

	PERFORMS A "TTISDL" & "TTIOCT" AND RETURNS IF OCTAL NUMBER IS OK,
	OTHERWISE REPORTS "PARAMETER ERROR" AND RETURNS TO CONSOLE LEVEL.

	E.1 TTOCTE

	PERFORMS "TTCOCT"gDA1"IIONALPCECKS THAT NUMBER IS EVEN.

	F.  TTIDEC񢆊5iE:	ADR:	TTIDEC		;CALE		ADR+2	BCS     "]Ο DATA OR NON DECIMAL
			1)+i	NEXT INST	;NUMBER I)0
	PERFORM CAL*OAsVRT CHARS IN INPBFFER TO DECIMAL DATA
	ALAINPUT OF FROM POSITIVE 32767 TO NEGITIVE7m8.

	------------------V[------
	TTIOCT	TIDEC ALLOW INPUT OF cɩIVE NUMBERS IF MINUS (-)
	IS FIRST CHARACTER aE STRING.
	NUMBSRgGABREAKS ARE: ANYA3(H-NUMERIC CHARACi+V[--------------------V	DECSYSTEM10 sA`ǝOSTIC CONSOLE PROGRAM
	----------------V[V[-----------------
M2TELETYPE INPUT OW
	G.  TTIYES

		Upcu	ADR:	TTIYES		;pfL			ADR+2	BCS	B	;NEITHER RETURN
			ADR+4	BMI	A	;N)EURN
			ADR+6	NEXT INST	;YES RETURN

	QjUWTH THE C-BIT SET IF dԑER "Y" OR "N" ROqW	RETURNS WITH THE N-Rj ET IF "N" RESPOBaOH C-BIT & N-BIT CLEAH$A"Y" RESPONSE.
]  TTALTM

	TELETYPE KEYS҉ ALTMODE CHECK ROUTIFPERFORMS A "TTLA3 F THE CHARACTER TYPED WAS AN
	ALTMODE, QjUWTH C-BIT CLEAR.

	5iE:	ADR:	TTALTM	.E		ADR+2	BCC	A	;A&ωE RETURN
"DR+4	N* 	wNON-ALTMODE RET]  TTI36

		USAGE:	ADR:	TTI36		;CALL
	"`ĥ+2	BCS	A	;NO DATA OR NON A
			ADR+4	NEXTgS	;ADDRESS OF DATA IN R0
ЋRFORMh!L TO sVUCARACTERS IN INPUT BUѢATO OCTAL
	DATA.  ALLOWS UP TO 12 OCTAL r ҃CTERS IN AN INPUT NUMBERBiԥING.  ADDRESS O&EuSGNIFICANT PORTION OF DATA RETURNED
	IN L ANEXT 16 BITS OF DATA IN THAT ADDRESS +2.  NEX ITS
	OF DATA IN THAT ADDQiA+4.

	FORMAT 3m BIT STORED DATA:

		ADNTS 20ڍ		ADRlTS 04-19
"`ĥ+4	BITS 00N LOWBTS OF҉	ECSYSTEM10 KL10 DIAGԓC CONSOLE PROGR3FV[--------------------V[-------------
.e5"̋TYPE INPUT (CON'T).CE	.  TTIBRK

		ǋB`ĥ:	TTIBRK		;CALL
			1)+e	BCS	A	;NO DATA񢄉1)+i	NEXT INST	;BREAK CH4éER IN R0

	PEQқh!L TO GET THE BREAK CiATER USED TO ENDͅINPUTS.

	L.  TTIS		USAGE:	ADR:	$ӉL		;CALL
			ADR+2	BCS	A	s[NUMBER RETURN
"DR+4	NEXT I	wNUMBER RETURN

	PERFORMS CAL*OAfEE SPACES AND TABS FROM INPUT BUFFER.
	DiACLEAR RETURN IF NEXTA IN INPUT BUFFEH$BX O 9, + OR -.
	C-BIT SET RETURN IF ANY O"Ar ҃CTER.
	C-BIT & V-BI)ũ IF COLON OR SL4.BaIT & KaI SET IF UPARROW.

	M.  TTISDE		USAGE:	ADR:	TTISDO		;CA		ADR+2	NEXT INuu ANUMBER IN R0

	PERFORMS "TTISDL" & "TT3E'ET OCTAL NUMBER INPUIF NOgéAL NUY PRINTS "PARAMETER ERROR" AND RETURT
	CŐOTAL NUMBER MUST BE POSITIVE ALSO.

	N.*TS36

	PERFORMh"TISDLH ETTI36" TO GET 3!IͅER INPUT. c	IMPR"AINPUT, PRINTS "iAETER ERROR" ANDԫSO CONSOLE.

	O.  Ta҃

	PERFORMS "$ӉO" TOAOCTAL NUMBER AND THEN VALIDITY CHECKS
	 ̓D C-RAM ADDRESS.  IF INVALID, PRINTS "ADR ERRH Ή
	RETURNS TO CϙE.
	DECS4E10 KL10 DI1OTIC CONSOLE PRO	-------------------------------------------񢆊īԋLETYPE INPUT (CON'T).

	P.  TTITRM

4"ҍORMS COMMAND TERMINATION fIITY CHECKING.  1IVALID
	PRINTS "PARAMETER ERR" AND RETURNS TOΧ"	VALID TERMINATORS ARE:
	NULL, SPACE, a,As̓, CARR`ǋ RETUS]  TTBTRM

	BACKS UP INPUT CHARACTER POINTER ONE CHARACTER 3 HEN
4"ҍORMS "TTITSQ.CE	.  TTgI
	INITIALIZE "*AAND OUTPUT TELETYPE BUFFER POINTERS.

4.3	PRgTAOUTPUT

	1. MAE CREATED IN ANԡBFFERBY.ABUFFER SIZ$A140 CHARACiSBYA"A(&IcED IS jETED ON INSIN INTO THE BUFFER
	T'թPUT BUFFERig ENT TO THE"̋hE]  THIS CAN
	   ALSOAUSED'APPEN ON D"éION O AUNDERSCORE
/	   3ťgA3OATHE OUTPUTƍ	4. TO INSERT CARRIAPRTURN-LINE FEED qhՋ⠓'SCIZ
	   MESSAGES WITHOU*H!}<LF> PDP-11 KLUDGE UqPTE CHARACTER
	   BACKSLASH (\).
	5. THE OUTPUT BUFFER STARTS AT "$OUTBF"
	6. CHARACTER INSERTION POINTER IN "$OUTPT".

	A.  PNTAL

		USAGE:	ADR:	MOV	#MSG,R0	;SETUP ADDRESS
			ADR+2	PNTAL			;GO PRINT

	B.  PNTMSG

		USAGE:	ADR:	PNTMSG	<THIS IS A MESSAGE\>

	THIS ROUTINE IS A MACRO WHICH GENERATES THE "PNTAL" CALL PLUS
	GENERATES THE ASCIZ TEXT AS A LITERAL THAT IS PUT BACK
	IN THE STORAGE SECTION.
	DECSYSTEM10 KL10 `ǝIΧOLE PS҃E	[------------------------------------------

4.3	PRINT OUTPUT (CON'T).


	C.  $PMSG

		USAGE:	ADR:	$PMSG		;PRINT CALL
			ADR+2	MSGADR		;MESSAGE ADDRESS

	D.  PMSG

		USAGE:	ADR:	PMSG	<THIS IS A MESSAGE>

	THIS ROUTINE IS A MACRO WHICH GENERATES THE "$PMSG" CALL PLUS
	GENERATES THE ASCIZ TEXT AS A LITERAL THAT IS PUT BACK
	IN THE STORAGE SECTION.

	C.1  $PMSGR

		USAGE:	ADR:	$PMSGR		;PRINT CALL
			ADR+2	MSGADR		;MESSAGE ADDRESS

	D.1  PMSGR

		USAGE:	ADR:	PMSGR	<THIS IS A MESSAGE>

	THIS ROUTINE PERFORMS AS THE "PMSG" EXCEPT THAT IT ONLY PRINTS
	IF NOT IN THE "R" REPEAT MODE.
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

4.3	PRINT OUTPUT (CON'T)

	E.  PNTOCTCE	ǋ:	ADRBfϭ	ADR,R0
			ADR+2	PNTOCT

		THIS PRINTh!ϝgT OF ADR

		USAGE:	1):MOV	#NUM,R0
		0bRW2	PNTOCT

		THIS PRINTSAAS OCTAL

	F.  PNT
		PERFORMS AS'TuECEPT SUPPRESSES"ING ZEROS

	G.  PNTODCCE	PRINT OCTAL NUMBER IN R0 AS SPECIFIED BY$EACOUNT
		IN R1.  CAN PRIN#RM 1 TO 6 OCTAL cɩS.

		USAGE:	ADR:		GSPEC,R1	;NUM OF DIGITS
			ADR+2	MOV	NUM,R0		sԃ'UBER
			ADR+4	P'ć"DRINT CALL

	GPPT
		PRINT OCTA'UQi N R0 AS SPECIFIED BY$EATRAILING
		PAR3bԋK		USAGE:	ADR:	PNTODT	;PRINT CALL
			ADJ	awSPECIFIED DIGITS TO Ω

	H.  PNTDEC񢆊4͋ AS PNTOCT EXCEPT NUAIS PRINTED AS S1E
		DECIMAL	INTERGER NUMBER.  THE RANGE OF THE NUMQi S
		+32767. TO -32768. DOT PRINTED AFTEH'UQi O SIGNIFY
		DECIMALEDECSYSTEM10 KL1"IөIC CONSOLE PROGRAM
+V[---------------V[V[--------------

4.bhRNT OUTPUT (CON'F	I.  PNT36

		PUT ADDR頟F DATA IN R0, CALL P
		USAGE:	ADRBfϭ(ĥ,R0
			ADR+2	PNT36

		FORMAT OF DATA 4񢄉DR:	BITS 28-35	;LOW !I BYTE
		ADR+1	RjSALo
		ADR+2	BITS ,s
		ADR+3	RjSA04-11񢄉BITS 00-03	;IN iԧ OF BYTE

	I.1 PNT36B

		THIS COMMAN(RNTS THE 36 BIT NUMBER GIVA
		SPECIFIED IPT36" EXCEPT IN OCTALLY GRhE
		B3ҳ.

2 A1q

		THIS COMMAND PRgT THE LOWER 18 BITS OF A 36 BIT
		NUMBERim OCTAL DIGITS.  SAME DATAқAT AS "PNT36".CE	P NT23

		THIS COMMAND PRINTS THE LOWER LBTS OF A 36 BIT
		NUMBER AS "2 6" OCTAL DIGITk AME DATA FORMAT AS
		"PN"]

	J.2  PNTADCE		THIS COMMAND PRINTS EITi N "PNAFORMA'AIN
		"PNT. ORMAT IF Pa ADDR項ITS 1XA4ERO.

	K.  PNTCHRCE	THIS PRINTS 1 ApAr ҃CTER

		USAGE:	ADRBfϭ	#CHR,R0
			ADJ	!ȥ

	L.  PNTNBR

	5$I PRINTS THE 3 LiArcΓFICANT BITS IN R0 AS񢄉N OCTAL DIGIT.CċtөEM10 KL10 DIAGNOSTICΧOLE PROGRAM
	-V[V[--------------------V[-------

4.3	ΩԡUT (CON'T)

	M.  PtF
		THIS PRINTPCRRIAGE RETURN & LINE FEED񢆊N.  PSPACE

	5$I PRINTS A t Ë

	O.  PSLASH

		THIS PRINAAs ӑ (/)

	P.  PCOMMA

		THIS PRINTS A CfA
	Q.  PTAB

		THIh(RNTS A TAB

	RP
		THIS CALL SETS THE FORCED PRINTOUT  AsFLLOWING
		PRINT CALGT PRINTED EVEN 1TNPNT" uԇH
		IS SET.  THIS FLAG IS SETHE CONSOLE PROGRAM FOR
	0͛AND PRINTING AN*H!̋ARED WHILE EXECUTING THE
		GIVEN COMMAN]  PNORML

		THIS C3& ESETS$EAFORCE(RNTOUT FLAG.

	T.  PBELL

		THIS̙ SENDh & O THE TTY.

	U.  PNTBAK

		PERFORMS ((ONTER BACKUP OF "UTPUTƍER INSERTION
	4'ɝi.	DECSYSTXAKL10 `ǝOSTIC CONSOLE PS҃M
	-----------V[V[--------------------F4.3	PRINT OUTP(ON'T)񢆊V.  PNTCI

		PERFORMS AN IMMEDIATE CHAPaԋH(RNT, USING THE 1 OR 2
		CHARACTERS FOLLOWING 4AATRAILING PARAMEi.
	W.  PN
		RESETh*H PRINT OUTPUT IҩION POINTER AND THE PRINT
		POSITION POINTERRiN THE OUTPUT BUFFER ADDRESS IN
		R0.

	EGISTER SAVE AND RESTORECE	.  REGSAV

		$ASAVES R0 THRU R5 ON THE STACK.

	B.  REGRST񢆊5$I RESTORES TO R0 THRU R5 THE REGISTERS PRϫs,		SAVB A "RH)OTINE.

4.5	SHIFT RIGHT/LEFT ROUTINES

	A.  SHIFTR

	TH4SIFTS LRGHT THE PL0At"ÓFIED VPTE TRAILING
	PAPfũ
		USAGE:	ADR:	SHIFTR		;ROUTINE CALL
			ADRlßUNT		;PLACES TOI)0
	B.  SHIFTLCE	iHIFTS EFT THE PL0ASPECIFIED VPT*R3$ΏЃPfũER.
񢄉SAGE:	ADR:4ITL		;ROUTINE CALL
	"`ĥlßUNT		;PLACTIT R0

	CP
	THIS SHIFTS THE mBT WOR(ONTED TO BYEFT TPNMBER
	OF  ËS SPErcI$AL
		USAGE:0bRu3g#ADR,R1	;ADR OF 36 B5)			ADR+2	MOV #CRg.ȓCUNT
			ADR+4	PROL36		;CA1"çYSTEM10 KL10 DIAGNOSaONSOLE PROGRAM
	-------------------------------------------

4.6	MISCELLANEOUS

	A.  SETFLG

	THIS SETS -1 TO THE FLAG WORD SPECIFIED BY THE ADDRESS GIVEN
	IN THE TRAILING PARAMETER.

		USAGE:	ADR:	SETFLG		;CALL
			ADR+2	FLAG WD		;ADDRESS

	B.  TDELAY

	THIS PROVIDES A SMALL TIME DELAY

5.0	CONTROL SWITCH ROUTINE

	PDP-11 - ALL 16 BITS READ FROM ACTUAL CONSOLE SWITCHES

	A.  SWITCH

	SWITCHES RETURNED IN R0.CE	S
	R*ҝh)E SWITCHES AS LAST READ BY "SWITCH" CALL.
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------


6.0	END OF PROGRAM PASS OPERATIONS

	THESE ROUTINES PROVIDE THE PROGRAM END OF PASS CONTROL
	AND INDICATES THE END OF A PROGRAM PASS, DECREMENTS THE 
	PROGRAM ITERATION COUNT, INCREMENTS THE PROGRAM PASS COUNT,
	AND RETURNS TO THE DIAGNOSTIC MONITOR (IF RUNNING IN THAT MODE)
	WHEN ALL PROGRAM ITERATIONS HAVE BEEN COMPLETED.

	IF ALL PROGRAM ITERATIONS HAVE NOT BEEN COMPLETED, THE "EOP"
	CALL RETURNS +2. DURING STANDALONE OPERATION THE "EOP" CALL
	ALWAYS RETURNS +2.

	A.  EOP

		USAGE:	ADR:	EOP		;CALL
			ADR+2	NEXT INST	;CONTINUE RUNNING

		THIS "EOP" CALL MUST BE PLACED AT THE END T*ӋRS
	3`ɝ TEST CODE OR SUCH THAT IT GETS CALLED Wg 	TESTS HAVE BEEN PERMD.

		IT WILL)IT OUT "END PASS ######" O*H COMPLETION OF
		TH#IST PASS THRU TH(RAAND THEN AT THEgTRVAL
		SET BY THE "EOPSECLL (IF USED) OR WILL DEFAULT TO
		AFTERkEY PASS IF THE "EOPSET" CAHS NOT BEEN USEDE	THE NUMBER TYPED OUTi DECIMAL NUMBER BETWEEN 1 AND
		30000. AT WH0 gTAIT RECYCLES.
Ba.AgЧET

		USAGE:	1):	GNUM,R0    ;SET  "ҭAL
			ADR+2	EOPSET	( wCALL

		THE NaEСLIED IS THE INTERVAL AT WHICH TO INDICATE	"ND OF A PASS.

	C."ҥEOP

		USAGE:0bRu1iROP		;CALL
			ADR+2	lTAINST	;STANDALON'ЋRATION

		THIS "ERREOP" CALL IS USED TO RETURN T*H DIAGNOSTIC
		MONITOR, IF RUNNING IN TH5MV R TO RETURN TO
		TH!ϝSOLE IF RUNNINGAfOE.
	DECSYSTEM10 KL,DAGNOSTIC CONSOL(R	------------------V[---------------V[

7.0	COMMUNICATION ROUgE

	A.  COMCMD

	5iE:	COMCMD		;CALE	0AEOF		;C-BIT SET FOR EOF

	1. PERFORMS Pͧ O TRANSMIT OUTPUT MEtǋ TO THE
	   APX  YSTEM.
	2. PERM "COMLIN" RCIEVEЙ(#RM THE APT10
	 $O)٧TEM.
	3. IF RESPONSE IS A CONTROL SEQUEACHECKS FOR
	   ACKNOWLEDPAD IF SO EXITS W5$ HE ACK CHAR IN R0
	   AN*H C-BI!̋AR.
( )EPONSE IS A CONTROL SjŝCE, CHECKS FOR END OF
	   TRANSMISSION 3 F SO EXITS WITH THE EOT Ci N R0
	   AND TPC[Rj LEAR.
	4. IF RESPONSE IS A NORMAL MESSAPEITS WITH R0 CLEAR
	   AND THE C-BIT CLEAR.
-W F ANY COMMUNICATION ERRORh'ÇUR THIS ROUTINE̙
	   RETRY THREE TIMES. c HE ERS ERSISTE ROUTINEBP AWILL PRINTϛM ERRH Ή THE Oċ AND CONTROL
	   C 0ҩ.
	6. ERROR COiQ]		-1	;NO RESPONSE
	+Y	wLINE TOO LONG
"VsbӧAGE NUMBER ERROR
		O CARRIAGE RETUS+ZwMESSAGE CHECKSUM ERR	-6	;INCORRECT iӃPFRMAT
		-7	;NEGATIVEa˝OWLEDGE
		-10	ugK ESPONSE

	B.  COMR
	THIS ROUTINE"ҍAONLY THE TRANSMISSIO#UCTION OF
	THE PͧND" ROUTINE TO RETRY A "Ca͉" COMMAND MESSAFTRANSMISSI ATHIS IS A NORMAL PART OF THE "sÛERROR RETRY PROCEDURE.

	C.  COMENQ
BjHh)OTINE REQUESTS SERVIC#RM THE APT10 HOS)٧f	THIS PROVIDES A METHOD FOR THE APT10 H &IIT MESSAGE
	INPUT Wg  HEAVY LOAD CONjI"ؓSTS. E THE APT10
	HOST IS READY TO ËED IT WILL SEND AN ACKNOWbG.
	IF THE APT1$O)EUIRES A WAIT IT WILL SEND AN EOT.
	THE sSPWLL THEN WAIT 10 SECO)ND TR( ǃIN.
bESYSTEM10 KL10 DIAGNOSTIC CONSOLE PRA
	--V[V[-------------------------------

7.0	Cf՝ICATION ROUTINEhCN'T)CE	.  COMEOT

	TPgS5)OMMUNICATI󩠋ND OF)ASMISSION SEQUENqW
	E.  COMLIN
񢄱]"ҍORMS CALL TO COMMUNIpjINS INPUT ROUTIN+ȓCH INjS	   AND STORES CHARACTERS FROM THE COMMÃgΧ LINE IN THE
	   INPUT BUFFER.
	2. TERMINATO RECEPTION OF A$΋ FEED OR A&ωE CHAR.
	kRQUIRES RECEIPT SNC CHARACTER (OCTAL 001) TO BEGIN
	   LINE PSŧrgG]  THIS PREVENTS LINE NOISE FROM AFFECTINE	A  THE TRANSMISSION.
	4. (!ϝTROL C (^C) TYPO THE CONSOLE TTY WILL ABORT
	   THE OPERATIO ΉԫRN TO THE CONSOLE.
	5. THE TELETYPE INPBѢAPROCEtΏ ROUT3A4SED
	   FOLLOWING COMPLETION OF THE "COMLIN" ROUTINE TO PROqi	   "ATA IN THEgP!UFER.B[.AA MESSAGE THAT iMjE WITH AN ALTMODE SIGNIFIES A
	   CONTROL SEQgC, A RETURN IS Tg 󢠯ITH BOTH THE
	CA' IT CLi.	7. A MESpcATHAT TERMIjEԑPLPFSGNIFIA	   NORMA&ŧSAGE, IN THIS CASE TPMtǋ NUMBER ISғbY
	   THE iӃPCECKSUM COMPUTED AND r"×ED, I*H MESSAGE
( S CORQaAA RETURN Ih*HN DON+ɩ*HT CLEAR ANE	A*H N-BIT SET.
	8. IF 3ERORS EXISTS THEiRH!ω$ARETURNED IN R0
	   WITH "ASET.  ERROR CODES GIg NDER "COMCMD".

	F.  COMSND

	THIS ROUTINE PERFORMS THE MESSAGE SETUP, MESSAGE NUMBERING
	AND CHECKSUM CALCULATION FOR NORMAL TYPE MESSAGES.  IT THEN
	TRANSMITTS THE MESSAGE BY CALLING THE "COMRTRY" AND "COMCTL"
	ROUTINES.
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

7.0	COMMUNICATION ROUTINES (CON'T)

	G.  COMACK

	THIS ROUTINE TRANSMITS THE COMMUNICATIONS ACKNOWLEDGE A"AiFRMS Ah#ɭUDER "COMCMD" FROM THE
	"COMLIN" ON TO RECIEVE AND PROCESS THE NEXT MESSAGE SEGMENT.

	H.  COMNAK

	THIS ROUTINE PERFORMS THE COMMUNICATIONS NEGATIVE ACKNOWLEDGE
	AND THEN PERFORMS AS GIVEN UNDER "COMCMD" FROM THE "COMLIN" ON
	TO HOPEFULLY RECIEVE A CORRECT RETRANSMISSION OF THE MESSAGE
	IN ERROR.

	I.  COMCLR

	THIS ROUTINE TRANSMITS THE COMMUNICATIONS CLEAR CONTROL
	SEQUENCE TO ABORT ANY OPERATION CURRENTLY IN PROGRESS.

	J.  COMCTL

	1. PERFORMS CALL TO COMMUNICATIONS OUTPUT ROUTINE WHICH
	   TRANSMITS THE MESSAGE.
	2. FLUSHES ANY PRESENT COMMUNICATIONS INPUT CHARACTERS.
	3. TRANSMITS 2 SYNC CHARS (OCTAL 001) TO SYNCRONIZE LINE.
	4. TRANSMITS MESSAGE
	5. TERMINATES ON A NULL BYTE
	DECSYSTEM10 KL10 DIAGNOSTIC Cϙ(RGRAMBV[----------------------------------------񢆊qSIC MACROS

	A.  P
	THIS MACRO Ih*ӋD TO PUT DATA ON THE STACk
		CALL:	PUSH	A	;A 4WAT GOES ON THE u ×񢆊	.MACRO	PUSH	ABD]IRP	B,<A>
			MOV	B,-(SP).UH B ON STACK
			.ENDR
		.ENDM

	EXAM"
		PUSH	R0
		PUSH	<R0,LVRe,R3,R4,R5>

	K OP

	THIS MACRO ISiŉ TO REMOVE DATA FROM THE STACK.

		CALL:	PO`w($AWHAT GETS RESTOQb S					;THE STACK񢆊+RO	POP	A
			.ITY_			MOV	(SP)+,B	;POP u × INTO B
			.EN+ΉM

	EXAMPLE:

		POP	R0
		POP	<R5,R4K)1YR0>

	------------V	THE ARGUMENTS pfLAE FOR THE "POP" CALL iABE THE
	REVERS'ATHE ARGUMENTS CALL ORDER FOR THE "PUSH" CALL
	FORҥECT OPERATION.
	----------------

	D٧fa KL10 DIAGNOSTIC CONsEAPROGRAM
	-----V[V[--------------------V[---


8.0	BAra0O (CON'T)

	C.  .LIE	THIS MACRO PRObE LITERAL CAPABILITY TO TH(D-11
	PROGRAMS.  USE HIS MACRO ALLOWh)ԟPcALOCATIONS
	TO BE ASSIGNED AS THE PROGRA$AsE WITH THE CONTENTS
3 HAT LOCATION TO5$E ZERO OR ASSIGNDTA.
	ALSO)OIDES  *I[WORD LITERALS S h ӇIZ STRINGS.

		.MACRO	.LIT	$LTAG,$LARG񢄉	$$CLC=.
				.=$$CLIT
	"RLAG=.			;ASSIGN (&OATION
			.IIF	B,<$LARG>,E		.IIF3,y$LARGLQƊ			.EVEN
				$$CLIT			.=$$CLC
		.ENDM

	EXAMPLES:

		.j	AG,123

			ASSIGNS LOCAgANAMED "TAG" CONdΓ"c23"
			BACK IN THE PROGRAM STORAGE AREAE		.LIT	TAG1,<.ASCIZ %THIS IS A MESSAGE%>

	"`ӧIGN LOCATION NAMED "TAG1"iHE START OF ANBDSCIZ STRING OF DATA BACK 3TE PRO			SAE AREA.
1"çYSTEM10 KL,DAGNOSaONSOL(R	------------------V[---------------V[񢆊q.0	BASIC MACROS (CON
	D.  SL

	Ti0OAGENERATES THE PROPERͅER OF SHIFT LEFE	RCTIONS TO LEFT SHIFT$EAREGISTER THE RE5bөAOUNT.

		CALL:	SL	QcUM

		.MACRO	sҋ'U
			.IF	GT,NUM-7
	"i׃B	REG
			.REPT3[			ASL	REG
			.ENDR񢄉.IIF
			.REPT	f			ASL	REG
			.ENDR
			gD
		.ENDM

	Ei
	THIS M0OAGENERATES THE PROPER NUMBER OFǑ)ȓFT
	INSTRUCTIONS TO RIGHT SHIFT THE REG4E$EAREQUESTED AMOUNT.
BDÃLL:	SR	REG,NUMCE	`åO	SR	REG,NUM
			.IF	GT,NUM-7
			SWAB	RƊ"WRPT	NUM-^D8
			ASR	RƊ		.ENDR
			.IIE	+ET	NUM񢄉ASR	REG
			.ENDR
			.ENDC
	+ΉM
	DECSYSTEM10 KL10 DIAөIC CONSOLE PROGPf+V[---------------------------------------CE	ASIC MACROS (CON'T)CE	.  EX	THIh&RO PERFORMS THE XOR FUNCTION.

		pfLu	EXOR4YiԓN,SCRTCH

		.MACRO	EXOR	REG,DESTIN,SCR			.IF	NB,<SCRTr			MOiE,SCRTCH
			BIC1"ө3SRTCH
			B0ҋG,DESg			BIS	SCRTCH,DI
			.IFF
			MҋP)
			BIC	DESTIN,(S
F		BIC	REG,DESTIE		BIS	)W,DESTIN
			.ENDC
		.ENDM

	G.  MULTCE	iACRO PERFORMS THE MULTIPLY FUNCTION.

		CALͫLT	SOURCE,REG
񢄉]MACRO	MULT4եCE,REG
		4*ӑ	SOURCE
			PUSiE
			MULTPY		;EMT CALL TO ROUTINE
			POP	REG񢄉ӪYE	X,REG
			.IF	EQ,X&1
			.IFT
			POP	Qcc
			.IFF
			INC	SP
			3P
			.ENDC
		gD
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGR3FV[--------------------------------------
񢜮a21a BASIh)ՅROUTIiԑE FOLLOWING SUBROUTINES PERFORM THE BASIC OPERATIONS REQUIREE	OR TH%c0 OPERATIO]  DIAөIC FUNCTIONS
BXA#XT

		PERFORM DIAGNOSTIC FUNCTION EXECUTE.  LCNTAINS THE
		D0cΟu$AFUNCTION RIGHT Uiԓb]

	5iE:		MOV	#D)0;DIAG FUNCgARa񢄉1):C		;CA		ADR+2	NEIST	;PASSED

	2.  D!ԩ񢆊	PERFORM D0cΟu$AFUNCTION Eaթ HE DIAGNOSTIC
		FUNu$ϝ FOLL頃S A TRAILIPRAMET
		USAGE:0bRu	DFXCwpfLBDDR+2	DF		;`ǝI FUNCTION

	3.  DFpK
		PERFORMS S3̋EOK DIAGNOSTIC FUNCTION.
BDէ1ADR:	DFSCLK		;STEP C	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

9.0	KL10 BASIC SUBROUTINES (CON'T)

	4.  DFWRT

		PERFORMS DIAGNOSTIC FUNCTION AND SENDS E-BUS.
		R1 CONTAINS ADDRESS OF LOW ORDER BYTE OF 36 BIT E-BUS
		VALUE.  R0 CONTAINS DIAGNOSTIC FUNCTION RIGHT JUSTIFIED.

		USAGE:		MOV	#DF,R0	;DIAG FUNCTION TO R0
				MOV	#ADR,R1	;36 BIT ADR TO R1
			ADR:	DFWRT		;CALL
			ADR+2	NEXT INST	t ӧBDm BIT aU ԃ FORMAT:

			ADR:	BITS 28-35	;THIS ADR IN R1
			ADR+1	BITS 20-27
			ADR+2	BITS 12-19
			ADR+3	BITS 04-11
			ADR+4	BITS 00-03

	4.1  DFWRTT

		PERFORMS DIAGNOSTIC FUNCTION WRITE.  THE DATA ADDRESS
		AND DIAGNOSTIC FUNCTION FOLLOW AS TRAILING PARAMETERS.

		USAGE:	ADR:	DFWRTT		;CALL
			ADR+2	DATA ADR	;36 BIT DATA ADR
			ADR+4	DF		;DIAGNOSTIC FUNCTION

	5.  DFWIR

		FORMAT SAME AS "DFWRT" EXCEPT SELECTS "LOADIR"
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

9.0	KL10 BASIC SUBROUTINES (CON'T)

	6.  DFRD

		PERFORMS DIAGNOSTIC FUNCTION AND READS E-BUS.
		R0 CONTAINS DIAGNOSTIC FUNCTION RIGHT JUSTIFIED.
		DATA READ IS LEFT STORED IN THE DTE20.

			DEXWD3 = BITS 20-3E	1"دD2 = RjSA04-19
			DEXWD1 = BITS 00-03

		USAGEBD͟Qč,R0	;DIAG FUNCTION T)0			ADR:	DFRD		p̙
			ADR+2	NEXT INST	;PASqb
	6.1	DFRDT

		PEQқS DIAGNOSTIC FUI)ED.  THE DIAGNOSa		FUNCTION FOLLOWS AS A əING PARAMETER.

		USAGE:	ADR:	DFRDT		;pfL			ADR+2	DF		;DIAGNOSTIC·TION

	6.2	DFDVMA DFADB DFVMAH
		VA----- ----- ------

		PERFORMS READ AND UNStͅgGAOF REQUESTED REiԋK	ADDRESS OF DAT()ԟPcARETURNED IN R0 jHAmBT
		FORMAT AS GIVENg EDFWRT".
	DECS4E,K10 DIAGNOSTIC CONSOLE PROGRAM
	--------V[V[--------------------V[

9.0	KL10 BAraOTINES (CON'T)

	7."FDMV

		PERFORDAGNOSTIC FUNCTION AND READS E-BUS.
		R1 CONTAINS 1"RSS OF WHERE TO PUT E-BUS DATA READ AND
"i0AsTINS DIAGNOSTIC FUNCT3 IGHT JUSTIFIED.񢆊5iE:		MOV	#DF,R0	;DIAG·TION TO R0
			3gpbRYR1	;36 BIT ADR TO R1񢄉ADR:	DFRDMV		;C3&			ADR+2	NEXT INST	;PASSEE		36 BIT E-BUS DATA u'҃GE FORMAT:

	"`ĥBaIS 28-35	;THIS ADR IN R1
			ADR+1	BITS 2Y7BDDR+2	BITS 12-19
			1)+g	BITS 04-11
		0bRWaIS 00-03

	DFRDRDMV AND DT	---V[V[---------
	IF "Y0ATIMES OUT WITHOUT COMPLETING THE OPERATITHE TIMEOUT IS REPORTED B(*H SUBROUTINE PACpcAAND
	TREATED AS A FATAL O.

. AMRESEE"hEFORMS THE MASTER RESFNCTION CONSISTING OF A
		SERIES OF DIAGԓC EXECUTION FUNCTIONS.
BDէAGE:	ADR:	MRESEDOM RESET
			ADR+2	NEXT INST	;COMPLETED
񢄹]  SM

		PERFORMS THE ACTUAL START MICRO-COD)OTINE AS
		DESCRIBED IN 3̐UDER THE "SM" CŐ FUNCTION.

		USAGE:	ADNӛ		;CA		ADRlS	A	;ERRORԫRN
			ADRm΋XT INuK

,X.AlC

		PERFORM THE AC`AINSTRUCTION EXEujI)OTINE AS
		DESCRIBEDg g.2 UNDER "EX" Cϙ#UCTION.

		USAGE:	A	OV	#IADR,R0  ;I T R0
			ADR+2	EXCT		ÃLL
			ADR+4	BCb`AҥOR RETURN
			ADR+6	lTAINST	;OK
	DECviԋX L10 DIAGNOSTIC CONSOPPOGRAM
	-------V[V[--------------------V[-

10.0	KL10  ͓NE/DEPOSIT & RAM SUBROUTIi
	B.  PDP-10 EfɝE AND DEPOrj UNCTIONS

		EXAM	;EXAMINE 10b͟VF	DPOS	;DEPOSIT INTO 10 MEMORY
		DPOSVR	q"Пrj ND VERIFY 10 MEMORYCE	ORMATS OF PASSE'Au'ҋD RETURN DATA:

		36 BIT DATA, R0 CONT2gSA1"RSS ON CALL

			ADRBaIS 28-35
			ADRlD2a-27
"DR+2	BITS 12-19
			ADR+3	BITS c
			ADR+4	BITS 00-03

"hD-10 ADDRESS, R1Ω2gSAADDRESS ON CALL

			ADR:	BITS 20-35
	"`ĥlTS 14-19

		ROUTINRTURN jHAC-BITAFOR FAILURE.

		"EXAM", R0 CONTAIPINTER'a ADDRESS ON CALL.
		R0 RETURNS DATA STOPcAADDRESS ON COMPjIN.
BDPOSVR" - AS "DP !L, RETURNS ԃ ADDR頓N
		R0 ON COMPjIN.

		DEPOSIT	VRcYARETURNS WITH C-BIT SFR FAILURE
		WI		  A'-IT SET IF DEPOSIT FAILED
		  B. Z-BIT SIlAINE FAILED
		  C. V-BIT SET IF VERIFY FAILED	ECSYSTEM10 KL10$NOSTIC CONsEAPROGRAM
	V[---------------V[------------------

10.0	KL10 EXAMINE/DEPOS5&APfUBROUTINES (CON'T)

	B.1	PDP-10 EXAMIN Ή DEPOSIT FUNCTIONS, TRAIL3ARAMETERS

		 ͩ		;EXAMINE 10 MEMORY
		DPOST		;DEPOSIT INTO ,MY		DPOSVT		;DEPOSIT AND VERIFY 10 MEMORY񢆊iS TRAIgGAPARAM"CE	PDP-10 ADDRESS, 0 THRU 64K

	SECOND TRAILING PARAMETER

"YABIT D5 LOCK ADDREtƊBb؃MT
	V[

		ADR:	EXAMD3&		ADR+2	10 ADR		;PDP-10 ADDRESS
		ADR+4	DATAbR;36 BIT DATA BL堃)ES

	DPOST
	-VCE	ADR:	'ө		;CALL
	0bRW2	10 ADR		t"P[,Aӧ񢄉DATA 1)	w36 BIT DAT()ԟRE BLOCK ADDRESS

1(O------

"`ĥBbPSVT		;CALL񢄉10 ADR		;PDP-10 ADDR		ADRmăTA ADR	;36ADATA S'× ADDRESS
"`ĥ+6	BCh"ҥ"]ƃ3*ҋ RETURN
	0bRW,΋XT INST	;PASSED RETUS		ROUTINES RET 5$ ASET FOR FAILURE AND
		DPTAd̫RE CODES SAME AS "DPRE.

	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

10.0	KL10 EXAMINE/DEPOSIT & RAM SUBROUTINES (CON'T)

	B.2	SPECIAL PDP-10 DEPOSIT ROUTINES

		D10MON		;DEPOSIT -1 INTO 10 FLAG WORD
		D10ZRO		;DEPOSIT ZEROS INTO 10

		ROUTINES RETURN WITH C-BIT SET FOR FAILURE.

	D10MON
	------

		ADR:	D10MON		;CALL
		ADR+2	10 ADR		;PDP-10 ADDRESS, 0 TO 64K

	D10ZRO
	------

		R1 = ΩTAT ADDQiAS'×
		R0 = COUNT OF LOCATION TO ZERO, UP TO 64K

	B.3	SPECIAL PDP-10 ROUTINES

	CMPR36		;COMPARE 5 BYTE 36-BIT WORDS
	------

		INITIAL:

		R0 = BYTE ADR OF CORRECT DATA
		R1 = BYTE ADR OF TEST DATA

		AFTER:

		R0 = BYTE ADR OF TEST DATA

		C & V BIT SET IF ERROR
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

10.0	KL10 EXAMINE/DEPOSIT & RAM SUBROUTINES (CON'T)

	C.  RAM FUNCTIONS
  
	1.  WCRAM

		PERFORMS WRITE OF C-RAM AT LOCATION SUPPLIED IN
		R0 WITH DATA FROM ADDRESS SUPPLIED IN R1.

		USAGE:	MOV	LOC,R0	;PUT C-RAM LOC IN R0
			MOV	ADR,R1	;PUT DATA ADR IN R1
			WCRAM		;CALL

		FORMAT OF DATA IN BYTES:

			ADR:	BITS 72-79
			ADR+1	BITS 64-71
			ADR+2	BITh[Ɗ		ADRlTS 48-55
			ADR+4	BITS 40-47
			ADR+5	RjSAls
			ADR+6	BITS 24-3#E		ADR+7	BITS 16-LƊ		ADR+10	BITS 08-15
			Ac	BITS 00-07 OF C-RAM񢄉ADR+12	BITS  0-OE FIELD
	DECSYu"c0 KL10 DIAGNOSTIC CONSOLE)ORAM
	----------------------------------V[----

10.0	KL10 EXAMINE"ПSIT & RAM SUBRO$΋S (CON'T)

	1.1 MIs
	PERFORMS C-RAM ZEROING STARTING WITH ADDR頧(LED IN
	R0 AND QiOTE NUMBER OF WORS&ID IN R1.

	CA	DR,R0		;START ADDRESh*OAR0
		MOV	#CNT,LDwfR OF WORDS TO R1
		MICNUL			;CALL

	1̐Mq
	PERFORMS C-RAM F3&IG STARTING WITHbD頧UPPLIED IN
	R0 AND fLNG THE NUMBER O+ϥDS SUPPLIED IN R1 WITH ONES.

	CALL:	MOV	#ADR,R0"]өART ADDRESS TO R0
		MOV	#CNT,R1		;NUMBEH'AD TO R1
		MICFIL			;pfL
	2.  RCRAM
ЋQқS READ OF C-RAM FROM'ÃTION SUPPLIED I)0]DRESS OF STORAGE BLOrRTURNED IN R0.
񢄉SAGE:	MOV	LOC,R0	;PUT CRA&O IN R0
			RCRAM		;C3&
	DATA RETURNE$ApfAFORMAT AS SUPPLIED IN WCRAM CALL.

	3.+׃	PERFORMS WRITE OF kiA ADDRESS REGISTWDSIRED ADDRESS
4СLIED IN R0E		USA]	RADR,R0	;PUT C-PfI R0
			WWADR			;CALL
MICRO FORMAT	  7H A      74          76      A78
   FOR		---V[-------------------------V[-----V[-
 Wt_PA	* VMA *     * AD  * A* T00 *     * T01 *     *
		* SEL1*    
CY *     *     *     *    
 A  *
    +0	   *UJ*U****************************************J*U*
		  64          66          68          70񢄉[-------------------------V[---------------V		* ARM *     * ARM *    
AXM*  *AARXM* A*
       "U EL2*     *c*    
SL2*  *Aqf1U     *
    +1	     
*U***************J*UJ*U********************J*		  56    57  A5s    60          62
"V[---------------V[V[--------------------E	* ----FM ADR---P*AsDUSCADB*     * SCM *  *       		*  4 
 e A1  *  5  * SEL1*    
SL2*     *
    lA U********************J*U***************J*U*******
		  48    49     A 51    52    53 k4    55
	+V[------------------------------V[V[-----
		* ---------MEM--------- *  BR *ΉH!R * COND*
       		* A*  1  *  2  *  h*AU  3  * LOAD*  4  *
    +3        ******J*UJ*U********************J*U************
	(4a i1     A 43    44    45    46    47
	+V[-------------------------V[---------------񢄉UA SEL-*SCADB* MARK* VMA * ARM * -SH/ARMM A  		*  2  *  1  * SE A   * qf2U SEL4H)ř2* SEL1*
    +4	      ************J*U*****J*UJ*U*********************
		  32    33    3 A35    36    37 3q    3#E	---------------V[V[----------V[-----V		* ADB * ----tA#----- * ARXM* VPfG----- *
       		* qf1U  3  *  4  *  5 EL4*  U  7  *  8  *
    +5	      *************J*UJ*U******************************
		  24    25 2m    27    28   A  30    31񢄉[----------V[---------------V[-------------
		*  AD * ADA * -ADA SEL- * ADH [VåAM #----- *
       		*BOOLE* DIS *  2  H1A * SEL2*  0  *  1  *  2  CE A  +6	      ****J*U********************************************BDA- A 17    18    19    20    21    22    23BD[V[-----V[-----V[V[-----------------
		*  MQ * -----COND------ * -------AD SELV[--- * A    		* SE A*A 1  * A*  8  *  4  *  H*AP U
    +7	      ******************************J*U***************J"P a8    09    10  A1e    1h A14    15
"V[----------V[V[V[V[V[-----V[-
		* ---V[----------J FIELD---V[V[------- *H A	*  3  *  4 A*A 6  *  7  *  8  *  9 c0  *H A+8	      *J*U*****J*U**********J*U*****J*UJ*UJ*U**
		  00 a( A02    03    04    05 a6    07
		----V[V[V[-------------------------V[񢄉USCADA* -----SCAD----P*A FE * ---J FIELD----- *
       		* DIS *  4  *  2  *  1  * LOAD*  0  *  1  *  2  *
    +9	      *****************************************************
		                     0     1     2     3     4
		-------------------------------------------------
		*     *     *     * -----------DISP/SPEC------- *
       		*     *     *     *  0  *  1  *  2  *  3  *  4  *
   +10	      *****************************************************	٧fa KL10$ԓC CONSOLE PROGRAM
	-------------------------------------------

10.0	KL10 EXAMINE/DEPOSIT & RAM SUBROUTINES (CON'T)

	3.  WDRAM

		PERFORMS WRITE OF D-RAM AT LOCATION SUPPLIED IN R0
		WITH DATA FROM ADDRESS SUPPLIED IN R1.
		THE WDRAM ROUTINE WRITES BOTH THE EVEN AND ODD PAIR
		OF LOCATIONS IN THE D-RAM AT ONE TIME.  IF AN ODD 
		ADDRESS IS SUPPLIED AS THE D-RAM LOCATION THIS IS
		A PROGRAM ERROR.

		USAGE:		MOV	LOC,R0	;PUT D-RAM LOC IN R0
				MOV	ADR,R1	;PUT DATA ADR IN R1
			ADR:	WDRAM		;CALL
			ADR+2	NEXT INST

		FORMAT OF DATA:

			ADR:	EVEN ADR DATA BITS 13-00
			ADR+2	ODD ADR DATA BITS 13-00
			ADR+4	COMMON ADR DATA BITS 05-00

			ALL RIGHT JUSTIFIED

	4.  RDRAM

		PERFORMS READ OF D-RAM FROM LOCATIONСbAIN R0E	ADDRESS OF STORAGE BLOCK RETURNED IN R0.񢆊5iE:		MOV	LOC,R0	;PUT iA LOC IN R0
			1):RDRAM		;CALL
			ADR+2	NEIST

		FORMAT OF REiND DATA:

			A	AA & B FIELD
		0bRW2	D-RAM J FIELD

	5.  DPf

		PERFORMS SELECTION OF D-RAM ADDRESk NTERNAL
		ROUTINE FOR D-PfPERATIONS
	DEtөEM10 KL10 DIAGNOSTICΧOLE PROGRAM
	-------------------------------V[V[--

MICRO FORj DRAM

   15 -P1gVc   10----8   7  AA  4    3     2     1 A0
	-----------V[V[----------------------------------------FAlA-- A -- * -- B -- *  A *  P  *   * --VAH#ILD ------ *
 EVEN	*P e  3 * 1  2  3 **A  *  E  *   *  7  *  8  *  9  *  10 *
	**********J*U****************************************J*UJ
   15 -/- 13---11 [---8   7   6   P A A 3     2     1     0񢄭[---------------V[V[--------------------V[-----------
 +BU [- A -- * -- B -- *   *   HPA *   * ------ J FIEL[--- *
 ODD	* 1 Ah c  2  3 *   *   *  O  *   *  7  *  8  *  (*AX U
	*****************J*U***************J*UJ*U***************CE   15 -/-  A      A A                Ah A 2     1     0
	                        A          ---------------V[-----
 +4 	    A                          A* ---V FIEL[VU
 COMMON	           A                       *  1  *  2  *  3 
 i  *
	                    A              *J*UJ*U**************

	NOTE: J7 ALSO COMMON Rj RITTEN BY ODD WORD
	      J5 & J6 DO NOT EXIuMICRO FORMAT
FOR RDRAMCE A 15 -/- 13---111a----8   7   6    5    4  A   2  c     E	[----------V[----------V[-----V[-----V[V[-------
 +0	* -- A P*A-- B -- *   *  
   * ------ J FIELD --VA*
 EVEN	* 1  2UP e  3 *   *   *  E  * h A7  *  8  *  9  H1a
********************J*U***************J*UJ*U*************

   -P-_- 13---11   10-VAA 6    5    4    3    A   1     0
	--V[V[--------------------V[---------------V[------
 +2	* -- A -- * -! [- *   *   *  P 
PA* ------ JřD ------ *
 ODD	* 1  2  3 * 1 Ah A *   *  O  * C *  7  *  8  *  9  *  10 *񢄪UJ*U********************J*U***************J*UJ*U******

   15 -/-                      A A          3     2   A   0
	         A A      A          --------------------V[
 +4 	                   A               H[V FIELD ------ *
 COMMON	                A A             *  1  * A*  3 
 i  *
( A                                  *J*U*****J*UJ*U****

	NOTE: J7 ALSO COMMON BIT FROM OWRD
	      J5 & O NOTlIT
	      PC = sЫb ARITY, ODD ғTY INaION
	DECSYSTEX L10 DIAGNOSTIC sSPPOGRAM
	------------V[---------------V[-----E10.0	KL10 EXAMINE/DEPOSIT & RAM SUBROUTIiQs')

	6.  LODAR

		PERFORMS LOADING OF AR RөER.  INTERNAL RjIE
		FOR EaթE OPERATIO ARETURNS C-BIT SI ERROR.

	7.  SETMPH

		SELECTS WHICH MBO(HqPT SYNC UP TO DURING THE
		"LODAR" PROCESk 0 SELECTS ONE OF 4 PLACES'YNC.

		R0 = ]ACHANGE COMING
		R0 = 1	;HALFWAY TWIXT A AND CE	L=A2	;B CHANGE COMING
		R0 = 3	;HALFWAY TW6* gDAA

. ABURST񢆊iFRMS BURST OF M-BOX CLOCK, BURST COUNT SUPPLIED IN R0.

	9.!̗PRM
ҋTURNS ADDR頟!̟CK DEj̩ WORD IN R0 AS kEg	14.0 B.6 CLOCK PARAMETER

	10.  PNTCPU

"hRNTS PRESENTLY S"éC[RAM DATA AND INiNE	E-BOXǓSTERS.  DOTE "ALL" PR3OBX](Nt
		PRgT THE C-RAMg OGICAL FIELD FORMAT Ώ$E		C-RAM A)Eh)աPLIED IN R Ή$EAC-RAM DATA BLOCK
		1"RSS SU&ID IN R1.  kiA DATAOK FORMAT AcE	SPECIbA3"tE.

		USA]	̟C,R0	;C-RAM ADDRESS 3Ra
			MOV	ADR,R1.A(!LrADRESS IN R1
			PNTCRM		;pfLCE	c2.  PNTDRM

		PRINTE D-RAM IN LOGICAL FIELD FORMAT USING THE
		D-RAM ADDRESS SUPPLIED IN R0 AND THE D-RAM DATA BLOCK
		ADDRESS SUPPLIED IN R1.  D-RAM DATA BLOCK FORMAT AS
		SPECIFIED IN "WDRAM".

		USAGE:	MOV	LOC,R0	;D-RAM ADDRESS IN R0
			MOV	ADR,R1	;DATA BLOCK ADDRESS IN R1
			PNTDRM		;CALL
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

11.0	SPECIAL PROGRAM OPERATORS

	1.  PRGCMD

		THIS EPċh EANS  )ORAM TO PERFORM
		OPERATOR TYPE CONSOLE COMMANDS.

		THE ADDRESS OF AN ASCIZ STRING CORRESPONDING TO THE
		DESIRED COMMANDS IS LOADED INTO R0, THEN THE EMT IS
		PERFORMED.  IF R0 = 0, THEN THE CURRENT INPUT BUFFER
		IS USED.  IF R0 = -1, THEN THE CURRENT OUTPUT BUFFER
		CONTENTS ARE USED, THE OUTPUT BUFFERS POINTERS ARE
		RESET TO PREVENT SUBSEQUENT PRINTING.

		THE ROUTINE WILL TAKE THE C-BIT CLEAR RETURN WHEN THE
		COMMANDS ARE COMPLETED.  IF AN ERROR OCCURS THE
		CORRESPONDING ERROR MESSAGE WILL BE PRINTED AND THE
		C-BIT SET RETURN WILL BE TAKEN.

		USAGE:	MOV	#COMMAND,R0
			PRGCMD			;CALL
			BCS	ERROR		;FAILED
			NEXT INST		;PASSED

	2.  PRGNPT

		THIS EMT PERFORMS AS GIVEN IN THE "PRGCMD" COMMAND
		EXCEPT PRΩh(RNTING UTPUT FOR PRINT TYPE
		'KLDCP' COMMANDST'թPUT POINTERS ARE LEF$		PLACE SO THE ԃ MAY BE PROCESSED BY THE pfLNG
		PROGRAM.

	3TNSW

	THIS EM!ϛRgE THE PDP-11 CONsEASWITCHES AND THE PDP-10
5,ЋD IN SWITCHES INTO A 36 BIT WORD AND DEPԧ IT INTO
	THE DTE20 $DTS OMMUNICATION ARPSITCH REGISTER WORD.BjH PDP-11 CONSOLE SWITCHES ARE SWITCHES 0 TO 15 PPP-10
	SWITCH W.A$EADEPOSIT IS DONE  TM, STL & DDT
0͛3SAAND ON ANY PDP-11 CŐ SWITCH OR "SW",ЋE	N SWITCH CHANGE.  C-BIT SET ERROR RETURNc FDEPOSIT & VERIFY FAI
	4.  TENSP
BDԑ4ET PROVIDES A COMMON jHD OF CLEARING TF	PDP-10 RUN FLOP, THE TEN RUNNING CONTROL FLAG AND񢄉HE TEN CLOCK RUNNING CONTROLS.
	DECSYSfa1a DIAGNOSTIC CONSOLE ǥAM
	----------V[V[--------------------V
12.0	DEVICE RjIƊ	A.1  R50UPK

	TH4ET CONVERTS RAD5*OAASCII.  CONVERTS ONE RAD5+ϥD TO
	THREE ASCII B5"]

		USAGE:	R5hK.L
			  RAD50		;RAD50 WORD ADDRESS
			 iÓ"DSCII BYTE STORAGE ADӧ
			BCS ERR		;kaIAIF ERROR

	A.HACR50

	TiMT COբҩh ӇII TO RAD50.  CENNE BYTES OF ASCII
	INPUT INTO THREE WORO RAD50.

		USAGE:	ASCR5DALL
			  ASCII"]CII ADDRESS
			  RAD50		tk0 STOPcAADDREtƊ"aC ERR		;C-BIT SET IF O

	B.1  DTINIT

	THIS EMT INITIALIZEh*H DECTAPE.  SETS THE FIRSTcDABLOCK
	AS THE iS҉ OF THE DEVICE BUFFER FOR SUBSEQUENT REAE	PERATIONS.

	B.2  RXINIT

	THIS EMT INITI3$ڋS THE FLOPPY.  SETS THE F4AUFD BLOCK
	AS "IRST WORD OF THE DEVICE BE FOR uaSQUENT
	OPERATI
	B.3  RgI

	$AEMT IjImE THE RP04 HARDWARE B()řECTING THE DRIVE	DING A READ-IN PRESETRTURNS WITH C-BI)ũc RROR
	AND R0 CONTAIgGAAN ERROR CODE.CE	 PLOAD

	THIS EMT IjILIZES THE RP04 VPPQқING AN "RPINIT" ANDBjHN READING AND VƳ3HE "HOME" BLOCK AND qjTNG UP
	THE INDFPAD FILE DIRECTORY INFION.  RETURNS W5$	C-BIT SET IF ERROR.
	D٧TEM10 KL10 DIAGԓC CONSOLE ǥAM
	-------------------------V[V[--------

12.0	DEVICE ROUTINES (CON'T)񢆊kTAFILE

	THIS EMT gD THE REQUESTED fEA3TE DECTAPE DIRECTORY.

	C.2	RXFILE

	$Aj INDS THE REQUESTED F3"N THE FLOPPY DIQaԟVW
	D."bVATA

	THIS EMT READS EITHER ԧATHE DECTAPE/FLOPPY OR FRO*H RP04.
	READS ԧA"ROPER DEVICE USING THE INFORMATION SETUP³$EACORRESPONDING "INIT" ROM TPFLLOWIDTA
	BLOCKS AS THE FILE IS PROCESSE ETURNh+ɩ)0ACONTAINING
	A POINTER TO AN INFORMATIONOK.

		INFO BLBUFFEH ĉRESS
		       
/VjEACOUNT

	0T SET ND-OF-FILE RETUS
	D.2  DVFRAMCE	iMT READS A DATA BYTEO THE DEVICE BUFi.A WHENԑE CURRENT BUFFER IS USED UP IT CALLS THEV5 AROUTINE
	TO READ THE NEXT DATA BLOCK AND THE!ϝTINUES.  THE DAFBYTE IS REiND IN R0.
]3  DVWRD

	TH4ET READS TWO DATA BYTES AND COMBINES THEM INTOEBbAA WORD WHICH IS RETURNED IN R0.
	DECSYu"c0 KL10 DIAGNOSTIC CONSOLE)ORAM
	---------V[-----------------------------

12.0	DEVICE SԓiQCON'T)

	E.1  DTRDFL

	AS "DVDATA" EЩEIFICA,EADS aԃW
	E.2  RXRDFL

	AS "DVDATA" EXCEPT SPECIFICALLY READS FLO,
	E TWTFL

	$Aj RITES$EADECTAPE DATA BLAPDRDFL MUST
	HAVE BEEN DONE TO READ THE FILE D5 LOCK.  THEN THE ԃɧ REPLACED EXCEP#O$EALINK 3 HE BLOCK RkғTTEN.

	 AV+ԍE5$IfAWRITEh*H FLOPPY DAPBOCK.  A RXRDFL MUSTBdA!EN DONE TO Q`A"ILE DATA B]*HN THE DATA
	IS REPL0AEXCEP#O THE LINK 3 HE BL堥E-WRITTEN.񢆊F.1  )EE5$I EMT PERFOSiPATUAL DATA BLOCK READO THE DECTAPE.
4ԫS5$ -BIT SET IF ERROR.

	F.HRQ`
	THIS EMT PERFORMh*H ACTUAL DATA BLOCK READ FROM THE FLOPPY.
	RETURNS WITH C-BIT SET IF ERROR.

	F.3  DTWRT

	THIS EMT PERFORMS THE ACTUAL DATA BLOCK WRITE TO THE DECTAPE.
	RETURNS WITH C-BIT SET IF ERROR.

	F.4  RXWRT

	THIS EMT PERFORMS THE ACTUAL DATA BLOCK WRITE TO THE FLOPPY.
	RETURNS WITH C-BIT SET IF ERROR.
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

12.0	DEVICE ROUTINES (CON'T)

11A*BqF	THIh"ͩԫRNS THE DECTAPE PARAMETER BLOCK BASE ADDRESS.

		DECTAPE PARAMETER BLOCK
		-----------------------
	   0.	DTBLK	;DECTAPE REQUESTED BLOCK NUMBER
	   1.	CASAV	;DECTAPE CURRENT BUFFER ADDRESS
	   2.	WCSAV	;DECTAPE WORD COUNT

	G.2 RXBASE

	THIS EMT RETURNS THE FLOPPY PARAMETER BLOCK BASE ADDRESS.

		FLOPPY PARAMETER BLOCK
		----------------------
	   0.	RXBLK	;REQUESTED BLOCK NUMBER
	   1.	RXCMD	;COMMAND
	   2.	RXWCMD	;WORKING COMMAND
	   3.	RXBLKT	;BLOCK NUMBER
	   4.	RXTADR	;TRACK ADDRESS
	   5.	RXSADR	;SECTOR ADDRESS
	   6.	$$ITS1	;"$RXITS" COUNTER
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

12.0	DEVICE ROUTINES (CON'T)

	H.1   RPFIND

	THIS EMT FINDS THE REQUEu"AfEAIN TH)Pa4 DIRECTORY.

	CALL:	R0 = POINTER TO F3"3bN RAD50
		R1 = POINi O RETURN STORAG!LCK
			1. CORE ADR OF FIL"ECRIPTOR IN DATA BLOCcE		2. CYLINDER NUBDg. TRACK/SECTOR fR

	IF ERROR, THE C-BITiET ON RETURN WITH R0 CONTAINING AN 
	ERS ODE.

	H.2   RPLKUP

5$I EMT LOOKS UP TPFLE IN THE RP04 DIRECYABY USING
	"RPFIND" THEN TRANSFERS THE INFORM5$ϝ"ҩAINING TO THE
1̋'HE FILE DESCRIP AE BLOCK.

	CA	OINTER TO FILE NAME 3RD50
		R1 = STOQPAӧ FOR FILE DESCRIPTOR

	IF ERROR, THE CA4ST ON RETURN WITH R0 sTINING
	ERROR C"A4GVEN UNDER "RPFIND".CE	.3  RPRDFL

	$AEMT READS A FILE DATA BLOCK FROM THE RP04.  USED B#E	EDVDATA" WHEN READING FROM THE RP04.

	pfLu4 { POINTER TO FILE DEStЩOR

	RETURN:	L=AΩER TO INFO BLOCK
		,W UFFER ADDRESS
"D]ԋ COUNT

	IF ERROR,$EAC-BIT IS SET ONԫRN WITH R0 CONTAINING AN ťROR CODE.
	DECSYSTXAKL10 DIAGNOSTICΧ"ROGRAM
	-------------------------------V[V[--

12.0	DEVICE RO$΋S (CON'T)

	H F

	THIS EMT WRjE A FILE DAPBOCK T*H0i DISK.  ALSO
	QkғiHE DIRECTORY BLOCK UPDATING WORDS WRITTE$ARPEOF
	SELECTED.

	CALa = POINTER TO F3"ESCRIPTOR
		BUFADR = ADDQiAOF DAPBFFERBD«A= NUMBER OF WORDS TORITTEN
		RPEOF = BIT 15 = 1 IS WRITE EOE	IF ERROR, C-BIT SET ON R*ҝ WITH R0 CONTAIgGA3EROR
	CODE.

	H.5  RPREAD

	THIS EMT"ҍORMS THE ACTUAL DATA BLOCK READ FROM THE RP04E	ETURNS WITH C-BIT SET IF O.

	H.6  RPWR5	THIS EMT PERFORMS THE Au* DATAOK WRIPT THE RP04.ҋTURNS WITHT SETc RROR.񢆊ARPADDR

	THIS EMT sЫTES THE RP04 PH4Ã ĉRESS USING THE CURREPOSITION AND TH!LrOFSET TO THE REQUIRED ԃ BLOCK.
	DECS4E,K10 DIAGNOSTIC CONSOL(RGRAM
	--------V[V[--------------------V[

12.0	DEVICEթ3A(CON'T)

	H.8  RPB4
	THIS EMT RETSA"P04 PARAMETER BLOCK PiAADDRESS.
		RP0(AAMETER BLOCK
		---------V[------
	0.	FIL"ECRIPTOR BL		0/ FILENAME IN RAD50
		1/  "Y/AFILE EXTENSION IN RAD50
		3/ CREATION D5""Z/APHYSICAL BLOCK NUMBECE	5/    "
		6/ NaE ORDS ALLOCATED
		7/    "
		8/ NUMBER O+ϥWITTEN
		9/    "
		,DP-11 LOAD ADDR"X_ PDP-,PSART ADDRESS
		12/ FILE TYPE &̋ STATUS
		13/ CHECKSUM
"X_ 0
		15/ 0
		-ET POSITION
		17/   "
	18.	WRDCNT		;REAғPWRD COUNT
	19.	BUFSIBDUFFERڋ
	20aUADR		;BUFFER ADDRESS
	21.	OFFSET		pҥENT Oѩũ񢄲e.	TRKSCT		;CURRENT TRACK & SECTOR
	23.	vfNR		;CURRENT CYL3E
	24iPAST		;INDEX FIL&A!LCK
	25.	RlC		;INl ILE CURRENT BLOrƊ26.	RPIXCY		;INl 3"YLINDER NUMBER
	27.4ITS		;INDEX FILE)AK & SO
	28.	RPIXNB		;INDEX FILE LENGTH IN BLOr,RPFDCY		;FILE DIRECTORY CYLINDER NUMBER
	30.4FTS		;FILE DIRECYATRACK & SEu'	31.	RPFDЄwFILE DIRECTORY gGH IN BLOCKS
	32.	NAMRAD		;RAD50 FILE NAME
	l	. A"
	34.			;RAD50 FILE EXTENSION
	35.	$RgF		;"DVDATA" POINTERS, BUFi DDRESS
	36.			bDA, BYTE COUNT
	37.	WRTBAK		;CORE ADDRESS OF F3"ғPTOR
	38.			;CYLINDER NUMBER
	39.			;TPaA)ŇTOR NaE
	40iPwWRITE EOF FLAG, BIT15=1= EOF
	DECSYSTEM10 KL10 DIAGNOSTIC sSLE PRA
	-------V[V[-----V[---------------E,0DEVICE ROUTINES (CON'T)

	H.9	RPERROR

	TiMT TRANSLATES TPREROR CODE AND PR3SA"	APPR)ITE ERROR ME.

	ON 3RES PSTթINES QjUN WITH THET SET
	AND R0 CONTA3Ώg RROR CODE.񢆊"Ӌ CODES ARECE"VA= UNIT NUMBER INCORR		-2 "RVE UNAVAIL0E		-3PDIVE INIT ETA1
		=A֋gI ERROR 2
"VA"RVE INTI ERROR 3
		-OME BLOCK READ O񢄉[OT HOME BLOCK
		-10 = INsRuFLE SYSTEM NAME
		-1(O INDEX FILE
		-12 = NO DIRECTORY FILE
		-13 = READING PAST EOF
		-14 = BLKSIZ POSITION ERROR
		-15 = READ ERROR
		-16 = ATTEMPT TO CHANGE ALLOCATION
		-17 = BUFFER SIZE
		-20 = CURRENT POSITION
		-21 = INSUFFICIENT ALLOCATION FOR WRITE
		-22 = DIRECTORY REWRITE FAILURE
		-23 = DATA BLOCK WRITE FAILURE
		-24 = END OF FILE
		-25 = RAD50 CONVERSION ERROR

	H.10  RP04 INDEX BLOCK FORMAT

	WORD 0		;BIT 15 = 1, LAST BLOCh'A3E̋
			pA-P=A0, NOT LAST BLOCK
			;BITS 14 TO 0, NUMBER OF LAST 3-WORD ENTRY
			;IN USE IN THIS BLOCK.

	WORD 3I+1	;FILE NAME IN RAD50
	WORD 3I+2	;   "   
	WORD 3I+3	;FILE EXT IN RAD50

	;OF LAST FILE IN THE CORRESPONDING BLOCK OF THE DIRECTORY
	;FILE.
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

12.0	DEVICE ROUTINES (CON'T)

	H.11  RP04 HOME BLOCK FORMAT

	PDP-11 WORD	CONTENTS
	-----------	--------

	98-103		"KLFEDDCS" IN ASCII.  IT STANDS FOR "KL10
			FRONT END DOUBLY DIRECTORIZED CONTIGUOUS
			STRUCTURE".

	104		1 = SYSTEM PACK, CYLINDERS 406 TO 409 ONLY
			3 = DIAGNOSTIC PACK, 0-399 & 406-409

	105-106		PHYSICAL BLOCK NUMBER OF INDEX FILE
	107		NUMBER OF CONSECUTIVE BLOCtOgDX FILE	108-109		PHYSICAL BLOCK NUMBER OF DIRECYAfE	110		NUMBER OF CONqaթIVE BLOCKS OF D4éORY FILE

	111-112		PHYra BLOCK NUMBER OF ALLԓON FILE
	113		fH'ACONSECUTIVE BLOr頟F ALLOCATION FILE

	114X	PHYSICAL BLOCK NUMBER OF BAD BLOCK FILE񢄱c6		NUMBER OF CONSECUTIVE S'×S OF BAD BLOCK fE
	117-118		PHYSICA!LCK NUMBER OF EXTENDED HOME BLOCK
	119		NUMBEH'AsSC BLOCKS OF EXTE'͋ BLOCK

	120-,,ACII CHARACTERS kI#IE STRUCTURE
			FUNCgA.  NORMALLY EITi EviԋM PACK
			OR "DIAGNOSTICS".

	126-131"XA4ɓ CHARACTERS GIVING "1&ɝISTRATOR" OF
	"jH"P[11 FILE STRUCTURE ON$I PACK.

	132-,ۉRESERVED, MUST BE ZERO.
	DECSYSTEM10 KL10 DIAGNOu$ACONSOLE PROGRAM
	----------------------V[V[-----------

12.0	kIE ROUTINES (CON]1	KLDCP/RXDP - RX01 iˋTTE FORMAT

	"0cΟSTIC CONSOLE, KLDCP,gDARXDP, THE PDP-1()Xc1
	MONITOR, USES THE RX0("IKETTE.

	THE DISKE"ONTAINS 494 BLOr頟5m WORDS EACH.  THE
	ORGANIZATION OF THE V"PAiˋTTE IS AS GIVEN BELO	EACH BLOCK ISPCgDR AND 8 SECTORSk FROM THE ֓OUS
0Ok HIS IS DONE TO A*H FASTEST ACCESS TIME ON THE
	RX01.

	V[-------------------------V	I	BOOTSTRAP		I0OK 0
	-------------------V[-----V	I	M2DOCK 1
	I				I
	---V[-------------------------
	I	MFD2			I	BA2
	I				I
	------------V[---------------E	5cDABLOCKS		I	BLOCKS 3 THRU 6
	I	(USER FILE$ҋCTORY)	I
	I				I
	-------------------------V[---
	I	BIT MAP BLOCK		I	S'× 7
	I				I
	-V[-------------------------FI	RXD&ϝITOR	2DOCKS 10 THUP4o
	I	(COREfE)		I(UP TKS"d	-------------------V[---------
	I	FQb˧		I	BLOCKS 50 THRU 7	I	FOR STORAGE	2DkS BLOCKS FREE
	-----V[---------------V[V	DECSYSTEM10 KL10 D0cΟSTIC CONSOLE PRA񢄭[--------------------V[---------------E,0DEVICE ROUTINES (CON
	I.2	MFD #1 CE(ASTER FILE DIRECTORY#E	--------------V[--------------
	I	LINK T&Ɖ2		I
	--------V[----------V[-----
	I	INTERLEAVE FACTOR (1"d+V[-----------------------------
	I	BIT MA)ԃUBOCK	I
	------------V[---------------E	4'ɝTER TO BIT MAP 1	I
	-------------------V[V[----
	I	POINTER TO Rj AP 2	I
	------V[V[-----V[-------
	I	POINTER TO BIT MAP	-----------------------V[-----
	I	POINTTAMAP 4	I
	------------------------------V2DПINTER TO BIT MAP 5	I񢄭[-----V[-----V[-----------
	I	0 (ZERO)		I
	-----V[-----V[V[--------
	I	UNUSED			I
	I				I
	-----V[---------------V[---
]4	MFD #2 CONTEN(4E FILE DIREu'ҳ)

+V[---------------V[---------
	I	0
'OAEAMFD'S	I
	----------V[---------------V	I	UI0c			I
	---------------------------------ΩER TO UFD (3)	I
	---------------------------V[-
	I	# OF WORDh$AEACH UFD	I,XQ8) WORDS
+V[---------------V[---------
	I	0			I
	-----------------------V[V[
	I	UNUSED, ONLY ONE USER	I
	I	ID ON D4ũTE		I
	-----------------V[-----------
	aӳSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	----V[V[-----------------------------

12.0	DEaASԓNES (s')

2W5AFILE DIRECTORY BLOCK (UFD)

	-----------------------------V	I	L3O NEXT UFDObdQOR 0 1LST BLOCK)
	---V[V[--------------------
	I	FILE ENTRY # 1		I
	V[---------------V[V[---
	I	FILE ENG
	--V[----------V[----------E	"D"DBd		I
+V[----------V[--------------
	I	F3")YA# 28		I
	"Y8AfEAENTRIES		Ii FD BLOCK		I
	------V[-----V[----------F	I.65cDAFILE ENTRYқAT
Bb*ƉOK HAS ROOMANFLE ENTRIES.

	EACHcDAFILE ENTRY CONT2gSA(+ϥA FOLLOWS:

	WORD 1 AND BcI'AE IN RAD50 CODE.

5҉ 3		FILE EXTENSION IN RAD50 CODE.

	WORD 4		FILE CREATION DATE

	WORD 5		PROGRAM'S LOGICAL END ADDRESS.

	WORD 6		FILE'S FIRST BLOCK ADDRESS.

	WORD 7		FILE LENGTH IN # OF 256 WORD BLOCKS.

	WORD 8		FILE'S LAST BLOCK ADDRESS.

	WORD 9		PROGRAM'S LOGICAL 52 VALUE.  (ACT11 USE).
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

12.0	DEVICE ROUTINES (CON'T)

	I.7	BIT MAP BLOCh#Oj񢄭[-----V[V[----------------
	I	LINK TO NEXT MAP BLOCK	I	(OR 0 IF LAST BLOCK)
	---------------------------------
	I	MAP #			I
	---------------------------------
	I	NUMBER OF WORDS IN MAP	I	74(8)
	---------------------------------
	I	LINK TO FIRST MAP	I
	---------------------------------
	I	MAP FOR BLOCKS 0 - 17	I
	---------------------------------
	I	MAP FOR BLOCKS 20 - 37	I
	---------------------------------
	I				I
	I				I
	I				I
	---------------------------------


	A BIT MAP BLOCK REPRESENTS 960(10) BLOCKS ON THE DISK.
	(60 WORDS X 16 BITS PER WORD = 960)


	I.8	DEFINITIONS

	   1.	LINKED FILE

	BLOCKS OF DATA DO NOT HAVE TO BE CONTIGUOUS ON THE DEVICE.
	THE FIRST WORD OF THE DATA BLOCK IS USED AS THE LINK TO THE
3ة ԃ BLOCk SABLE DATA IS 255 WORDS (510) BYTES PERBaLr ALAST BLOCK OF A LINKFLE CONTAINS A L3ORD OF
	0 TO INDICATE TH5I IS THE LAST FILE BL
	   2.	CONTIgէ̋

	BLOCKS OF jAAARE PHYISICALLY CONTIGUOUh'ATHE DEVICE.  ALL
	DATA WORDS/BYTES CONT2g ATA USED FOR STORAGE OF CMAGES.
	THERE 4N FORMATTING DATA.
BP A3.	DATA BLOCK SIZE

	THE STANDARD BLOCK SIZ$AM[ ORDS (512 BYTES+  ԃ
	BLOCK MAY BEέE TO A SMALLER Piɇ3DVICE BLOCK SIZE
	AN$ADEVICE DEPENDEN1"çYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAMBV[V[--------------------V[----------

1k	X O PDP-11 DTE20 COMMAOERATIONS

	TH$ΩER-COMPUTER COMMUNICATIONS IS PERFORMED THRU USE OE	HE DTE20 COMMUNICATION AREA, COMPLETION  ǧgDA10/11
	DTE20 VECTORITERRUPTS.  THE (-c&ODS THE COMMAND
	WORSTS THE PDP-11 DBAD THEN WAITS IN A FL1ƊCHECK TILL THE sЙETION FLAG IS SET.

	DAPFOM THE PDP-10 IS EITi ASSED USING THE'AVjE	OF THE COMMAND WORD OR BY THE PDP-11 Efɝ3E$DTT11".

	DATA FRPTE PDP-11 IS DEPԋ$ΩO "$DTF11".

0W APDP-10 OPEPjIN LOOBD͟VEI	AC0,COMMAND񢄉RDEXX		;GO TO DTE20 ROUTINE
		...CONTINUEċ	;RESPONSE IN AC0

	B. "P[10 DTE20 ROUTINE	$DTEXX:	SKIPE	$DTFLG		;I"ҥUPT FcET ?BDȃ	;YES, LAST OPER NEVFNISHED
		SKIPE	$DTOPR		;OPER IN PROGRESh#LG SET ?
		HALT	.		;YES, iAOPER NEVER FINIr"BDӋTOM	$DTOPR		;SET OPER IN PROGRESS
		MOVD0,$DTCMD	;PUT COMMAND IN EPT WORD
		SETZM	$D	;CLEAR RESPONSE WORD IN *		AOS	$DTSEQ		;sΩ OPERATION
		CONO	DTE,DOEL	;SE(D-11 SjU BIT
		SK4'	IDTFLG		;WA5FR PDPXO SETA񢄉RST	.-1
		SETZM	$DT#;CLEAR INTERRUP#LE	MOVE	AC0,$DTF11	;PUTӡONSE IN AC0
		qjZ)"TPR		;CLEAR OPER IN PSҋSS
		RTN			;REiNAUER CODE
	DECSYSTEM,K10 DIAGNOSTIC Cϙ(RGRAM
	-------------V[---------------V[V[

13.0	KL10 TO PDPXTE20 COMMAND OPԓQCON'T)

	C.  PDP-1"T20 INTERRUPT RO$΋:
	    USED FOR PDP-11 PALINE CLOCK OPER5$ϝS.

	144%S    $DTRPT	;VECTORED TO HERE
񢄤T_	0
		CONSO	DTE,DOORBELL	;10 DOORBELL SE"dAT	.		;NO, HOW DID WEAHERE THEN ?
		sO"LEARBELL	;CLEAR DOORBELL
		SKIPE	$DTCLK"]ԑ4DE20 CLOCK INTERRUPT E	JRST	$CLKDTE		;1iACOCK OiAIONS
		HALT	.		;NO, INTERRUPTԑ NO CAUSE

	$CLKDTE:SETSDTCLK		;CLEAR CL堍c		SETOM	CLOCKF		;SET DIAG CLOCK FLAG (OPg΃F	SKIPE	$DTCI		;ANY UqiSAINSTRIN ?
"lC	$DTCI		;YES, DO USERS REQUEST
		JIDTRPT"]ҋufAPROGRAM

	D.  PDP-10 DTE20 INITIALIZAT3 OUTINE:

	$DTg:MOVE	0,JSR $DTRPT]
		E0aY144		;SETU"T20 VEu'AINSTRUCTION
		qjZ	$DTFLG
		SETZRDs%;CLEAR DTE20 EPT ARE#E	SETZM	$DTCI
		qjZ	$DTT,F	SETZM	$DTF11
		SETZM	$DTCMD
		SETZM	$)ţ񢄉ETZM	$DTOPR
		SETZM	$DTCHR
		RTN
	DECSYSTXAKL10 DIAGNOSTICΧOLE PROGRAE	[----------V[---------------V[-------

13.0	KL10 TO PDP-11 DTE20 COMMAND "҃gΧ (CON'T)

	E.  PDP-10 DTE20 EPT COMMUN0ԓONS AREA

	$STD=	440		;(-c0 DIAGNOSTIC ST4 DDRESS
	$DDT=	441		;PDP-10 DDT START ADDRESS񢄤i42		;PDP-10 LOADER START ADDRESS
	$STM=-3.D-10 MԟR STAUAӧ

	$DTFLG=	444		;OPERATION COMPLETE FLAG
	$DTCLK=	445		;CAINTERUhTAFLAG
	$DTr^iwCLOCKgTRRUPT INSTRUCTIBRDT11=	447		;PDP-10 TO PDP-11 ARGUMENT
	$DTF11Z5a		;PDP-10 FROM (-c( ҏUMENT

	$DTCMDk"DDP-10'DP-11 COMM3 ORD
	$DTS^iw"aE5$ϝ SEQUANUMBER
	$'Х=	453		;OPERATION IN)OQiAFLAG
	$DTr)=Z	;LAST TYPE!ȃPaԋR

	$DTMTD=	455		;IOR TT('թPUT COMPLEPFAG
	*MI=	456		;MԟR TTYgP#LE	$DTSWR= 4ĉwsSLE SWITCH REGISTER
bESYSTEM10 KL10 D0cΟu$AsSLE PROGRAM
	------------V[V[--------------------E14.0	KL10 DTE20 COMMAND CODES

	1.	DTE20 COMMAND WORD

		CMD CODE  LOWER BYTE
	        /  4     /    8     /
		/-------------------/

	2.	COMMAND CODES

	0 - TTY OUTPUT, LOW BYTE IS ASCII CHAR

	1 - PROGRAM CONTROL
		0 - HALT
		1 - FATAL HALT
		2 - ERROR HALT
		3 - END OF PROGRAM
		4 - END OF PASS
		5 - CLOCK PARAMETER
		6 - "DIAMON" FILE SELECTION
		7 - "DIAMON" FILE READ
		10 - PDP-10 PROGRAM COMMAND

	2 - s'×ΩS		0 -$ӃS"		1 - ENABLE
		2 - ENABLE & WAIT
		3 - READ CLOCK COUNT

	3 - SWITCHES

	4 - TELETYPE OUTPUT, LOW BYTE IS ASCII CHAR

	5 - TELETYPE INPUT, CHAR DEPOSITED INTO $DTF11

	6 - PRINT CONTROL
		0 - PRINT NORMAL
		1 - PRINT FORCED

	7 - DDT TTY INPUT MODE, CHAR BASED OPERATION

	10 - MONITOR TTY OUTPUT, LOW BYTE IS ASCII CHAR

	11 - MONITOR MODE CONTROL ON

	12 - MONITOR MODE CONTROL OFF

	13 - PASS TEN MONITOR MODE STATE

	14 - 17 - RESERVED FOR EXPANSION
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

14.0	KL10 DTE20 COMMAND CODES (CON'T)

	A.  TTY OUTPUT

	1. THIS ROUTINE RESETS THE PDP-10 INPUT POINTERS, FLUSHES
	   ANY EXTRA TYPEIN.
	2. PICKS UP LOWER BYTE OF DY0As̓ND WOQ	   STRIPS TO 7 BITS AND CALLS THE "$LDB jIE TO PUT
	   THE CH4éER INTO THE OUTj UFFER.  THIS BUFFER GETSBP APRINTED UPON INSERTIO A LINE FEED, A̙'AA NULL
	   CHAPaԋR OR UPON EXCEEDING THE BE CAPACITY OF 140
	   BYTES.
	3. NOTIFIPP-10 TO CONTINUE

	B.  ǥAM CONTROL

	+HLT, CLEARS PDP-10 RUӤΏ FLAG AND REPORTS
	   "KL10 HALTED PC/123456KTRTURNS TO CONSOL&ω2. FATAL HALT, s"h(D-10 CLOCK FLAG SCOCK INTERRUPTS
	   "ANOTIFIES THE PDXACNTINUE.  THE PDP-10 SUBROUTINE
	   PROGPf3& RANSFER TO DDT IF LO1"AOR HALT AT THEBP AǥAM START ADDRESS.
	kEROR HALT, CLEAR"P[10 CLOCK FLAG AND PDP-10 RUNNING FLAG,
	   THEN N$ƓES PDP-10 TO CONTINUE.  THE PDP-10 WILL "AfT]
	4. END OF PROGRAM(EFORMS THE "ERRE jIE TO RETURN
	   TO sSLE MODE IF RUNN3gD[ALONE, OR TO PROCEED'	   THE NEXT PRA IF RUNNING UNDER SCRIPT "҃TION OR
	   THE "J"gDRECT COMMAND FIPOԓON.
	5. END OF PASS, PERFORMS THE "EOP"թ3O REPORT 
	   "END PSS #." AND DECRbΩ$EAPROGRAM ITERATICUNT
	   ACECK FC&EION.  CONTINUE ǥ3POERATION IF
	   ALL REQUESTED ITERATIONSiEANOT YET COMPLETED.  IF
	CMPLETED, PERFORTE "ERREOP" CALL AS ABOVE.񢄠A NOTEH(D-10 PS҃AE PRESENTLY SETUP TOПRT
	   COMPLETION OF THE FIRST PASS AND$E EVERY HUNDRETH PASS.
	aӳSTEM10 KL10 DIAө0CNSOLE PROGRAM
	------------------------V[--------------

14.0	KL10 DTE20 COMMAND COD(ON'T)

	B.  PROGRAM CONA(CON'T)

	6. s'× PARAMETER, DEPOSIT INTO *Fc1 THEҥENT PSŧSOR
	   CACONTROL PAPfũER WOQ ATHIS DAsTINS THE CLOCK
	   SiC,  CLOCK RATE ACr"NABLE PARAMETERS.
BP AFORMAT:

		CL堧iC, BITS 32 & 33
		  ORMAL
		  1 = iBDA2 = EXTERNAL
		  3 *ΫSED

		CLOCK PjEYԧ 34 & 35
		  0 = FU	  1 = 1/2
		 =A+		  3 = 1/8

		CACPEABLE, BITS 0,1,H g񢄉A BIT 0 = ENABLE CACH		  BIT 1 = ENAS"ACHE 1
		  BIT 2 = ENABL!HE 2
		  BIT 3PEABLE CACHEƊ	DECSYSTEM10 KL10 DIAGNOSTIC Cϙ(RGRAM
	---------------------------------V[V[

14.0	KL10 DTE20 s̓ND CODES (CON'T#E0 APROGRAM CONTROL (CON'T)

	7.  "DIAMON"̋̋CTION

	WHEN THIS s̓ND IS PERFORMED$MST PRϫSLY HAVE
	LOADED INTO THE OUTj UFFER THE REQUESTED FILE fAAND
	EXTENSIONT4CMMAND THEN TRANSFERS THE OUTPUT BUFFER
5'PIPUT BUFFER, PROCESSEh*H NAMElTY SETS$EALOAD
	CONTROL TO HELP, SETS THE 'D0cL' TO sTFLE PROCESSING
	AND PASSES CONTROL TO THDVFIL" ROUTINE T&OKUP TFFILE.

	WHEN "3"S FOUND "DI" RETSATO "DIAFND" WHIrSTS
	THE LOW 16ԧ HE $DTF11 WORD TO ZESAD DOES A PDP-10ßMMANDΩINUE.

	IF THE FILE IS NOT FOUND "DEVF3 *ҝS TO "DIANF" WHICH SETS
	THE LOW 16 BITS OF "IDTF11 WORD TO -( Ή DOES A PDX	COMMAND sTNUE.

	8.  "D0fϝ" FILE READ

	THIS COMMAND PROCESSES DATA FS栩PSLECTED FILE.  UP TO FIVE
	ASCII CHARACTRE READ FROM THE INPUT FIPLNE AND COMBINEDɝTO A 36 BIT PDP-10 WORD WHICH IS THEN DEPOSITITE
	$DTF11 WORD AND A PDP-10 COMMAND CONgU"ҍORMEDDTA
	4PӧED IN THIS MANNER WITH A NEW FILE DATA LINE REQUESTED
	WHENѫIRED.+ȋN THE END-ƓPI REACb  36 BIT
	MINUSEA4DPOSITED INTO THE $DTF11 WORD, TO SIGNIFY EOFBjOATHE PDP-10, ANDPPXACOMMAND CONTINU(EMD.
BjH "DIAMON" fEASELECTION 3 b jIWOERATEƥOM WHATEVEH"EICE IS SELECTED.  TH4Is*ċS THE RP04E	AE AND THE 01a͛UNICATIONS LINE.
	aӳSTEM1%c0 DIAGNOST0CNSOLE)ORAM
	----V[-----V[V[V[----------VCE1i.0	KL10 DTE20 COMMAN!ωES (CON'T)

	+ a)ORAM COMMAND

	WHEN THIS͛3 S PERFORMED THE PDP-,MST PREVIOUSLY HAVE
	LOADED INTO THE OUTPUT BUFFER THE APPROPRIATE "KLDCP" COMMAND.
	THIS COMMAND IS THEN USED TO CAUSE A "PRGCMD" TO BE PERFORMED
	USING THE CONTENTS OF THE OUTPUT BUFFER.

	WHEN THE COMMAND IS COMPLETED SUCCESSFULLY THE LOW 16 BITS OF
	THE $DTF11 WORD ARE SET TO ZERO AND A PDP-10 COMMAND CONTINUE
	PERFORMED.

	IF THE COMMAND HAS AN ERROR THE LOW 16 BITS OF THE $DTF11 WORD
	ARE SET TO -1 AND A PDP-10 COMMAC$Ϋ(EFORMEBgOE: EXTREME CARE MUST BE USED WHEN USING THIS OPERATION AS IT
	      IS POSSIBLE TO DO ANY "KLDCP" COMMAND INCLUDING MASTER
	      RESETTING THE KL10.  ALSO, NOT ALL COMMANDS WILL RETURN TO
	      CONTINUE THE PDP-10.

	C.  CLOCK CONTROL

	1. DISABLE CLOCK, TURNS OFF CLOCK INTERRUPTS OF THE PDP-10 BY
	   THE PDP-11.
	2. ENABLE, TURNS ON CLOCK INTERRUPTS OF THE PDP-10 BY
	   THE PDP-11.
	   ON EVERY CLOCK TICK THE PDP-11 WILL DEPOSIT -1 INTO THE
	   "$DTCLK" LOCATION OF THE PDP-10.  THE PDP-11 THEN
	   DOORBELL INTERRUPTS THE PDP-10.
	3. ENABLE & WAIT, EXAMINE $DTT11 TO GET THE CLOCK WAIT COUNT AND
	   THEN AFTER WAITING THIS MANY CLOCK TICKS PERFORM AS GIVEN IN
	   2.  ABOVE.  ONLY THE LOWER 16 BITS OF THE CLOCK WAIT DAT(FOM $DAARE USED.
	4. READ CLOCK COUNT, DEPOSITgT	"T11 THE CLOCK COUNT S3	   ENABLED BYdԑER OF THE CLOCK ENABLE CO`ΉS.

	NOTE: EITHER TE CLOCK ENABLE s̓)LSO SYNC'S THE (-c0
	      PROGRAM TO THE s'× BY CLEARING THE CLOCK FLAG AND THEN
	  AWAITING FOR IT TO TICK BEEARETURNING CONTRT THE
	      PDP-10 ǥAM.
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PRA񢄭[---------------V[V[---------------E-0KL10 DTE20 COMM3 "A(CON'T)

	D.  SWITr"
	1. READ SWIE"EOSIT CONTENTS OF WORD TYPED IN BY
	   "u fD INTO PDP-10 $DTF11E	e. THE PDP-10 CŐɩCHES ARE DEPOSITED I'IDTSWR
	   WHENgYAOF THE START COMMANDS ARE PERFORMED AND ALSO
	   "ATHEY ARE CHANGED BY CHANGING THE PDP-11 sSF   SWITCHES OR WHEN "ESW" COMMAND IS AMDIFY
	   THE LOWER LSITCHES.

	E. "̋hEAINPUT

	1. THIS RO$΋ CHECKS FOR AWA5$Ώ TYPEOUT, IF SO, PRINTS I2. CHECKS PDP-10 INPBFFER, IF CHARACiSA5əABLE, PASSES
	   ONE TO THE PDP-10 THRU	"T,W AIF NONE AVAILABLE, C3&SATHE
	   "TTILIȐR$΋ TO PROCESS A L3F TYPEIN. $EATYPEDg( INE IS THEN TRAET THE PDP-10 INPUT BUFFER & A CHAR
	   P4ŉ TO THE TEN THRU $DTF11.BP AUSING THE "TTIL3 OUTINE ALLOWS ALL OF THE `ԫRES
( F THIh)OgEATO BE USED TO PROVID)UOUT &
	   CONTROL U CAPABILITIES.
	3. IIES THE PDP-10 TO CONTINU+ɩH A CHARACTER IDX
	F.  DDT TTY INPUT MODE

	1. THIS RjIE IS A CHARACTER BASED OPERATION AND PASSES T4"ɝ
	   FROM THE KEYBOARD D4éLY TO THE PDP-1+ɩH NO PROCESSING
	   AND EHOINGE	e. THEթINE CHECKSAAWAITING T4"ϫT, IFA
	  )II.
	3. PERFORMS THE U*LOK" ROUTINE TO ËtCARACTERS DIRECTLY
	FOM THE KEYBOARDE	i$ANO CHAR HAS BEEN TYP ETURNS ZERO IN *Fc+5. SETS THE CONSOLE s̓ND PROCESSOR IND$ΡUT MODE SO
	   THATgYAAND ALL TYPEINSiEAQiťVED FOR DDT.  THIS M"	   WILL STAY I"ƍ OR 5 SECONDS IF NO FHR DDT INPUT
	 !LS ARE PERFORMED.  THE CŐ WILL THEN REVEUT
	   NORM3CMMAND PROCESSING.
	6. A CONTRCAATYPED IN WILL ABORT THE DDT INPUT
	   M"RVERT TO NORMAL COMMAMDE.  A DDT INPU!E	A  MUST BE IN PROCESS FOR THIS TO BE SEEN'׋i,ATHERFORE
	   THE TIgթ AS GIVEN ABOVE̙ԫRN TOΧOLE MODE
	   IF NO FURTHER DD$ΡUT REQUESTS ARE PERFORMEDE	o. DDT INPUT MOD+ə ̧O BE CLEARED BY DOING EITHER OF
	   THE)I!ϝTROL COMMANDS.
	8. (!ϝTROL ^) TYPI WILL CAUSE THE FOLLOWING CHARS
	 *OABE USAPCNSOLE COMMAND.  CONTROL IS THEN RETURNED񢄠A BACK TO THE DD*T INPU(RCESS.
	DECSYSfa1a DIAGNOSTIh!ϝSOLE ǥAM
	----------V[---------------V[V[---

14.0	KL10 DTELCMMAND CODES (CO)
	GMNITOR TTY OUTPUT

	THIS MODE IS A SPEC0f a MONITOR SUPPORT MODE THAT
	ALLOWS THE CONSOPTLETYPE TO FUNCT3 S A TIME-SiIG
	TERMIN3 AWHEN THE CONSOL$AOPERATING AS A USER TTY THE
	TELETYPE INPUT 3 (U BELONG ENTIRELY TO THE PDP-10.
	THE PDXAUSING THE MONITOR TTY OUTj OMMAND CODE SENƊCHARACTERS DIRECTLY TO THE TTY PRINTER AND THGAADTE20
	DONE INTERRUPT WITH THE "$DTMTD"AAWHEN "TY IS#E	O ACCEPT ANOTHER CHARACTER.  WHEN A CHARACTER IS TYPED ON
	"EYBOAQTE CHARACTEH$AhOITED 3TE "$DTF11" WORDE	P"IDTMTI" FLAG SET AND A DTE20 INTERRUPT PERFORM
	H.  MONITOR EAsTOL ON

	THIS s̓PTS TH!ϝSOLE IN MOjO SUPPORT M"E	(O*IiȃRING iMNAL OPERAT3.A THE CONSOLE MUST
	֓i̳ HAVE BEENg PPP-10 RUN M"(OT OPERATION,
	ANY O*H "STAU1a" COMMANDS̋CTS TiODE.

	IMNITORgċΩS FF

	THIh!ϛgDARETURNS THE CONSOLE NRMAL PDP-10 RUN$͋ӫ'ҩ.

	J.  MONITOR MODE ST5"ԑIS COMMAND PASSES TO$EATEN THE CURRENT STATE OF THE MONITOR
	MODE CONTROL FLAG.  PASSED IN LOW 16 BITS OF "$DTF11".

	NOTE:
	-----

	TO ABORT MONITOR SUPPORT MODE AND RETURN TO CONSOLE MODE THE 
	OPERATOR MAY TYPE "CONTROL X".  THIS RETURNS THE CONSOLE 
	TO PDP-10 RUN TIME SUPPORT MODE.  TO ABORT THIS MODE THE
	"CONTROL C" (^C) COMMAND MAY BE TYPED.  IF CONTROL C HAS NOT
	BEEN TYPED THE "MC" MONITOR CONTINUE COMMAND WILL RETURN THE
	CONSOLE TOgΓ (OT MOD !ϝTROL C HAS BEEN
	TYPED THE "RN" AND THEN THE "MC" COMMANDS MAY BE TYPED TO RETURN
	TO MONITOR SUPPORT MODE.
	DECSYSTEM10 KL10 DIAGNOSTIC CONSOLE PROGRAM
	-------------------------------------------

15.0	FILE FORMATS

	ALL OF THE PROGRAM FILES FOR THE KL10 DECSYSTEM10 ARE
	CONVERTED INTO A COMPATIBLE FILE FORMAT WHICH ALLOWS
	FOR A COMMON HANDLING PROCEDURE.  THIS FILE FORMAT IS
	LOADABLE FROM ANY STORAGE MEDIUM BOTH BY THE PDP-10 AND
	BY THE PDP-11.

	THE PROGRAM FILES CONSIST OF BINARY DATA WHICH HAS BEEN
	"ASCIIZED", THAT IS, MANIPULATED SUCH THAT 6 OR LESS BITS
	OF THE BINARY DATA ARE REPRESENTED BY A 7-BIT CHARACTER
	WHOSE VALUE RANGES FROM OCTAL 075 TO OCTAL 174.  THIS
	PROCESS IS EMPLOYED TO AVOID THE PROBLEMSI+ϫLD BEŝCOUNTERED IF CERTIAN 7-BIT COMBINATIONS iEA3&OED
	(E.G., OCTAL 00h+ϫLD BE INTERPRETA "CONTROL C").

	"ASCIIQb"ADATA IS PRODUCED FRO*H SOURCE BINARY jAA4ƊFOLLOWS:

	1."IIDE THE BINARY DATA INTO aI FIELDS, STARTING WITH
	    THE LEAST S1IICANT 6 BITS.  DEPENDING TE NUMBER
	    BTS IN THE SOURCE DAT+TE MOST SIGNIFICANT FIELD
	    MAY BE COMPOSE'AԧA1 TO 6 BITS.
BY.AέERT EACH FIELD 3OA(IT CHARACTER US3F    FOLLOWING PROCED
	   2A.	IF TPF" AS A VALUE LESS THAN OCTAL 75, ADD
		OCf c(RODUCING 7-BIT VALUEh)AGING FROM
		OCf cT OCTAL 174).

	   P	F THE FIELD HAS̫ES OCTAL 75, 76, OR 77 USE
		THE FIELD DIRECTLY (īCING 7-BIT VALUES 075,
		076, OR 077).CE	fЙE:

	A 16 BIT WORDΩAINING OCTAL 17A4DVIDED INTO 3 FIELDSBTOE 4-BIT AND TWO]
		17, 60, 76

	TPFELDS ARE CONVERb NTO 7-BIT CHARACTERS:

"Xo, 160, 076

	WHICHiEATHE ASCII CODESA"RAPHICS:

		O, LOWER CASE P, >
	DECS4E,K10 DIAGNOSTIC CONSOL(RGRAM
	--------V[V[---------------V[-----

1˘	DP-11̋қATS

	PDP-11 ǥ3iRE ASSEMBLED WITH MACY11 ON A DECSYSTEM1E	HICH PRODUCES A PDP-11 BIiYAFILE ON THE PDPX ISK OF 
	THE FOLLOWING F:

4"P[11 BIiYAfEAFORMAT
	-----------V[---------

		11 BINARY ON 10 DISK - 36AWORDS

		BYTE 2/BYTE 1,ԋ 4/BYTE 3
		  6A A5,,     8      7
		    10      9,,    1H A 11
			ETC.

		ACTUAL FORMAT

		FRAME	0	wSTART FRAME
			1	000	;NU		2	XXX	;BYTE CgTALOW 8 BITS
			3	XXX	;BYT!ϫNT HI8ABITSBDi	YYY	;LOADbDESS LOW 8 RjS			56l;LOADbD頑IGH 8 BITS
			6	NNN񢄉	 .
				 .	;DAPBi				 .
				NNN
			6Z;BLOCK CHECKSUM	٧TEM10 KL10 DIAGNOSTIh!ϝSOLE PROGRAM
	V[V[--------------------V[--------

16.hDXILE FORMATS (CON'T)CE	DP-11 ASCIIZED fEAMT
	----------------V[------

	E WCbRY,c23,123, . . . . . .1LCS,<CR><LF>
	E AR,123,123,123, . . . . . Y3YCKS,<CR><LF>
	,DR,CKS<CR>#>
	E	;PDP-11 FILE IDENTIFIERBP	wt Ë, SIGNIFIES ASCIIZED FILE
	WC	;WORD COU1)	wLOAD ADDRESS
	123	;T 3 CHARS FOR EAr1mADATA WORD
	CKS	;FILE LINE CHECKSUM
	CR#	w F LINE

	AS MANY L3AOF THIS TYPE ASѫ4ATO LO1TE PDP-11
	FILE, DEPENDS ON SIQPO FILE.

	E	;PDP-11 IDENcIR
		;SPACE, SIƓACIIZED FILE
	0	;WORD COUNT, WC OF ZERO rcΓbATRANSFER BLOCK
	ADR.D-11 SiTNG ADӧ
	CKS	;FILE LINE CHECKSUM
	CR/LF	qgDAOF LIFBjHRE IS A MAXIMUM OF 29 16 BIT DATA WORDS i ILE LINE
	WHIC(RDUCESPMXIMUM OF 131 CH4éER LINE COIG
	TPFLE IDENTIFIER, "ORD COUNT, THE A1"RSS, THE 
	DATA, THE$΋ CHECKSUM AND TPFRMAT r ҃CTERS.

	THE FILE LINE CHECKSUM IS THE[ 5NGATED CHECKSUM THAT
	WHEN THE WORD COUNT, TH&OD ADDRESS, THE jAAAND THE
	r"×SUM ARE ADb OGETHER PRODUCEh c6 BIT ZERO SUM.
	DECSYSTEM10 KL10 DIAGNOSTIh!ϝsEAPROGRAM
	------------------------------V[--------

17.0	PDP-10 F3"ORMATS

	PDP-,POGRAMS ARE ASSEMBLED, LOADED AND SAVED WHICH "BaҋATES A PDP-10 FILE IMAGE AS GIVEN IN THE̙Ώ
	DEpITION:񢆊(-c0 SAVE FILE FORMAT
	-----------------------

		-WC,,ADR	;{ NEGAkEAWORD COUNT PDTA
	(DTA		; WORDS FOLɝE	  DATA
		  DATA		;ADR = LOAD ADDRESS -1 FOR "ATA
		  DATA
"Vׇ ĥ
		  DATA
		 "P A.
		TY,ADR	;STAR*RNSFER ADDRЉXA4ɓQb ILE F
	-------V[---------------

	(-c ӇIIZED FILEh ҋ͡OSED OF THQb4"AOF
	FILE LOAD LINESTEY AR	A.	CORE QiOALINECE	HIS LOAD F3"INE Saɍ1iiEAAND HOW MUrPXACORE
	TO BE ZEROED.*HS IS NECESSARY 4T(DX ILES ARE
	ZERO COMPRESSE+ȓrMANS THAT ZERO WORDS 4OT INCLUDED
	IN THE LOAD FILE TO CONSERVE FILE SPACE.

	  CORE ZERO LINE

		Z WC,ADR,COUNT,...,CKSUM

		Z = PDP-10 CORE ZERO
		WORD COUNT = 1 TO 4
		ADR = ZERO START ADDRESS
			DERIVED FROM C(JOBSA)
		COUNT = ZERO COUNT, 64K MAX
			DERIVED FROM C(JOBFF)

	IF THE ADDRESSES ARE GREATER THAN 64K THE HI 2-BITS OF
	THE 18 BIT PDP-10 ADDRESS ARE INCLUDED AS THE HI-BYTE OF
	THE WORD COUNT.
	DECSYSTEM10 KL10 DIAGNOSTIC CŐ)OPf	----V[V[-----------------------------

17.0	PDP-10 FILE FORMATS (CON'T)

	B.	LOAD FILE LINES

	AS MANY OF THESE TYPES OF LOAD FILE LINES ARE REQUIRED AS ARE
	NECESSARY TO REPRESENT THE BINARY SAVE FILE.

	  LOAD FILE LINE

		T WC,ADR,DATA 20-35,DATA 4-19,DATA 0-3, - - - ,CKSUM

		T = PDP-10 TYPE FILE
		WC = PDP-10 DATA WORD COUNT TIMES 3, 3 PDP-11 WORDS
		     PER PDP-10 WORD.
		ADR = PDP-10 ADDRESS FOR THIS LOAD FILE LINE
			LOW 16 BITS OF THE PDP-10 18 BIT ADDRESS, IF
			THE ADDRESS IS GREATER THAN 64K, THE HI 2-BITS
			OF THE ADDRESS ARE INCLUDED AS THE HI-BYTE OF
			THE WORD COUNT.

		UP TO 8 PDP-10 WORDS, OR UP TO 24 PDP-11 WORDS

		DATA 20-35
		DATA  4-19	;PDP-10 EQUIV DATA WORD BITS
		DATA  0-3

		CKSUM = 16 Rj ԋD CHEr՛ OF WC, ADR & DATA

	C.	TRANSFER LINECE	iOAD FILE LINE CONTAITE FILE STARTINGbDESS.

	  TRANSFER LINECE	T 0,ADR,CKSUM

		0PW = SIGNIFIES TR3ƋKEF
		ADR = PROGPfTART ADDRESS
	DECSYSTEM,K10 DIAGNOSTIC CONSOLE PROGRAM
	--------V[-------------------------V[

18.0	KL10 M0OACODE FILE FORMATS
BjH KL10 MICRO CODE FILE CONSISTS OF TWO DIFFERETi	OF DATA.

	TPC)O RAM CONSISTS O0ARjSAPLUS A 5 BIT SPƓELD PER CONTROL RAM ION.  THIS THENѫ4ASIX
	16 BIT WORDS TO REPRESENT THE CONTS 3PDTA.  THE LOAD
	FILEiRRANGED SO AS F0̓jEALOADING OF THE C-RAMԑ
	THE "WCRAM" SԓNE.

	THE DISPATCH RAM CONSISTS OF PAIRS OF LOCAgΧ.  THIS
	THEN REQUIRES THREE 16 BIT WORPH(AR OF D-RAM LOCATIONSE	HIS FILE IS ARR3ŉ'ACILITATE LOADING OF$EAD-RAM 
	WITH TP"E ROUTINE.

	BOTH TPC[RAM AND D-RAM D5 RE COMBINED INTO A SINGLE̟AD FILE TO FACILITAT$ADLING AND TO KET ӧOCIATED
	VERSIONS TOGETHER.

	THE MICSCPLAD FILE ALSO CONTAINh -RAM ZERO LINEBjӋ*OAZERO THE CONTRO)A BEFORE LO1$Ώ ANY jAA3O	IT.  THE C-RA$AQiOD FROM LOCATION ZERO UP TO THE HIGHEST
5iŉ C-RAM LOCATION.

	EXAM"ILE:

	Z WC,ACS
	C WC,ADR,DATA,DATA,..!˧UM
	h"	C  CE		D WC,ADR,DATA,DATA,˗,KSUM
	D  "
	D  "
	D ,,
	DECSYSTEM101a DIAGNOSTIC CONSOLE PROGR3F---------------V[V[------------------

18.0	KL10 MICRO COPFLE FORMATS (CON'T)

	CONTROL RAM FORMAT
	-V[------------

	Z WC,ADR՝T,CKSUM

	Z	;kiA ZERO
		;SPACE, ASCIIZEDқAT
	ĻORD CgTA= 1
	ADR	vҟ START ADDQiA= 0
0՝T	;ZESC,ADERIVED FROM HIGHESTiŉ ADDRESS

	C AK4[79,48-63,32-47,16-31-c5,0-4,.....,CKSFBawC-RAM FILE IDENTIFIECE	;SPACE, ASCIIZE#I*YE
	WC	;WORD COUNT, kiA WORD COUNT TIM6YPP-11
		; WORDS PER kiA WORD
	ADR	;C-Pf)ES FOR THIS LOAD FILE$΋
	64-79	;C-RAMԧiPECIFIED UNDER "WCRA48-63	;C-RAM BIA SPECIFIED UNDER "WCRAM"BY[47	;C-RAM BITS 4SECIFIED UNi EWCRAM"
	16-31	;C-RAM BITS AS t"ÓbAUNDER "WCRAM"
	00-15	;C-RAM BITS AS SPErcI*ΉER "WCRAM"
	0-4	;C-PfITS AS SPECIFIE*Ή"CRAM"
	CKSUM	;16 BIT NEGATED CHECKSUM O+YbRA& DATA

	C ,,

	b][RAM FILE IDENTIbBDPACE,iÓIZED FILE FORMAT
	,	;WC = 0,  F FILE
	,	;ADR = 0, NO SiTAADDRESS

	A CAAFILE LINE MAY CONTAIN UP TO 4 C-RAM LOCAgΧE	HE FILE LINE CHECKSU$ATHE 1!I NEGAb HECKSUM OF
	THE WORD COUNT, THE LO1ADRESSgDA"-RAM DATA
	REPRESENTED IN 16 BIT FORMATEDECSYSTEM10 KL1"IGNOST0CNSOLE PROGRAM
+V[V[----------V[-----V[---------

18˙10 MICRO CODE F3"S (CON'T)

	D-RAM MT
	-----------E	D WCbRYEVEN,ODD,COMMON,.......,CKSUM

	D	;D-R3PFPIENTIFIER
		;SPACE, ASCIIZED FILE TYPE
	WC	;DACOUNT, D-RAM LOpjIN PAIRS TIig, 3 PDP-11񢄉w 16 BIT WORDS PPIR OF LOCATIONS.
	EVEN	;D-RAM EVEN BITS AS Saɍ1iNDER "WDRAM"
	ODD	;D-RAM ODD BITS AS SPƓED UNDER "WDRAM"
	COMMON.-AM COMMON BITS 4SECIFIED UNDER "WDRAM"
	CKSUM	;16 BIT NEGATEDEtAOF WC, ADR & DATA

	D ,,

	D	;D-RAM fEA1"ΩIFIER񢄉wSPACE Ӈ2mE FILE FORMAT
	,	;WC = 0, END OF FILE
	,	;ADR = 0, NO STARTbDESS
AD-RAM LOAD̋$΋ MAY sSST OF UP TO FOUCE	2iSAOF D-RAM LOCATIONS.
	THE FILE LINE CHECKSUM 4TE 16 BIT NEGATE!ȋr՛ OF
	THE WORD sΩ*H LOADbDESS AND TH"-AM DATA
	QhRqgT$A-B#OMAT.CċCSYSTEM10 sADIAGNOSTIC CONSOLE PS҃E	[----------V[V[----------V[V[--

19.0	PDP-8 FIL#OMATSCE	DP-8 PROGR3iRE ASqfED WITH PAX N A D٧faבICH PRODUCAA(-q BINARY FILE ON THE (-c0 DISK OF
	THE̙ΏқAT:

	PDP-8 BINARY FILEқ5--------------------V
	DATA IS REPRESENTED AS IF IT WAS AN EIGHT CHANNEL PAPER
	TAPE.

		A. THE LEADER/TRAILER IS CHANNEL 8 ONLY.
		B. AN ADDRESS IS DESIGNATED BY A CHANNEL 7 PUNCH
		C. DATA FOLLOWS THE ADDRESS IN SEQUENTIAL ORDER

	PDP-8 ASCIIZED FILE FORMAT
	--------------------------

	8 WC,ADR,12,12,12, . . . . . .12,CKS,<CR><LF>
	8 WC,ADR,12,12,12, . . . . . .12,CKS,<CR><LF>
	8 0,ADR,CKS<CR><LF>

	8	;PDP-8 FILE IDENTIFIER
	 	;SPACSƓACIIZE#IE	C	;WORD COUNT
	ADR	;LOAD ADDRESS
	12	;UP TO 2 CHARS FOR EACH 12-BIT DATA WORD
	CKS	;FILE LINE CHECKSUM
	CR/LF	;END OF LINE

	AS MANY LINES OF THIS TYPE AS REQUIRED TO LOAD THE PDP-8
	FILE, DEPENDS ON SIZE OF FILE.

	8	;PDP-8 IDENTIFIER
		;SPACE, SIGNIFIES ASCIIZED FILE
	0	;WORD COUNT, WC OF ZERO SIGNIFIES TRANSFER BLOCK
	ADR	;PDP-8 STARTING ADDRESS
	CKS	;FILE LINE CHECKSUM
	CR/LF	;END OF LINE

	THERE IS A MAXIMUM OF 32 12 BIT DATA WORDS PER FILE LINE
	WHICH PRODUCES A MAXIMUM OF 123 CHARACTERS PER LINE COUNTING
	THE FILE IDENTIFIER, THE WORD COUNT, THE LOAD ADDRESS, THE 
	DATA, THE LINE CHECKSUM AND THE FORMAT CHARACTERS.

	THE FILE LINE CHECKSUM IS THE 12 BIT NEGATED CHECKSUM THAT
	WHEN THE WORD COUNT, THE LOAD A)EkTE DAT( Ή THE
	CHECKSUM ARE ADDED TOGETHER PRODUqiY IT ZERO SUM.
	DECS4E10 KL10 DIAGNOSaONSOLE PROGRAM
	--------V[--------------------V[-----

20.0	Ou AfEAFORMATS

	ANY HE PREVIOUSLY DESCRIBED F3"ORMATS MAY BE
	PATCHED, CREATED OR UPDAb Y USING THE OCTAL FILE FOS`	CAPABILITY.  3TE ASCIIZED FILE FORM5TE SECOND CHARACTER
	ON A LINE (THE SPACE) SIƓTAT THIS LINE ISg pɵED
	FORMAT.  T!ҋ5" FILE LINE IN TPOf ORMAT THE 
	SECOND r ҃CTER IS AN "O" 3 PDTA IS INSERTED IN OCTAL,
	THAT IS USING$EAA CHARACTERS 0 THRU 7*H FILE WHEN
	LO1"A"AUSES ONLY THE THREE `ө SIGNIFICANT BIO THE
	CORESPONDING CHARACTER.  ALSO AN OCTAL FILE$΋ DOES NOT
	INCLUDE THE CHECKSUM SO THATEAANOT HAVE TO COMPUTEBjHS WHEN CREATING$EAfE]

	ONE SHOULD LIMI*H LINE LENGTH OF$EAA FILE LINE TO
	132 r ҃CTERS.

21.0	t"ÓFIED FILE EXTENSIONS

	"L10 DECSYTEM10 FILES ֋ THE FOLLOWING t"Ób	FILE EXTENSIONS TO DESTINGUISH THE FIL*Y
	A.	.BIN	;PDP-11 B3ҳ LOAD FILE

	K,DDP-11 ASCIIZED AFILE

	CWRM	;KL,MtODE LOAD FILE
]+a	;PDP-10 ASCIIZED LOAD FILE

	E.	.A8	;(-q ASCIIZED LOAD FILE
	DEtөEM10 KL10 DIAGNI CONSOLE PROGRAM
	------V[-----V[-----V[V[-------

22.0	MICRaωE SPECIAL FILE CREATION

	1.	TO CREATEPSALL SPECIAL MICRO-CODE FIPFR DEBUG
		OF Saɍ0PRTIONS OF THE KL10 USE THE APPROPRIATE
"bēTOR AND CREATE A ".RAM" FILE IN THE FOLLOWING񢄉ORMAT.

	B.	EXAMPLE FIL		ZO
		CO6,0,0Y0,0,0,0
		CO6,1,100,0,0,LX0a,0,0BDß6,2,14i3,30000,35,a,0
		CO6,k0a,0,0,0Y0
		s,i0Y0,0,0,0,0
		CO0
		Ɗ	C.	THE VARIOUh(OgΧ OF THIS FILE ARE:
񢄉O	;ZERO C-RAM, LpjINS

		C	;FOR C-RAMċ
		O	;FOR OCTA#Oj		6	;WORD COUNT, 6 1(+ϥDS FOR THE 80 B5C[Pf			;WORD AND THE 5 B5SEC FIELD
		,	;b̉ЃRATORS
		0	;MICRO C"DDRESS
		42	;F4A-BTS
		0	;2ND 16 BITS񢄉a	;3RD 16 BITS
"X	w4TH 16 BITS
		0	;5TH 16 RjSY FOR 80 BIT C-R3F	0	;6TH 16ԧ, FOR 5 BIT SPEC FIELD
		CR/L]ŝ'ALINE

		;AS MANY LINES OF THIS FORM AS"ӓQb -RAM
		;LOCATIONS T!EABE LOADED

		s	wkiA END OF FILE BLOCK

		DO	;D-RAM, NONECċtөEM10 KL10 DIAGNOSTICΧOLE PROGRAM
	-V[V[-----V[----------------------

23.04¥OUTINE PACKAGE INSTRUCTIOƊ23.1	SUBROUTIN)ٛSI TAGS

	ALL INTERNAL SUBROUTINE TAGS AQPP؋D WITH A DOLLAR SIGN
)	TO ÙUDE IbVRTANT TAG DUPLICATION.  USERS SHOUL)EER TOԑ)ՅROUTINE PACKAGE SYMBOL TABLE TO AVOID DU$ÃTING THOSE
	TAUED IN$EASUBROUTINE PACK1CE2g.2	SUBROUT3ACKAG"ITRIBUTION

	TiACKAGE OF SUBRO$΋h$ASUPPLIED AS AN ASCIIեCE FILE
	WHICHOLD BEiӋMBLED WITH THE MAIN PROGRAM SOURCE FILESE	iUBROUTINE PACKAGE SHOULD BE USED AS A STANDAR)ũ AND
	ANY CORRINS OR IMPR͋NTS TO IT QPCEARED WITH THEBbIITAL EQUIPMENT CORPORATION DIAGNOSTIC ENGINEERgGAա.

24.0	MISCELLANEOUS

25.0	SOURCE F3"ISTINGS
       	C