log_progress "ENTERING BUILD SCRIPT: ZORK"

# Old Zork startup
respond "*" ":midas sys2; ts ozork_taa; zork\r"
expect ":KILL"

# New Zork startup
respond "*" ":midas sys; ts rbye_cfs; zork\r"
expect ":KILL"
respond "*" ":link sys1;ts zork, sys; ts rbye\r"

mkdir "cfs"

respond "*" ":pcomp\r"
respond "T" "<SNAME \"LCF\">"
respond "LCF" "<FILE-COMPILE \"prim >\">"
respond "Job PCOMP wants the TTY" "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<FILE-COMPILE \"defs >\">"
respond "Job PCOMP wants the TTY" "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<FILE-COMPILE \"util >\">"
respond "Job PCOMP wants the TTY" "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<FILE-COMPILE \"makstr >\">"
respond "Job PCOMP wants the TTY" "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<FILE-COMPILE \"typhak >\">"
respond "Job PCOMP wants the TTY" "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<QUIT>"
respond ":KILL" ":assem \"lcf;tell >\" \"lcf;tell nbin\"\r"
respond "Is this assembly for TENEX?" "n"
respond ":KILL" ":pcomp\r"
respond "T" "<FLOAD \"lcf;comp preamb\">"
respond "DONE" "<FILE-COMPILE \"rooms >\">"
expect -timeout 900 "Job PCOMP wants the TTY"
type "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<QUIT>"
respond ":KILL" ":pcomp\r"
respond "T" "<FLOAD \"lcf;comp preamb\">"
respond "DONE" "<FILE-COMPILE \"parser >\">"
expect -timeout 900 "Job PCOMP wants the TTY"
type "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<QUIT>"
respond ":KILL" ":pcomp\r"
respond "T" "<FLOAD \"lcf;comp preamb\">"
respond "DONE" "<FILE-COMPILE \"act1 >\">"
expect -timeout 900 "Job PCOMP wants the TTY"
type "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<QUIT>"
respond ":KILL" ":pcomp\r"
respond "T" "<FLOAD \"lcf;comp preamb\">"
respond "DONE" "<FILE-COMPILE \"act2 >\">"
expect -timeout 900 "Job PCOMP wants the TTY"
type "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<QUIT>"
respond ":KILL" ":pcomp\r"
respond "T" "<FLOAD \"lcf;comp preamb\">"
respond "DONE" "<FILE-COMPILE \"act3 >\">"
expect -timeout 900 "Job PCOMP wants the TTY"
type "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<FILE-COMPILE \"act4 >\">"
expect -timeout 900 "Job PCOMP wants the TTY"
type "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<QUIT>"
respond ":KILL" ":pcomp\r"
respond "T" "<FLOAD \"lcf;comp preamb\">"
respond "DONE" "<FILE-COMPILE \"melee >\">"
respond "Job PCOMP wants the TTY" "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<FILE-COMPILE \"sr >\">"
respond "Job PCOMP wants the TTY" "p"
respond "\"So you re-owned me, eh?  I'm done anyway.\"" "<QUIT>"
respond ":KILL" ":mudsav;mud55\r"
respond "LISTENING-AT-LEVEL 1 PROCESS 1" "<BLOAT 150000 1 3 2000 30 9>"
type "<SNAME \"LCF\">"
respond "LCF" "<FLOAD \"prim nbin\">"
respond "\"DONE\"" "<FLOAD \"defs nbin\">"
respond "\"DONE\"" "<FLOAD \"util nbin\">"
respond "\"DONE\"" "<FLOAD \"makstr nbin\">"
respond "\"DONE\"" "<FLOAD \"typhak nbin\">"
respond "\"DONE\"" "<FLOAD \"rooms nbin\">"
respond "\"DONE\"" "<FLOAD \"parser nbin\">"
respond "\"DONE\"" "<FLOAD \"act1 nbin\">"
respond "\"DONE\"" "<FLOAD \"act2 nbin\">"
respond "\"DONE\"" "<FLOAD \"act3 nbin\">"
respond "\"DONE\"" "<FLOAD \"act4 nbin\">"
respond "\"DONE\"" "<FLOAD \"tell nbin\">"
respond "\"DONE\"" "<FLOAD \"melee nbin\">"
respond "\"DONE\"" "<FLOAD \"sr nbin\">"
respond "\"DONE\"" "<FLOAD \"dung\">"
respond "\"DONE\"" "<RSUBR-LINK <>>"
respond "T" "%%<HANDLER <GET ERROR!-INTERRUPTS INTERRUPT> ,ERRH>"
type "<SETG MUD-HAND <OFF <3 <GET ,INCHAN INTERRUPT>>>>"
respond "#HANDLER #SUBR" "%%<SETG ZORK-HAND <OFF <HANDLER <GET ,INCHAN INTERRUPT> ,CTRL-S>>>"
type "<SETG END-GAME-EXISTS? T>"
type "<GC-MON T>"
type "<PSETG WINNERS '\[\"EJS\", \"TAA\"\]>"
type "<SAVE-IT \"cfs;madadv save\" <>>"
type "<QUIT>"
expect ":KILL"
