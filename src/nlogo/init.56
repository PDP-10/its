.SBTTL CONDITIONALIZER
VERSIO

.IF NDF PASS2

   .IIF NDF CPF,	DC CPF,0
   .IIF NDF DMPCAS,	DC DMPCAS,0
   .IIF NDF HALFLG,	DC HALFLG,0
   .IIF NDF METERS,	DC METERS,0
   .IIF NDF NOISPACE,	DC NOISPACE,0

 ;LANGUAGE CONDITIONALS, DEFUALT IS JUST ANGLAIS
   .IIF NDF ENG,	DC ENG,1
   .IIF NDF FR,		DC FR,0
   .IIF NDF ARABIC,	DC ARABIC,0
   .IIF NDF SWAHLI,	DC SWAHLI,0
   .IIF NDF GERMAN,	DC GERMAN,0
.ENDC

;SET VARIOUS FLAGS DEPENDING ON LSI, SITS OR UNIX
.IF NDF PASS2
   .IF NZ SITS
      DC TS,1
      DC DSK,1
      DC TVS,1
      DC COLOR,1
      DC NPLOT,1
      DC NDISP,1
      DC DDF,1
      .IIF NDF LSIHAK,	DC LSIHAK,0
      DC MUSBOX,1
      DC MAILER,1
      DC LSFLEM,0
      .IIF NDF FILDSK,	DC FILDSK,1
      .IIF NDF TURFLG,	DC TURFLG,1
      .IIF NDF PTBOX,	DC PTBOX,1
      .IIF NDF LPF,	DC LPF,1
      .IIF NDF TIMCLK,	DC TIMCLK,1

      DC LSPRNT,0
      DC LSMAP,0

   .ENDC

   .IF NZ LSI
      DC TS,0
      DC DSK,0
      DC TVS,0
      DC COLOR,0
      DC NPLOT,0
      DC NDISP,0
      DC DDF,0
      .IIF NDF LSIHAK,	DC LSIHAK,0
      DC MUSBOX,0
      DC MAILER,0
      DC LSFLEM,0

      .IIF NDF FILDSK,	DC FILDSK,0
      .IIF NDF TURFLG,	DC TURFLG,0
      .IIF NDF PTBOX,	DC PTBOX,0
      .IIF NDF LPF,	DC LPF,CPF
      .IIF NDF TIMCLK,	DC TIMCLK,0

      .IIF NDF LSTTY,   DC LSTTY,1
      DC LSDISK,FILDSK
      DC LSCLK,TIMCLK
      DC LSPRNT,LPF
      DC LSNDB,0	;DEFINIGN THIS TURNS OFF LSITS ALLOCATING DISK BUFFERS
      DC LSMAP,1
   .ENDC

   .IF NZ UNIX
      DC TS,1
      DC DSK,0
      DC TVS,0
      DC COLOR,0
      DC NPLOT,0
      DC NDISP,0
      DC DDF,0
      .IIF NDF LSIHAK,	DC LSIHAK,0
      DC MUSBOX,0
      DC MAILER,0
      DC LSFLEM,1
      DC LPF,0

      .IIF NDF FILDSK,	DC FILDSK,1
      .IIF NDF TURFLG,	DC TURFLG,0
      .IIF NDF PTBOX,	DC PTBOX,0
      .IIF NDF TIMCLK,	DC TIMCLK,0

      DC LSPRNT,0
      DC LSTTY,0
      DC LSMAP,0
      DC RKDSK,0
   .ENDC

   .IIF NDF GTL,	DC GTL,1	;2500 DISPLAY (EVERYBODY SHOULD HAVE ONE!)
   .IIF NDF DEBUGR,	DC DEBUGR,SITS	;FOR THE MOMENT DEFAULT IS ON FOR SITS, OFF FOR LSI
.IF NDF MULTTY
MULTTY==0
.IF NZ SITS
MULTTY==1
.IFF
.IIF G LSTTY-1,MULTTY==1
.ENDC

.iif ndf rxdisk, dc rxdisk,0
.ENDC

 ;RELATIVLY USELESS STUFF
   DC FPPF,1
   DC NCHNS,20	;NUMBER OF DISK CHANNELS
   DC DPM1,1 	;SEE DAN MIRANKER
   .IIF NDF AI,		DC AI,1
   .IIF NDF NOERTX,	DC NOERTX,0	;USUALLY HAVE ERROR TEXT
   .IIF NDF BOTUR,	DC BOTUR,0
   .IIF NDF SARITH,	DC SARITH,1	;STRING NUMBERS USUALLY ALLOWED
.ENDC

;DATA SPACE PAGE MAP

;PAGE 0
;	SYSTEM TRAP VECTOR(S)
;	MISC VARIABLES
;	BEGINING OF ARRAY SPACE

DC PURPG,1
DC PURAD,PURPG*20000
DC PURE,PURAD
;PAGE 1
;	PURE CONSTANTS
;		MISC
;		SOBLST
;		ERRORS+ERROR TABLES

DC ARYPG,2
.IIF NZ SITS,	DC ARYAD,ARYPG*20000
;PAGE 2
;	MORE ARRAYS

;PAGE 3
;MORE ARRAYS

DC ARYHPG,4
;PAGE 4
;	STILL MORE ARRAYS
;	(END OF ARRAYS, CURRENTLY)

DC DISPG,5
DC DISAD,DISPG*20000
;PAGE 5
;	OLD STYLE DISPLAY
;	CONTROL REGISTERS OF TV DISPLAY
;	MAYBE (UGH!) MORE ARRAYS


DC NODPG,6
.IIF NZ SITS,	DC NODESP,NODPG*20000
.IIF NZ LSI!NOISPACE,	DC NODESP,STORAG
;PAGE 6
;	START OF NODE SPACE

DC NODPG1,7
;PAGE 7
;	END OF NODE SPACE


DC SYPDLL,240
DC DSECLN,400
.IFZ LSI!NOISPACE
DC PPDLL,2000
DC SPDLL,2000
.IFF
DC PPDLL,1000
DC SPDLL,1000
.ENDC
DC PDSLOP,300.	;MUST BE EVEN AFTER DIVISION BY 3
DC PDSWOP,2000
DC MAXARG,32.
DC DBUFL,1000


DC FRTRCF,1
DC SWTRCF,2
DC SPTRCF,4
DC GCTRCF,10

	;NODE TYPES
DC SFUN,000000
DC INFIX,10000
DC UFUN,20000
DC UVAR,30000
DC IDLE,40000
DC BUKTEL,60000	;NODE IN BUCKET OF OBLIST (INVALID TOKEN TYPE)
;THE FOLLOWING TYPES ARE NEEDED IN THIS ORDER BY THE CONVERT ROUTINES
DC SSTR,70000	;NOT VALID TOKEN TYPE
DC SNP,100000
DC ATOM,110000
DC SNUM,120000	;NOT A VALID TOKEN TYPE
DC LNUM,130000
DC INUM,LNUM	;INTEGER NUMBER
DC LSTR,140000
DC FNUM,150000
DC LIST,170000
DC SENT,LIST
;END OF ORDER

	;BINDING TYPES
DC FBIND,20000
DC VBIND,30000
;DON'T USE 40000, IT IS "IDLE" (UGH)
DC ABIND,50000
DC SVBIND,130000	;SWAPPED OUT  VARIABLE BINDING
DC DBIND,60000	;DELETED PROCEDURE BINDING


	;READ FLAGS SEE DTBL:
DC DOTF,400	;IN LEFT HALF
	;EVAL FLAGS - PUSHED BY PEVAL
DC PTLPF,1	;PREVIOUS TOKEN WAS LEFT PAREN
DC RTF,2	;REPEAT TOKEN
DC CRF,4	;CURRENT TOKEN IS CR
;DC EDITF,10	;EDIT FLAG (no longer used)
DC DORF,20	;SET IF THIS FRAME IS A DO OR A READ
DC CATCHF,40	;SET IF THIS IS A CATCH FRAME...
DC TSTFLG,100	;TEST FLAG FOR TEST, IFTRUE AND IFFALSE
DC SPDF,200	;SKIP PROC DEF. FLAG
DC TPTF,400	;THIS PROCEDURE TRACED FLAG	;MUST BE IN LEFT HALF
DC EDTIF,1000	;EDIT TITLE FLAG
DC BRKF,2000	;BREAK MODE FLAG
DC ERRF,4000	;ERROR FLAG
DC TPSF,20000	;THIS PROCEDURE STEPPED FLAG	;MUST BE IN LEFT HALF
DC TPBF,40000	;THIS PROCEDURE BURIED FLAG	; "   "  "   "    "
DC EVIFS,PTLPF+RTF+CRF	;FLAGS CLEARED BY EVLINE

	;EVAL FLAGS2 - NOT PUSHED
DC CPTBF,1	;CHANGE % TO BLANK
DC TRACEF,2
DC PQF,4		;PRINT QUOTE FLAG - FOR PRSTR
DC DPQF,10	;DONT " " "
DC SSF,40	;SPECIAL STATUS FLAG
DC PADERF,100	;PRINT ADDRESS OF ERROR
DC MGCF,200	;MANY G. C.'S FLAG
DC PNNLF,400	;PRINT NO. NODES LEFT
DC DSAMFL,1000	;DISK ALMOST FULL
DC PPNAIF,2000	;P PDL NOT ALL THE WAY IN
DC SPNAIF,4000	;S PDL NOT ALL THE WAY IN
DC HERRF,10000	;HARD ERROR
DC CHEKUF,20000	;TURNS ON VARIOUS USER CHECKING THINGS



DC NBN,40	;# BUFFER NODES - IF FREE NODES < THIS, DC , NO STG LEFT


	.IFNZ NDISP
;DISPLAY COMMANDS
DC ADDX,150000
DC ADDY,144000
DC ADDXY,ADDX!ADDY
DC DPUSHJ,100000
DC DPOP,140200
DC DPOPJ,140100
DC DSTOP,140400
DC DRSTXY,143000	;RESET X AND Y TO 0
DC DINC,40000

DC TURSIZ,6	;THE SIZE OF THE TURTLE

DC TKRUN,4000
DC TKGO,10000
DC TKSTOP,20000
.ENDC

.IFNZ GTL
DC GTNOP,0	;NOP
DC GTHOME,4000	;HOME
DC GTPEND,4400	;PENDOWN
DC GTPENU,4407	;PENUP
DC GTSTUR,5001	;SHOWTURTLE
DC GTHTUR,5000	;HIDETURTLE
DC GTSNAP,5400	;SNAP (ADDRESS IN NEXT WORD)
DC GTBLNK,6000	;BLINK
DC GTWRAP,6400	;WRAP
DC GTRSET,7000	;RESET???
DC GTFD,10000	;FORWARD+11 BITS OF DISTANCE
DC GTRT,14000	;RIGHT+11 BITS OF ANGLE
DC GTSHED,20000	;SET HEADING+11 BITS OF HEADING
DC GTMOVE,24000	;MOVE+11 BITS OF SPEED
DC GTSPIN,30000	;SPIN+11 BITS OF SPEED
DC GTDISP,34000	;DISPLAY, ADDRESS IN NEXT WORD
DC GTSTXY,40000	;SET X+11 BITS, Y IN NEXT WORD
DC GTDLXY,44000	;DELTA X+11 BITS, Y IN NEXT WORD
DC GTCS,50000	;CLEAR SCREEN
DC GTRUB,50000	;RUBOUT+11 BITS OF WORDS TO RUB OUT (SHOULD BE NEGATIVE)
DC GTNSNP,56000	;NEW SNAP, ADDRESS IN SAME WORD (10 BITS)
DC GTNDIS,60000	;NEW DISPLAY, ADDRESS IN SAME WORD
DC GTUSE,52000	;USE DEVICE, 0=DISPALY, 1=TURTLE, 2=PLOTTER
DC GTUDIS,GTUSE	;USE DISPLAY
DC GTUTUR,GTUSE+1	;USE TURTLE
DC GTUPLT,GTUSE+2	;USE PLOTTER
DC GTGTST,4004	;GET TURTLE STATE
DC GTLPON,4001	;SET TURTLE LAMPS ON
DC GTLPOF,4002	;LAMPOFF
DC GTTOOT,4003	;TOOT TURTLE
dc gtdpoi,54000	;dpoint + 8 bits of arg
dc gtchan,55000 ;change + 8 bits of arg
dc gtendc,55400 ;endchange
.ENDC

;FLAGS USED FOR DFLAGS
DC PENUF,1	;PEN UP
DC HIDETF,4	;TURTLE NOT SHOWN
DC TURTF,10
DC TEMF,20
DC DISPF,40	;DISPLAY IN USE
DC WRAPF,100	;WRAP AROUND MODE
DC PLOTF,200	;PLOTTER IN USE
DC TVF,400	;THIS IS A TV DISPLAY
DC CLIPF,1000	;CLIP MODE

;Flags for color in DFLAGS word of display flags.
.IFNZ COLOR
COLORF==2000	;On if color display in use.
ERASEF==4000	;Eraser doesn't seem to be implemented. [:ERASERSTATE] in Lisp.
XORF==10000	;:XORSTATE
COLORW==20000 ;Color write mode is on.
.ENDC

.IFNZ TS
.=40
.IFF
.=340
.ENDC
.IFNZ RXDISK
.INSRT MARG;RXLOA1 >
.ENDC

.IFNZ LSMAP
DC MAPCSR,177600
DC MAPON,200
DC MAPADR,MAPCSR+2
DC MAPHCK,74		;MAP HACK PAGE
DC MAPHCA,MAPHCK*2000	;ADDRESS OF SAME
DC PARCSR,MAPADR+2
DC PAROK,200
DC PARINT,100
DC PARBDH,40
DC PARBDL,20
DC PARADR,PARCSR+2
.ENDC
