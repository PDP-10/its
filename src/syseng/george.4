	TITLE DRAGONFIGHTER

A=1
B=2
C=3
D=4
E=5
T=6
TT=7
H=10
I=11
J=12
Q=13
R=14
P=17

CLICH=15
USRCH=16

.=43
	LOCKWD		;if job killed, free the dragon

.=100
LOCKWD:	'GEORGE		;zeroed when file editing completed
	SETZM

PDL:	-35,,.
	BLOCK 35

GO:	MOVE P,PDL
	.SUSET [.ROPTION,,TT]
	TLO TT,OPTLOK
	.SUSET [.SOPTION,,TT]
	.OPEN USRCH,[10+.UII,,'USR ? 'PFTHMG ? 'DRAGON]
	 JRST NOTFND
	.CALL [	SETZ
		'CORBLK
		MOVEI %CBRED+%CBNDR
		MOVEI %JSELF
		MOVEI 1
		MOVEI USRCH
		SETZI 0 ]
	 .LOSE 1000
	.OPEN CLICH,[.UAO,,'CLI ? 'PFTHMG ? 'DRAGON]
	 .LOSE 1000
	.CLOSE CLICH,
	SKIPN 2100
	 .HANG
	.VALUE [ASCIZî:
Okay, I'll hold the dragon at bay while you dash in
and make free with its hoard.  When you're ready,
come back and give me an $P.î]

	SETZM LOCKWD
	SKIPE 2100
	 .HANG
	.VALUE [ASCIZî:
Yum, Yum.î:KILL ]

NOTFND:	.VALUE [ASCIZî:
I can't find the dragon.
:KILL ]

END GO
