÷” Ã—ø1â EøjR‹øˆŸ A
 
÷‘gT¥û()Õ›øÒiS©ôæÏŸú’ A
 
ôTúíAüÚyséôeÙü»rîéþh7æAùð¥:E
 
÷‘"Æ“ùÑPS«ù±¤Ò§úˆO…ùHO¡ú’gÎƒùˆ(ô&Eøõ$ ]ùð¥>Sõ(Šôq"Ã™ô
Vƒù•b©A÷“é ù6F™ùðj>AõáJSô)Ô¥ú°êU¥ø±<ŸúH#I±ô¦OƒúŸ QùÊPF“û
FŠ<MAPF ,+
	      <FUNCTION (E) <COND (<G? <SET N <- .N 1>> 0> .E) (<MAPSTOP .E>)>>
	      .OBJ>>   
 
"Create new object by averaging OLD's elts over window of half-size N:"    
 
<DEFINE SMOOTH (OLD N "AUX" (L <LENGTH .OLD>) (R <+ 1 <* 2 .N>>)) 
	#DECL ((VALUE OLD) <STRUCTURED <OR FIX FLOAT>> (N L R) FIX)
	<CHTYPE
	 <MAPR ,<PRIMTYPE .OLD>
	       <FUNCTION (S "AUX" (SL <LENGTH .S>) (M -1)) 
		       <COND (<==? .L .SL>			    ;"first time around"
			      <MAPRET !<STACKFORM ,UVECTOR
						  </ <SUMFIRST .S .M> .M>
						  <L=? <SET M <+ 2 .M>> .R>>>)
			     (<L? .SL .R>				     ;"near end"
			      <AND <0? <MOD .SL 2>> <MAPRET>>
			      </ <SUMFIRST .S .SL> .SL>)
			     (</ <SUMFIRST .S .R> .R>)>>		    ;"otherwise"
	       .OLD>
	 <TYPE .OLD>>>  
 
<ENDPACKAGE>   
 
