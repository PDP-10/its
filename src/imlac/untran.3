TITLE UNTRAN
;THIS READS IMTRAN'D ASCII FILES (WITH BLOCK LOADER REMOVED)
;AND WRITES A BINARY FILE FOR THE CODE REPRESENTED.
;I.E., THIS IS AN UN-IMTRAN PROGRAM.
;AS THERE IS NO FILE SPEC READER, YOU HAVE TO HACK
;FILE SPECS FROM DDT.  THE INPUT FILE SPEC IS AT IFN1,IFN2
;AND OUTPUT IS AT OFN1,OFN2.  INITIAL SETTINGS ARE 
;ILLEGAL FOR RUNNING.  SNAME IS SET TO IMLAC;.
A=1
CH=2
DSKI=10
DSKO=11
.MLLIT==1
GO:	.SUSET [.SSNAM,,[SIXBIT \IMLAC\]]
	.OPEN DSKI,ISPEC
	 .VALUE
	.OPEN DSKO,OSPEC
	 .VALUE
LP:	SETZ A,
REPEAT 4,[
	.IOT DSKI,CH
	CAIGE CH,100
	 JRST [JUMPL CH,WINDUP ? JRST .-2]
	ANDI CH,17
	LSH A,4
	IOR A,CH]
	.IOT DSKO,A
	JRST LP
WINDUP:	.CLOSE DSKI,
	.CLOSE DSKO,
	.VALUE [ASCII \:DONEî\]
	JRST GO
ISPEC:	0,,'DSK
IFN1:	0
IFN2:	0
OSPEC:	5,,'DSK
OFN1:	0
OFN2:	0

PATCH:
PAT:	BLOCK 100
END GO
