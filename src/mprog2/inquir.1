<PACKAGE "INQUIRE">

<ENTRY INQUIRE>

<DEFINE IPC-MHND (MS TYPM F1 F2 "TUPLE" FOO "AUX" CHN)
	<PROG ()
		<COND (<NOT <==? .TYPM *400000000001*>> <RETURN>)>
		<INT-LEVEL 0>
		<PRINC "ACKNOWLEDGEMENT FROM ">
		<PRINC .F1> <PRINC " "> <PRINC .F2> <TERPRI>
		<SET CHN <OPEN "READ" .MS>>
		<AND .CHN <RENAME .MS>>
		<AND .CHN <FILECOPY .CHN>>
		<TERPRI>
		<TERPRI>
		#DISMISS T>>

<ON "IPC" ,IPC-MHND 1>

<DEFINE INQUIRE (UNAM JNAM 'TODO "AUX" (PTODO <UNPARSE <FORM PRINT .TODO>>) (OBLIST ()))
	<SEND .UNAM .JNAM
	    <UNPARSE <FORM
		PROG LERR\ !-INTERRUPTS
		'((OUTCHAN <OR <OPEN "PRINT" "DSK:_NQRY_ >">
				<OPEN "PRINT" "DSK:HUDINI;_NQRY_ >">>)
		(EPRINT <ON "ERROR" #FUNCTION (("TUPLE" FRATM)
			<COND (<ASSIGNED? INDENT-TO> <PRINC "*ERROR* ">
				<PRINT .FRATM> <INT-LEVEL 0>
				<RETURN T .INDENT-TO>) (T)>) 10000 0>)
		  (OBLIST ,OBLIST))
		'<SET LERR\ !-INTERRUPTS <FRAME <FRAME <FRAME>>>>
		'<PUT .OUTCHAN 13 80>
		<FORM PROG INDENT-TO () <FORM EVAL <FORM PARSE .PTODO>>>
		'<OFF .EPRINT>
		'<CLOSE .OUTCHAN>
		<FORM SEND <UNAME> <JNAME>
		    '<STRING <10 .OUTCHAN> ";"
				<7 .OUTCHAN> " " <8 .OUTCHAN>>
			*400000000001*>>>
	     *400000000000*>>

<ENDPACKAGE>